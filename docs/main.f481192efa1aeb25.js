(self.webpackChunkhelpline=self.webpackChunkhelpline||[]).push([[179],{2011:(it,Se,F)=>{"use strict";F.d(Se,{hO:()=>He,xv:()=>ce,Dh:()=>ve,GT:()=>ye,cc:()=>Re,on:()=>G,pX:()=>oe});var y=F(5e3),ee=F(127),L=F(5813);it=F.hmd(it);const de=["ngOnDestroy"],oe=(se,be,Ae,pe={})=>new Proxy(se,{get:(Fe,Me)=>Ae.runOutsideAngular(()=>{var Ye;if(se[Me])return(null===(Ye=null==pe?void 0:pe.spy)||void 0===Ye?void 0:Ye.get)&&pe.spy.get(Me,se[Me]),se[Me];if(de.indexOf(Me)>-1)return()=>{};const We=be.toPromise().then(le=>{const J=le&&le[Me];return"function"==typeof J?J.bind(le):J&&J.then?J.then(ae=>Ae.run(()=>ae)):Ae.run(()=>J)});return new Proxy(()=>{},{get:(le,J)=>We[J],apply:(le,J,ae)=>We.then(Ee=>{var ue;const Oe=Ee&&Ee(...ae);return(null===(ue=null==pe?void 0:pe.spy)||void 0===ue?void 0:ue.apply)&&pe.spy.apply(Me,ae,Oe),Oe})})})}),ye=(se,be)=>{be.forEach(Ae=>{Object.getOwnPropertyNames(Ae.prototype||Ae).forEach(pe=>{Object.defineProperty(se.prototype,pe,Object.getOwnPropertyDescriptor(Ae.prototype||Ae,pe))})})};class ie{constructor(be){return be}}const ve=new y.OlP("angularfire2.app.options"),ce=new y.OlP("angularfire2.app.name");function G(se,be,Ae){const Fe="object"==typeof Ae&&Ae||{};Fe.name=Fe.name||"string"==typeof Ae&&Ae||"[DEFAULT]";const Ye=ee.Z.apps.filter(We=>We&&We.name===Fe.name)[0]||be.runOutsideAngular(()=>ee.Z.initializeApp(se,Fe));try{JSON.stringify(se)!==JSON.stringify(Ye.options)&&$("error",`${Ye.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(We){}return new ie(Ye)}const $=(se,...be)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[se](...be)},te={provide:ie,useFactory:G,deps:[ve,y.R0b,[new y.FiY,ce]]};let He=(()=>{class se{constructor(Ae){ee.Z.registerVersion("angularfire",L.q4.full,"core"),ee.Z.registerVersion("angularfire",L.q4.full,"app-compat"),ee.Z.registerVersion("angular",y.q4F.full,Ae.toString())}static initializeApp(Ae,pe){return{ngModule:se,providers:[{provide:ve,useValue:Ae},{provide:ce,useValue:pe}]}}}return se.\u0275fac=function(Ae){return new(Ae||se)(y.LFG(y.Lbi))},se.\u0275mod=y.oAB({type:se}),se.\u0275inj=y.cJS({providers:[te]}),se})();function Re(se,be,Ae,pe,Fe){const[,Me,Ye]=globalThis.\u0275AngularfireInstanceCache.find(We=>We[0]===se)||[];if(Me)return function Pe(se,be){try{return se.toString()===be.toString()}catch(Ae){return se===be}}(Fe,Ye)||(X("error",`${be} was already initialized on the ${Ae} Firebase App with different settings.${qe?" You may need to reload as Firebase is not HMR aware.":""}`),X("warn",{is:Fe,was:Ye})),Me;{const We=pe();return globalThis.\u0275AngularfireInstanceCache.push([se,We,Fe]),We}}const qe=!!it.hot,X=(se,...be)=>{(0,y.X6Q)()&&"undefined"!=typeof console&&console[se](...be)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,Se,F)=>{"use strict";F.d(Se,{q4:()=>ba,iC:()=>uo,fc:()=>dl,HU:()=>ru,vb:()=>ec,JM:()=>Ju});var y=F(5e3),ee=F(5867),L=F(5861),de=F(9681),oe=F(2090),ye=F(4859),ie=F(1877),ve=F(2940);const ce="@firebase/installations",G="0.5.5",te=`w:${G}`,He="FIS_v2",be=new oe.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ae(T){return T instanceof oe.ZR&&T.code.includes("request-failed")}function pe({projectId:T}){return`https://firebaseinstallations.googleapis.com/v1/projects/${T}/installations`}function Fe(T){return{token:T.token,requestStatus:2,expiresIn:Ee(T.expiresIn),creationTime:Date.now()}}function Me(T,D){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,L.Z)(function*(T,D){const V=(yield D.json()).error;return be.create("request-failed",{requestName:T,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function We({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function le(T,{refreshToken:D}){const N=We(T);return N.append("Authorization",function ue(T){return`${He} ${T}`}(D)),N}function J(T){return ae.apply(this,arguments)}function ae(){return(ae=(0,L.Z)(function*(T){const D=yield T();return D.status>=500&&D.status<600?T():D})).apply(this,arguments)}function Ee(T){return Number(T.replace("s","000"))}function Oe(T,D){return fe.apply(this,arguments)}function fe(){return(fe=(0,L.Z)(function*(T,{fid:D}){const N=pe(T),ge={method:"POST",headers:We(T),body:JSON.stringify({fid:D,authVersion:He,appId:T.appId,sdkVersion:te})},xe=yield J(()=>fetch(N,ge));if(xe.ok){const Ve=yield xe.json();return{fid:Ve.fid||D,registrationStatus:2,refreshToken:Ve.refreshToken,authToken:Fe(Ve.authToken)}}throw yield Me("Create Installation",xe)})).apply(this,arguments)}function wt(T){return new Promise(D=>{setTimeout(D,T)})}const xn=/^[cdef][\w-]{21}$/;function ut(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const N=function Wn(T){return function Gt(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return xn.test(N)?N:""}catch(T){return""}}function rn(T){return`${T.appName}!${T.appId}`}const cr=new Map;function Zt(T,D){const N=rn(T);Ut(N,D),function ji(T,D){const N=function Ws(){return!dr&&"BroadcastChannel"in self&&(dr=new BroadcastChannel("[Firebase] FID Change"),dr.onmessage=T=>{Ut(T.data.key,T.data.fid)}),dr}();N&&N.postMessage({key:T,fid:D}),function Sr(){0===cr.size&&dr&&(dr.close(),dr=null)}()}(N,D)}function Ut(T,D){const N=cr.get(T);if(N)for(const V of N)V(D)}let dr=null;const jr="firebase-installations-store";let $i=null;function _t(){return $i||($i=(0,ve.openDb)("firebase-installations-database",1,T=>{0===T.oldVersion&&T.createObjectStore(jr)})),$i}function Hr(T,D){return zn.apply(this,arguments)}function zn(){return(zn=(0,L.Z)(function*(T,D){const N=rn(T),Y=(yield _t()).transaction(jr,"readwrite"),ge=Y.objectStore(jr),xe=yield ge.get(N);return yield ge.put(D,N),yield Y.complete,(!xe||xe.fid!==D.fid)&&Zt(T,D.fid),D})).apply(this,arguments)}function Nn(T){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,L.Z)(function*(T){const D=rn(T),V=(yield _t()).transaction(jr,"readwrite");yield V.objectStore(jr).delete(D),yield V.complete})).apply(this,arguments)}function gt(T,D){return et.apply(this,arguments)}function et(){return(et=(0,L.Z)(function*(T,D){const N=rn(T),Y=(yield _t()).transaction(jr,"readwrite"),ge=Y.objectStore(jr),xe=yield ge.get(N),Ve=D(xe);return void 0===Ve?yield ge.delete(N):yield ge.put(Ve,N),yield Y.complete,Ve&&(!xe||xe.fid!==Ve.fid)&&Zt(T,Ve.fid),Ve})).apply(this,arguments)}function Rt(T){return dn.apply(this,arguments)}function dn(){return(dn=(0,L.Z)(function*(T){let D;const N=yield gt(T,V=>{const Y=hr(V),ge=xt(T,Y);return D=ge.registrationPromise,ge.installationEntry});return""===N.fid?{installationEntry:yield D}:{installationEntry:N,registrationPromise:D}})).apply(this,arguments)}function hr(T){return $a(T||{fid:ut(),registrationStatus:0})}function xt(T,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(be.create("app-offline"))};const N={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},V=function tt(T,D){return ct.apply(this,arguments)}(T,N);return{installationEntry:N,registrationPromise:V}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Ti(T)}:{installationEntry:D}}function ct(){return(ct=(0,L.Z)(function*(T,D){try{return Hr(T,yield Oe(T,D))}catch(N){throw Ae(N)&&409===N.customData.serverCode?yield Nn(T):yield Hr(T,{fid:D.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Ti(T){return ls.apply(this,arguments)}function ls(){return(ls=(0,L.Z)(function*(T){let D=yield Ht(T);for(;1===D.registrationStatus;)yield wt(100),D=yield Ht(T);if(0===D.registrationStatus){const{installationEntry:N,registrationPromise:V}=yield Rt(T);return V||N}return D})).apply(this,arguments)}function Ht(T){return gt(T,D=>{if(!D)throw be.create("installation-not-found");return $a(D)})}function $a(T){return function $r(T){return 1===T.registrationStatus&&T.registrationTime+1e4<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function oi(T,D){return H.apply(this,arguments)}function H(){return(H=(0,L.Z)(function*({appConfig:T,platformLoggerProvider:D},N){const V=W(T,N),Y=le(T,N),ge=D.getImmediate({optional:!0});ge&&Y.append("x-firebase-client",ge.getPlatformInfoString());const Ve={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:te}})},Ke=yield J(()=>fetch(V,Ve));if(Ke.ok)return Fe(yield Ke.json());throw yield Me("Generate Auth Token",Ke)})).apply(this,arguments)}function W(T,{fid:D}){return`${pe(T)}/${D}/authTokens:generate`}function z(T){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,L.Z)(function*(T,D=!1){let N;const V=yield gt(T.appConfig,ge=>{if(!mn(ge))throw be.create("not-registered");const xe=ge.authToken;if(!D&&qr(xe))return ge;if(1===xe.requestStatus)return N=re(T,D),ge;{if(!navigator.onLine)throw be.create("app-offline");const Ve=Kn(ge);return N=sn(T,Ve),Ve}});return N?yield N:V.authToken})).apply(this,arguments)}function re(T,D){return ze.apply(this,arguments)}function ze(){return(ze=(0,L.Z)(function*(T,D){let N=yield mt(T.appConfig);for(;1===N.authToken.requestStatus;)yield wt(100),N=yield mt(T.appConfig);const V=N.authToken;return 0===V.requestStatus?z(T,D):V})).apply(this,arguments)}function mt(T){return gt(T,D=>{if(!mn(D))throw be.create("not-registered");return function Ar(T){return 1===T.requestStatus&&T.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function sn(T,D){return hn.apply(this,arguments)}function hn(){return(hn=(0,L.Z)(function*(T,D){try{const N=yield oi(T,D),V=Object.assign(Object.assign({},D),{authToken:N});return yield Hr(T.appConfig,V),N}catch(N){if(!Ae(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const V=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield Hr(T.appConfig,V)}else yield Nn(T.appConfig);throw N}})).apply(this,arguments)}function mn(T){return void 0!==T&&2===T.registrationStatus}function qr(T){return 2===T.requestStatus&&!function Nt(T){const D=Date.now();return D<T.creationTime||T.creationTime+T.expiresIn<D+36e5}(T)}function Kn(T){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:D})}function qa(){return(qa=(0,L.Z)(function*(T){const D=T,{installationEntry:N,registrationPromise:V}=yield Rt(D.appConfig);return V?V.catch(console.error):z(D).catch(console.error),N.fid})).apply(this,arguments)}function Ga(){return(Ga=(0,L.Z)(function*(T,D=!1){const N=T;return yield Zn(N.appConfig),(yield z(N,D)).token})).apply(this,arguments)}function Zn(T){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,L.Z)(function*(T){const{registrationPromise:D}=yield Rt(T);D&&(yield D)})).apply(this,arguments)}function aa(T){return be.create("missing-app-config-values",{valueName:T})}const Wr="installations",St=T=>{const D=T.getProvider("app").getImmediate(),N=function fr(T){if(!T||!T.options)throw aa("App Configuration");if(!T.name)throw aa("App Name");const D=["projectId","apiKey","appId"];for(const N of D)if(!T.options[N])throw aa(N);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(D);return{app:D,appConfig:N,platformLoggerProvider:(0,de._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},un=T=>{const D=T.getProvider("app").getImmediate(),N=(0,de._getProvider)(D,Wr).getImmediate();return{getId:()=>function Ll(T){return qa.apply(this,arguments)}(N),getToken:Y=>function Ul(T){return Ga.apply(this,arguments)}(N,Y)}};(function Rr(){(0,de._registerComponent)(new ye.wA(Wr,St,"PUBLIC")),(0,de._registerComponent)(new ye.wA("installations-internal",un,"PRIVATE"))})(),(0,de.registerVersion)(ce,G),(0,de.registerVersion)(ce,G,"esm2017");const cs="@firebase/remote-config",Sn=new oe.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Wc{constructor(D,N,V,Y){this.client=D,this.storage=N,this.storageCache=V,this.logger=Y}isCachedDataFresh(D,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-N,Y=V<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${Y}.`),Y}fetch(D){var N=this;return(0,L.Z)(function*(){const[V,Y]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Y&&N.isCachedDataFresh(D.cacheMaxAgeMillis,V))return Y;D.eTag=Y&&Y.eTag;const ge=yield N.client.fetch(D),xe=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ge.status&&xe.push(N.storage.setLastSuccessfulFetchResponse(ge)),yield Promise.all(xe),ge})()}}function Vl(T=navigator){return T.languages&&T.languages[0]||T.language}class Ln{constructor(D,N,V,Y,ge,xe){this.firebaseInstallations=D,this.sdkVersion=N,this.namespace=V,this.projectId=Y,this.apiKey=ge,this.appId=xe}fetch(D){var N=this;return(0,L.Z)(function*(){const[V,Y]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),xe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ve={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ke={sdk_version:N.sdkVersion,app_instance_id:V,app_instance_id_token:Y,app_id:N.appId,language_code:Vl()},Vt={method:"POST",headers:Ve,body:JSON.stringify(Ke)},Qt=fetch(xe,Vt),jn=new Promise((Zi,pi)=>{D.signal.addEventListener(()=>{const ic=new Error("The operation was aborted.");ic.name="AbortError",pi(ic)})});let Dr;try{yield Promise.race([Qt,jn]),Dr=yield Qt}catch(Zi){let pi="fetch-client-network";throw"AbortError"===Zi.name&&(pi="fetch-timeout"),Sn.create(pi,{originalErrorMessage:Zi.message})}let Hn=Dr.status;const hl=Dr.headers.get("ETag")||void 0;let co,fi;if(200===Dr.status){let Zi;try{Zi=yield Dr.json()}catch(pi){throw Sn.create("fetch-client-parse",{originalErrorMessage:pi.message})}co=Zi.entries,fi=Zi.state}if("INSTANCE_STATE_UNSPECIFIED"===fi?Hn=500:"NO_CHANGE"===fi?Hn=304:("NO_TEMPLATE"===fi||"EMPTY_CONFIG"===fi)&&(co={}),304!==Hn&&200!==Hn)throw Sn.create("fetch-status",{httpStatus:Hn});return{status:Hn,eTag:hl,config:co}})()}}class hs{constructor(D,N){this.client=D,this.storage=N}fetch(D){var N=this;return(0,L.Z)(function*(){const V=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(D,V)})()}attemptFetch(D,{throttleEndTimeMillis:N,backoffCount:V}){var Y=this;return(0,L.Z)(function*(){yield function zc(T,D){return new Promise((N,V)=>{const Y=Math.max(D-Date.now(),0),ge=setTimeout(N,Y);T.addEventListener(()=>{clearTimeout(ge),V(Sn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,N);try{const ge=yield Y.client.fetch(D);return yield Y.storage.deleteThrottleMetadata(),ge}catch(ge){if(!function _p(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}(ge))throw ge;const xe={throttleEndTimeMillis:Date.now()+(0,oe.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(xe),Y.attemptFetch(D,xe)}})()}}class vp{constructor(D,N,V,Y,ge){this.app=D,this._client=N,this._storageCache=V,this._storage=Y,this._logger=ge,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function za(T,D){const N=T.target.error||void 0;return Sn.create(D,{originalErrorMessage:N&&N.message})}const ha="app_namespace_store";class Zc{constructor(D,N,V,Y=function wp(){return new Promise((T,D)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=V=>{D(za(V,"storage-open"))},N.onsuccess=V=>{T(V.target.result)},N.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(ha,{keyPath:"compositeKey"})}}catch(N){D(Sn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=D,this.appName=N,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var N=this;return(0,L.Z)(function*(){const V=yield N.openDbPromise;return new Promise((Y,ge)=>{const Ve=V.transaction([ha],"readonly").objectStore(ha),Ke=N.createCompositeKey(D);try{const Vt=Ve.get(Ke);Vt.onerror=Qt=>{ge(za(Qt,"storage-get"))},Vt.onsuccess=Qt=>{const jn=Qt.target.result;Y(jn?jn.value:void 0)}}catch(Vt){ge(Sn.create("storage-get",{originalErrorMessage:Vt&&Vt.message}))}})})()}set(D,N){var V=this;return(0,L.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((ge,xe)=>{const Ke=Y.transaction([ha],"readwrite").objectStore(ha),Vt=V.createCompositeKey(D);try{const Qt=Ke.put({compositeKey:Vt,value:N});Qt.onerror=jn=>{xe(za(jn,"storage-set"))},Qt.onsuccess=()=>{ge()}}catch(Qt){xe(Sn.create("storage-set",{originalErrorMessage:Qt&&Qt.message}))}})})()}delete(D){var N=this;return(0,L.Z)(function*(){const V=yield N.openDbPromise;return new Promise((Y,ge)=>{const Ve=V.transaction([ha],"readwrite").objectStore(ha),Ke=N.createCompositeKey(D);try{const Vt=Ve.delete(Ke);Vt.onerror=Qt=>{ge(za(Qt,"storage-delete"))},Vt.onsuccess=()=>{Y()}}catch(Vt){ge(Sn.create("storage-delete",{originalErrorMessage:Vt&&Vt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class fa{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,L.Z)(function*(){const N=D.storage.getLastFetchStatus(),V=D.storage.getLastSuccessfulFetchTimestampMillis(),Y=D.storage.getActiveConfig(),ge=yield N;ge&&(D.lastFetchStatus=ge);const xe=yield V;xe&&(D.lastSuccessfulFetchTimestampMillis=xe);const Ve=yield Y;Ve&&(D.activeConfig=Ve)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function s_(){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,L.Z)(function*(){if(!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(T){return!1}})).apply(this,arguments)}!function Ip(){(0,de._registerComponent)(new ye.wA("remote-config",function T(D,{instanceIdentifier:N}){const V=D.getProvider("app").getImmediate(),Y=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Sn.create("registration-window");if(!(0,oe.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:ge,apiKey:xe,appId:Ve}=V.options;if(!ge)throw Sn.create("registration-project-id");if(!xe)throw Sn.create("registration-api-key");if(!Ve)throw Sn.create("registration-app-id");const Ke=new Zc(Ve,V.name,N=N||"firebase"),Vt=new fa(Ke),Qt=new ie.Yd(cs);Qt.logLevel=ie.in.ERROR;const jn=new Ln(Y,de.SDK_VERSION,N,ge,xe,Ve),Dr=new hs(jn,Ke),Hn=new Wc(Dr,Ke,Vt,Qt),hl=new vp(V,Hn,Vt,Ke,Qt);return function Jt(T){const D=(0,oe.m9)(T);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(hl),hl},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(cs,"0.3.4"),(0,de.registerVersion)(cs,"0.3.4","esm2017")}();const Xs="/firebase-messaging-sw.js",ui="/firebase-cloud-messaging-push-scope",So="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ga="google.c.a.c_id",Yc="google.c.a.c_l",bp="google.c.a.ts",Ao="google.c.a.e";var ps=(()=>{return(T=ps||(ps={})).PUSH_RECEIVED="push-received",T.NOTIFICATION_CLICKED="notification-clicked",ps;var T})();function ci(T){const D=new Uint8Array(T);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Xc(T){const N=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(N),Y=new Uint8Array(V.length);for(let ge=0;ge<V.length;++ge)Y[ge]=V.charCodeAt(ge);return Y}const pr="fcm_token_details_db",Jc="fcm_token_object_Store";function ed(T){return jl.apply(this,arguments)}function jl(){return jl=(0,L.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ge=>ge.name).includes(pr))return null;let D=null;return(yield(0,ve.openDb)(pr,5,function(){var V=(0,L.Z)(function*(Y){var ge;if(Y.oldVersion<2||!Y.objectStoreNames.contains(Jc))return;const xe=Y.transaction.objectStore(Jc),Ve=yield xe.index("fcmSenderId").get(T);if(yield xe.clear(),Ve)if(2===Y.oldVersion){const Ke=Ve;if(!Ke.auth||!Ke.p256dh||!Ke.endpoint)return;D={token:Ke.fcmToken,createTime:null!==(ge=Ke.createTime)&&void 0!==ge?ge:Date.now(),subscriptionOptions:{auth:Ke.auth,p256dh:Ke.p256dh,endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:"string"==typeof Ke.vapidKey?Ke.vapidKey:ci(Ke.vapidKey)}}}else if(3===Y.oldVersion){const Ke=Ve;D={token:Ke.fcmToken,createTime:Ke.createTime,subscriptionOptions:{auth:ci(Ke.auth),p256dh:ci(Ke.p256dh),endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:ci(Ke.vapidKey)}}}else if(4===Y.oldVersion){const Ke=Ve;D={token:Ke.fcmToken,createTime:Ke.createTime,subscriptionOptions:{auth:ci(Ke.auth),p256dh:ci(Ke.p256dh),endpoint:Ke.endpoint,swScope:Ke.swScope,vapidKey:ci(Ke.vapidKey)}}}});return function(Y){return V.apply(this,arguments)}}())).close(),yield(0,ve.deleteDb)(pr),yield(0,ve.deleteDb)("fcm_vapid_details_db"),yield(0,ve.deleteDb)("undefined"),Uu(D)?D:null}),jl.apply(this,arguments)}function Uu(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:D}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const gs="firebase-messaging-store";let ju=null;function cn(){return ju||(ju=(0,ve.openDb)("firebase-messaging-database",1,T=>{0===T.oldVersion&&T.createObjectStore(gs)})),ju}function Za(T){return Js.apply(this,arguments)}function Js(){return(Js=(0,L.Z)(function*(T){const D=ir(T),V=yield(yield cn()).transaction(gs).objectStore(gs).get(D);if(V)return V;{const Y=yield ed(T.appConfig.senderId);if(Y)return yield en(T,Y),Y}})).apply(this,arguments)}function en(T,D){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,L.Z)(function*(T,D){const N=ir(T),Y=(yield cn()).transaction(gs,"readwrite");return yield Y.objectStore(gs).put(D,N),yield Y.complete,D})).apply(this,arguments)}function Ya(T){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,L.Z)(function*(T){const D=ir(T),V=(yield cn()).transaction(gs,"readwrite");yield V.objectStore(gs).delete(D),yield V.complete})).apply(this,arguments)}function ir({appConfig:T}){return T.appId}const An=new oe.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ms(T,D){return sr.apply(this,arguments)}function sr(){return(sr=(0,L.Z)(function*(T,D){const N=yield to(T),V=Qa(D),Y={method:"POST",headers:N,body:JSON.stringify(V)};let ge;try{ge=yield(yield fetch(eo(T.appConfig),Y)).json()}catch(xe){throw An.create("token-subscribe-failed",{errorInfo:xe})}if(ge.error)throw An.create("token-subscribe-failed",{errorInfo:ge.error.message});if(!ge.token)throw An.create("token-subscribe-no-token");return ge.token})).apply(this,arguments)}function ma(T,D){return qi.apply(this,arguments)}function qi(){return(qi=(0,L.Z)(function*(T,D){const N=yield to(T),V=Qa(D.subscriptionOptions),Y={method:"PATCH",headers:N,body:JSON.stringify(V)};let ge;try{ge=yield(yield fetch(`${eo(T.appConfig)}/${D.token}`,Y)).json()}catch(xe){throw An.create("token-update-failed",{errorInfo:xe})}if(ge.error)throw An.create("token-update-failed",{errorInfo:ge.error.message});if(!ge.token)throw An.create("token-update-no-token");return ge.token})).apply(this,arguments)}function Hu(T,D){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,L.Z)(function*(T,D){const V={method:"DELETE",headers:yield to(T)};try{const ge=yield(yield fetch(`${eo(T.appConfig)}/${D}`,V)).json();if(ge.error)throw An.create("token-unsubscribe-failed",{errorInfo:ge.error.message})}catch(Y){throw An.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function eo({projectId:T}){return`https://fcmregistrations.googleapis.com/v1/projects/${T}/registrations`}function to(T){return dt.apply(this,arguments)}function dt(){return(dt=(0,L.Z)(function*({appConfig:T,installations:D}){const N=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Qa({p256dh:T,auth:D,endpoint:N,vapidKey:V}){const Y={web:{endpoint:N,auth:D,p256dh:T}};return V!==So&&(Y.web.applicationPubKey=V),Y}const Xa=6048e5;function td(T){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,L.Z)(function*(T){const D=yield Tn(T.swRegistration,T.vapidKey),N={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:D.endpoint,auth:ci(D.getKey("auth")),p256dh:ci(D.getKey("p256dh"))},V=yield Za(T.firebaseDependencies);if(V){if(tl(V.subscriptionOptions,N))return Date.now()>=V.createTime+Xa?Ah(T,{token:V.token,createTime:Date.now(),subscriptionOptions:N}):V.token;try{yield Hu(T.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return Ot(T.firebaseDependencies,N)}return Ot(T.firebaseDependencies,N)})).apply(this,arguments)}function $u(T){return el.apply(this,arguments)}function el(){return(el=(0,L.Z)(function*(T){const D=yield Za(T.firebaseDependencies);D&&(yield Hu(T.firebaseDependencies,D.token),yield Ya(T.firebaseDependencies));const N=yield T.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function Ah(T,D){return De.apply(this,arguments)}function De(){return(De=(0,L.Z)(function*(T,D){try{const N=yield ma(T.firebaseDependencies,D),V=Object.assign(Object.assign({},D),{token:N,createTime:Date.now()});return yield en(T.firebaseDependencies,V),N}catch(N){throw yield $u(T),N}})).apply(this,arguments)}function Ot(T,D){return ql.apply(this,arguments)}function ql(){return(ql=(0,L.Z)(function*(T,D){const V={token:yield ms(T,D),createTime:Date.now(),subscriptionOptions:D};return yield en(T,V),V.token})).apply(this,arguments)}function Tn(T,D){return no.apply(this,arguments)}function no(){return(no=(0,L.Z)(function*(T,D){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Xc(D)})})).apply(this,arguments)}function tl(T,D){return D.vapidKey===T.vapidKey&&D.endpoint===T.endpoint&&D.auth===T.auth&&D.p256dh===T.p256dh}function xr(T){const D={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function qu(T,D){if(!D.notification)return;T.notification={};const N=D.notification.title;N&&(T.notification.title=N);const V=D.notification.body;V&&(T.notification.body=V);const Y=D.notification.image;Y&&(T.notification.image=Y)}(D,T),function Gu(T,D){!D.data||(T.data=D.data)}(D,T),function nd(T,D){if(!D.fcmOptions)return;T.fcmOptions={};const N=D.fcmOptions.link;N&&(T.fcmOptions.link=N);const V=D.fcmOptions.analytics_label;V&&(T.fcmOptions.analyticsLabel=V)}(D,T),D}function rd(T){return"object"==typeof T&&!!T&&ga in T}function nl(T,D){const N=[];for(let V=0;V<T.length;V++)N.push(T.charAt(V)),V<D.length&&N.push(D.charAt(V));return N.join("")}function Qn(T){return An.create("missing-app-config-values",{valueName:T})}nl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Di{constructor(D,N,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function _a(T){if(!T||!T.options)throw Qn("App Configuration Object");if(!T.name)throw Qn("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:N}=T;for(const V of D)if(!N[V])throw Qn(V);return{appName:T.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:Y,installations:N,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Wu(T){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,L.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Xs,{scope:ui}),T.swRegistration.update().catch(()=>{})}catch(D){throw An.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function _s(T,D){return rl.apply(this,arguments)}function rl(){return(rl=(0,L.Z)(function*(T,D){if(!D&&!T.swRegistration&&(yield Wu(T)),D||!T.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw An.create("invalid-sw-registration");T.swRegistration=D}})).apply(this,arguments)}function id(T,D){return il.apply(this,arguments)}function il(){return(il=(0,L.Z)(function*(T,D){D?T.vapidKey=D:T.vapidKey||(T.vapidKey=So)})).apply(this,arguments)}function Ro(){return(Ro=(0,L.Z)(function*(T,D){if(!navigator)throw An.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw An.create("permission-blocked");return yield id(T,null==D?void 0:D.vapidKey),yield _s(T,null==D?void 0:D.serviceWorkerRegistration),td(T)})).apply(this,arguments)}function Gl(T,D,N){return sl.apply(this,arguments)}function sl(){return(sl=(0,L.Z)(function*(T,D,N){const V=zu(D);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:N[ga],message_name:N[Yc],message_time:N[bp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function zu(T){switch(T){case ps.NOTIFICATION_CLICKED:return"notification_open";case ps.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Wl(){return(Wl=(0,L.Z)(function*(T,D){const N=D.data;if(!N.isFirebaseMessaging)return;T.onMessageHandler&&N.messageType===ps.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(xr(N)):T.onMessageHandler.next(xr(N)));const V=N.data;rd(V)&&"1"===V[Ao]&&(yield Gl(T,N.messageType,V))})).apply(this,arguments)}const xo="@firebase/messaging",No=T=>{const D=new Di(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Tp(T,D){return Wl.apply(this,arguments)}(D,N)),D},od=T=>{const D=T.getProvider("messaging").getImmediate();return{getToken:V=>function sd(T,D){return Ro.apply(this,arguments)}(D,V)}};function ya(){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,L.Z)(function*(){return"undefined"!=typeof window&&(0,oe.hl)()&&(yield(0,oe.eu)())&&(0,oe.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Mh(){(0,de._registerComponent)(new ye.wA("messaging",No,"PUBLIC")),(0,de._registerComponent)(new ye.wA("messaging-internal",od,"PRIVATE")),(0,de.registerVersion)(xo,"0.9.7"),(0,de.registerVersion)(xo,"0.9.7","esm2017")}();const ad="analytics",Zu="firebase_id",Yu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zl="https://www.googletagmanager.com/gtag/js",ar=new ie.Yd("@firebase/analytics");function Nh(T){return Promise.all(T.map(D=>D.catch(N=>N)))}function Es(T,D){const N=document.createElement("script");N.src=`${zl}?l=${T}&id=${D}`,N.async=!0,document.head.appendChild(N)}function Cp(T,D,N,V,Y,ge){return al.apply(this,arguments)}function al(){return(al=(0,L.Z)(function*(T,D,N,V,Y,ge){const xe=V[Y];try{if(xe)yield D[xe];else{const Ke=(yield Nh(N)).find(Vt=>Vt.measurementId===Y);Ke&&(yield D[Ke.appId])}}catch(Ve){ar.error(Ve)}T("config",Y,ge)})).apply(this,arguments)}function ro(T,D,N,V,Y){return ll.apply(this,arguments)}function ll(){return(ll=(0,L.Z)(function*(T,D,N,V,Y){try{let ge=[];if(Y&&Y.send_to){let xe=Y.send_to;Array.isArray(xe)||(xe=[xe]);const Ve=yield Nh(N);for(const Ke of xe){const Vt=Ve.find(jn=>jn.measurementId===Ke),Qt=Vt&&D[Vt.appId];if(!Qt){ge=[];break}ge.push(Qt)}}0===ge.length&&(ge=Object.values(D)),yield Promise.all(ge),T("event",V,Y||{})}catch(ge){ar.error(ge)}})).apply(this,arguments)}function kh(){const T=window.document.getElementsByTagName("script");for(const D of Object.values(T))if(D.src&&D.src.includes(zl))return D;return null}const Un=new oe.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Bt=new class Ea{constructor(D={},N=1e3){this.throttleMetadata=D,this.intervalMillis=N}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,N){this.throttleMetadata[D]=N}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function Kl(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function on(T){return wr.apply(this,arguments)}function wr(){return(wr=(0,L.Z)(function*(T){var D;const{appId:N,apiKey:V}=T,Y={method:"GET",headers:Kl(V)},ge=Yu.replace("{app-id}",N),xe=yield fetch(ge,Y);if(200!==xe.status&&304!==xe.status){let Ve="";try{const Ke=yield xe.json();(null===(D=Ke.error)||void 0===D?void 0:D.message)&&(Ve=Ke.error.message)}catch(Ke){}throw Un.create("config-fetch-failed",{httpStatus:xe.status,responseMessage:Ve})}return xe.json()})).apply(this,arguments)}function Rn(T){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,L.Z)(function*(T,D=Bt,N){const{appId:V,apiKey:Y,measurementId:ge}=T.options;if(!V)throw Un.create("no-app-id");if(!Y){if(ge)return{measurementId:ge,appId:V};throw Un.create("no-api-key")}const xe=D.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ve=new Ph;return setTimeout((0,L.Z)(function*(){Ve.abort()}),void 0!==N?N:6e4),ko({appId:V,apiKey:Y,measurementId:ge},xe,Ve,D)})).apply(this,arguments)}function ko(T,D,N){return wa.apply(this,arguments)}function wa(){return(wa=(0,L.Z)(function*(T,{throttleEndTimeMillis:D,backoffCount:N},V,Y=Bt){const{appId:ge,measurementId:xe}=T;try{yield Zl(V,D)}catch(Ve){if(xe)return ar.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ge,measurementId:xe};throw Ve}try{const Ve=yield on(T);return Y.deleteThrottleMetadata(ge),Ve}catch(Ve){if(!Yl(Ve)){if(Y.deleteThrottleMetadata(ge),xe)return ar.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${xe} provided in the "measurementId" field in the local Firebase config. [${Ve.message}]`),{appId:ge,measurementId:xe};throw Ve}const Ke=503===Number(Ve.customData.httpStatus)?(0,oe.$s)(N,Y.intervalMillis,30):(0,oe.$s)(N,Y.intervalMillis),Vt={throttleEndTimeMillis:Date.now()+Ke,backoffCount:N+1};return Y.setThrottleMetadata(ge,Vt),ar.debug(`Calling attemptFetch again in ${Ke} millis`),ko(T,Vt,V,Y)}})).apply(this,arguments)}function Zl(T,D){return new Promise((N,V)=>{const Y=Math.max(D-Date.now(),0),ge=setTimeout(N,Y);T.addEventListener(()=>{clearTimeout(ge),V(Un.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function Yl(T){if(!(T instanceof oe.ZR&&T.customData))return!1;const D=Number(T.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Ph{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function Ql(){return io.apply(this,arguments)}function io(){return(io=(0,L.Z)(function*(){if(!(0,oe.hl)())return ar.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,oe.eu)()}catch(T){return ar.warn(Un.create("indexeddb-unavailable",{errorInfo:T}).message),!1}return!0})).apply(this,arguments)}function At(){return(At=(0,L.Z)(function*(T,D,N,V,Y,ge,xe){var Ve;const Ke=Rn(T);Ke.then(Hn=>{N[Hn.measurementId]=Hn.appId,T.options.measurementId&&Hn.measurementId!==T.options.measurementId&&ar.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Hn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Hn=>ar.error(Hn)),D.push(Ke);const Vt=Ql().then(Hn=>{if(Hn)return V.getId()}),[Qt,jn]=yield Promise.all([Ke,Vt]);kh()||Es(ge,Qt.measurementId),Y("js",new Date);const Dr=null!==(Ve=null==xe?void 0:xe.config)&&void 0!==Ve?Ve:{};return Dr.origin="firebase",Dr.update=!0,null!=jn&&(Dr[Zu]=jn),Y("config",Qt.measurementId,Dr),Qt.measurementId})).apply(this,arguments)}class Cn{constructor(D){this.app=D}_delete(){return delete Zr[this.app.options.appId],Promise.resolve()}}let Zr={},ul=[];const br={};let O,Tr,me="dataLayer",Xl=!1;function ud(T,D,N){!function di(){const T=[];if((0,oe.ru)()&&T.push("This is a browser extension environment."),(0,oe.zI)()||T.push("Cookies are not available."),T.length>0){const D=T.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),N=Un.create("invalid-analytics-context",{errorInfo:D});ar.warn(N.message)}}();const V=T.options.appId;if(!V)throw Un.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw Un.create("no-api-key");ar.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zr[V])throw Un.create("already-exists",{id:V});if(!Xl){!function va(T){let D=[];Array.isArray(window[T])?D=window[T]:window[T]=D}(me);const{wrappedGtag:ge,gtagCore:xe}=function Dp(T,D,N,V,Y){let ge=function(...xe){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(ge=window[Y]),window[Y]=function ld(T,D,N,V){function ge(){return(ge=(0,L.Z)(function*(xe,Ve,Ke){try{"event"===xe?yield ro(T,D,N,Ve,Ke):"config"===xe?yield Cp(T,D,N,V,Ve,Ke):T("set",Ve)}catch(Vt){ar.error(Vt)}})).apply(this,arguments)}return function Y(xe,Ve,Ke){return ge.apply(this,arguments)}}(ge,T,D,N),{gtagCore:ge,wrappedGtag:window[Y]}}(Zr,ul,br,me,"gtag");Tr=ge,O=xe,Xl=!0}return Zr[V]=function Po(T,D,N,V,Y,ge,xe){return At.apply(this,arguments)}(T,ul,br,D,O,me,N),new Cn(T)}function Jl(){return(Jl=(0,L.Z)(function*(T,D,N,V,Y){if(Y&&Y.global)T("event",N,V);else{const ge=yield D;T("event",N,Object.assign(Object.assign({},V),{send_to:ge}))}})).apply(this,arguments)}function Vn(){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,L.Z)(function*(){if((0,oe.ru)()||!(0,oe.zI)()||!(0,oe.hl)())return!1;try{return yield(0,oe.eu)()}catch(T){return!1}})).apply(this,arguments)}const Oh="@firebase/analytics";!function Ds(){(0,de._registerComponent)(new ye.wA(ad,(D,{options:N})=>ud(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,de._registerComponent)(new ye.wA("analytics-internal",function T(D){try{const N=D.getProvider(ad).getImmediate();return{logEvent:(V,Y,ge)=>function eu(T,D,N,V){T=(0,oe.m9)(T),function cd(T,D,N,V,Y){return Jl.apply(this,arguments)}(Tr,Zr[T.app.options.appId],D,N,V).catch(Y=>ar.error(Y))}(N,V,Y,ge)}}catch(N){throw Un.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,de.registerVersion)(Oh,"0.7.5"),(0,de.registerVersion)(Oh,"0.7.5","esm2017")}();var Xr=F(4408),fn=F(7565);const oo=new class cl extends fn.v{}(class Sp extends Xr.o{constructor(D,N){super(D,N),this.scheduler=D,this.work=N}schedule(D,N=0){return N>0?super.schedule(D,N):(this.delay=N,this.state=D,this.scheduler.flush(this),this)}execute(D,N){return N>0||this.closed?super.execute(D,N):this._execute(D,N)}requestAsyncId(D,N,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(D,N,V):D.flush(this)}});var tu=F(4986),Cr=F(8505),Jr=F(5363),dd=F(9468);const ba=new y.GfV("7.2.0"),hi="__angularfire_symbol__analyticsIsSupported",ao="__angularfire_symbol__remoteConfigIsSupported",Ta="__angularfire_symbol__messagingIsSupported";function Ju(T,D,N){if(D){if(1===D.length)return D[0];const ge=D.filter(xe=>xe.app===N);if(1===ge.length)return ge[0]}return N.container.getProvider(T).getImmediate({optional:!0})}globalThis[hi]||(globalThis[hi]=Vn().then(T=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=T)),globalThis[Ta]||(globalThis[Ta]=ya().then(T=>globalThis.__angularfire_symbol__messagingIsSupportedValue=T)),globalThis[ao]||(globalThis[ao]=s_().then(T=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=T));const ec=(T,D)=>{const N=D?[D]:(0,ee.C6)(),V=[];return N.forEach(Y=>{Y.container.getProvider(T).instances.forEach(xe=>{V.includes(xe)||V.push(xe)})}),V};function Ss(){}class tc{constructor(D,N=oo){this.zone=D,this.delegate=N}now(){return this.delegate.now()}schedule(D,N,V){const Y=this.zone;return this.delegate.schedule(function(xe){Y.runGuarded(()=>{D.apply(this,[xe])})},N,V)}}class nu{constructor(D){this.zone=D,this.task=null}call(D,N){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ss,{},Ss,Ss)),N.pipe((0,Cr.b)({next:V,complete:V,error:V})).subscribe(D).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ru=(()=>{class T{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new tc(Zone.current)),this.insideAngular=N.run(()=>new tc(Zone.current,tu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(N){return new(N||T)(y.LFG(y.R0b))},T.\u0275prov=y.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function Bo(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function dl(T){return T.pipe((0,Jr.Q)(Bo().outsideAngular))}function uo(T){return Bo(),function Sa(T){return function(N){return(N=N.lift(new nu(T.ngZone))).pipe((0,dd.R)(T.outsideAngular),(0,Jr.Q)(T.insideAngular))}}(Bo())(T)}},2090:(it,Se,F)=>{"use strict";F.d(Se,{BH:()=>He,LL:()=>fe,ZR:()=>Oe,gQ:()=>jr,zI:()=>ae,hu:()=>ee,g5:()=>L,US:()=>ye,tV:()=>ce,h$:()=>ie,$s:()=>Ht,r3:()=>Vi,Sg:()=>Re,ne:()=>$i,p$:()=>G,vZ:()=>dr,ZB:()=>$,gK:()=>gt,pd:()=>zs,m9:()=>oi,z$:()=>Pe,GJ:()=>Zt,jU:()=>se,ru:()=>be,d:()=>pe,xb:()=>Ut,w1:()=>Fe,hl:()=>le,uI:()=>qe,UG:()=>X,Yr:()=>Ye,b$:()=>Ae,G6:()=>We,Mn:()=>Me,w9:()=>cr,cI:()=>xn,UI:()=>ji,xO:()=>Sr,zd:()=>Hi,DV:()=>Yt,ug:()=>xt,dS:()=>hr,Pz:()=>ot,Dv:()=>Ks,Wj:()=>Rt,lb:()=>dn,eu:()=>J});const ee=function(H,W){if(!H)throw L(W)},L=function(H){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+H)},de=function(H){const W=[];let z=0;for(let Ce=0;Ce<H.length;Ce++){let re=H.charCodeAt(Ce);re<128?W[z++]=re:re<2048?(W[z++]=re>>6|192,W[z++]=63&re|128):55296==(64512&re)&&Ce+1<H.length&&56320==(64512&H.charCodeAt(Ce+1))?(re=65536+((1023&re)<<10)+(1023&H.charCodeAt(++Ce)),W[z++]=re>>18|240,W[z++]=re>>12&63|128,W[z++]=re>>6&63|128,W[z++]=63&re|128):(W[z++]=re>>12|224,W[z++]=re>>6&63|128,W[z++]=63&re|128)}return W},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(H,W){if(!Array.isArray(H))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let re=0;re<H.length;re+=3){const ze=H[re],mt=re+1<H.length,sn=mt?H[re+1]:0,hn=re+2<H.length,mn=hn?H[re+2]:0;let Kn=(15&sn)<<2|mn>>6,Ar=63&mn;hn||(Ar=64,mt||(Kn=64)),Ce.push(z[ze>>2],z[(3&ze)<<4|sn>>4],z[Kn],z[Ar])}return Ce.join("")},encodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(H):this.encodeByteArray(de(H),W)},decodeString(H,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(H):function(H){const W=[];let z=0,Ce=0;for(;z<H.length;){const re=H[z++];if(re<128)W[Ce++]=String.fromCharCode(re);else if(re>191&&re<224){const ze=H[z++];W[Ce++]=String.fromCharCode((31&re)<<6|63&ze)}else if(re>239&&re<365){const hn=((7&re)<<18|(63&H[z++])<<12|(63&H[z++])<<6|63&H[z++])-65536;W[Ce++]=String.fromCharCode(55296+(hn>>10)),W[Ce++]=String.fromCharCode(56320+(1023&hn))}else{const ze=H[z++],mt=H[z++];W[Ce++]=String.fromCharCode((15&re)<<12|(63&ze)<<6|63&mt)}}return W.join("")}(this.decodeStringToByteArray(H,W))},decodeStringToByteArray(H,W){this.init_();const z=W?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let re=0;re<H.length;){const ze=z[H.charAt(re++)],sn=re<H.length?z[H.charAt(re)]:0;++re;const mn=re<H.length?z[H.charAt(re)]:64;++re;const Nt=re<H.length?z[H.charAt(re)]:64;if(++re,null==ze||null==sn||null==mn||null==Nt)throw Error();Ce.push(ze<<2|sn>>4),64!==mn&&(Ce.push(sn<<4&240|mn>>2),64!==Nt&&Ce.push(mn<<6&192|Nt))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let H=0;H<this.ENCODED_VALS.length;H++)this.byteToCharMap_[H]=this.ENCODED_VALS.charAt(H),this.charToByteMap_[this.byteToCharMap_[H]]=H,this.byteToCharMapWebSafe_[H]=this.ENCODED_VALS_WEBSAFE.charAt(H),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[H]]=H,H>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(H)]=H,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(H)]=H)}}},ie=function(H){const W=de(H);return ye.encodeByteArray(W,!0)},ve=function(H){return ie(H).replace(/\./g,"")},ce=function(H){try{return ye.decodeString(H,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function G(H){return $(void 0,H)}function $(H,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===H&&(H={});break;case Array:H=[];break;default:return W}for(const z in W)!W.hasOwnProperty(z)||!te(z)||(H[z]=$(H[z],W[z]));return H}function te(H){return"__proto__"!==H}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,z)=>{this.resolve=W,this.reject=z})}wrapCallback(W){return(z,Ce)=>{z?this.reject(z):this.resolve(Ce),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(z):W(z,Ce))}}}function Re(H,W){if(H.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=W||"demo-project",re=H.iat||0,ze=H.sub||H.user_id;if(!ze)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const mt=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:re,exp:re+3600,auth_time:re,sub:ze,user_id:ze,firebase:{sign_in_provider:"custom",identities:{}}},H);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(mt)),""].join(".")}function Pe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function qe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function X(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(H){return!1}}function se(){return"object"==typeof self&&self.self===self}function be(){const H="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof H&&void 0!==H.id}function Ae(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function pe(){return Pe().indexOf("Electron/")>=0}function Fe(){const H=Pe();return H.indexOf("MSIE ")>=0||H.indexOf("Trident/")>=0}function Me(){return Pe().indexOf("MSAppHost/")>=0}function Ye(){return!1}function We(){return!X()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function le(){return"object"==typeof indexedDB}function J(){return new Promise((H,W)=>{try{let z=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(Ce);re.onsuccess=()=>{re.result.close(),z||self.indexedDB.deleteDatabase(Ce),H(!0)},re.onupgradeneeded=()=>{z=!1},re.onerror=()=>{var ze;W((null===(ze=re.error)||void 0===ze?void 0:ze.message)||"")}}catch(z){W(z)}})}function ae(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Oe extends Error{constructor(W,z,Ce){super(z),this.code=W,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,Oe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,fe.prototype.create)}}class fe{constructor(W,z,Ce){this.service=W,this.serviceName=z,this.errors=Ce}create(W,...z){const Ce=z[0]||{},re=`${this.service}/${W}`,ze=this.errors[W],mt=ze?function wt(H,W){return H.replace(Gt,(z,Ce)=>{const re=W[Ce];return null!=re?String(re):`<${Ce}?>`})}(ze,Ce):"Error";return new Oe(re,`${this.serviceName}: ${mt} (${re}).`,Ce)}}const Gt=/\{\$([^}]+)}/g;function xn(H){return JSON.parse(H)}function ot(H){return JSON.stringify(H)}const ut=function(H){let W={},z={},Ce={},re="";try{const ze=H.split(".");W=xn(ce(ze[0])||""),z=xn(ce(ze[1])||""),re=ze[2],Ce=z.d||{},delete z.d}catch(ze){}return{header:W,claims:z,data:Ce,signature:re}},cr=function(H){const z=ut(H).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Zt=function(H){const W=ut(H).claims;return"object"==typeof W&&!0===W.admin};function Vi(H,W){return Object.prototype.hasOwnProperty.call(H,W)}function Yt(H,W){if(Object.prototype.hasOwnProperty.call(H,W))return H[W]}function Ut(H){for(const W in H)if(Object.prototype.hasOwnProperty.call(H,W))return!1;return!0}function ji(H,W,z){const Ce={};for(const re in H)Object.prototype.hasOwnProperty.call(H,re)&&(Ce[re]=W.call(z,H[re],re,H));return Ce}function dr(H,W){if(H===W)return!0;const z=Object.keys(H),Ce=Object.keys(W);for(const re of z){if(!Ce.includes(re))return!1;const ze=H[re],mt=W[re];if(Ws(ze)&&Ws(mt)){if(!dr(ze,mt))return!1}else if(ze!==mt)return!1}for(const re of Ce)if(!z.includes(re))return!1;return!0}function Ws(H){return null!==H&&"object"==typeof H}function Sr(H){const W=[];for(const[z,Ce]of Object.entries(H))Array.isArray(Ce)?Ce.forEach(re=>{W.push(encodeURIComponent(z)+"="+encodeURIComponent(re))}):W.push(encodeURIComponent(z)+"="+encodeURIComponent(Ce));return W.length?"&"+W.join("&"):""}function Hi(H){const W={};return H.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[re,ze]=Ce.split("=");W[decodeURIComponent(re)]=decodeURIComponent(ze)}}),W}function zs(H){const W=H.indexOf("?");if(!W)return"";const z=H.indexOf("#",W);return H.substring(W,z>0?z:void 0)}class jr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,z){z||(z=0);const Ce=this.W_;if("string"==typeof W)for(let Nt=0;Nt<16;Nt++)Ce[Nt]=W.charCodeAt(z)<<24|W.charCodeAt(z+1)<<16|W.charCodeAt(z+2)<<8|W.charCodeAt(z+3),z+=4;else for(let Nt=0;Nt<16;Nt++)Ce[Nt]=W[z]<<24|W[z+1]<<16|W[z+2]<<8|W[z+3],z+=4;for(let Nt=16;Nt<80;Nt++){const Kn=Ce[Nt-3]^Ce[Nt-8]^Ce[Nt-14]^Ce[Nt-16];Ce[Nt]=4294967295&(Kn<<1|Kn>>>31)}let mn,qr,re=this.chain_[0],ze=this.chain_[1],mt=this.chain_[2],sn=this.chain_[3],hn=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(mn=sn^ze&(mt^sn),qr=1518500249):(mn=ze^mt^sn,qr=1859775393):Nt<60?(mn=ze&mt|sn&(ze|mt),qr=2400959708):(mn=ze^mt^sn,qr=3395469782);const Kn=(re<<5|re>>>27)+mn+hn+qr+Ce[Nt]&4294967295;hn=sn,sn=mt,mt=4294967295&(ze<<30|ze>>>2),ze=re,re=Kn}this.chain_[0]=this.chain_[0]+re&4294967295,this.chain_[1]=this.chain_[1]+ze&4294967295,this.chain_[2]=this.chain_[2]+mt&4294967295,this.chain_[3]=this.chain_[3]+sn&4294967295,this.chain_[4]=this.chain_[4]+hn&4294967295}update(W,z){if(null==W)return;void 0===z&&(z=W.length);const Ce=z-this.blockSize;let re=0;const ze=this.buf_;let mt=this.inbuf_;for(;re<z;){if(0===mt)for(;re<=Ce;)this.compress_(W,re),re+=this.blockSize;if("string"==typeof W){for(;re<z;)if(ze[mt]=W.charCodeAt(re),++mt,++re,mt===this.blockSize){this.compress_(ze),mt=0;break}}else for(;re<z;)if(ze[mt]=W[re],++mt,++re,mt===this.blockSize){this.compress_(ze),mt=0;break}}this.inbuf_=mt,this.total_+=z}digest(){const W=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let re=this.blockSize-1;re>=56;re--)this.buf_[re]=255&z,z/=256;this.compress_(this.buf_);let Ce=0;for(let re=0;re<5;re++)for(let ze=24;ze>=0;ze-=8)W[Ce]=this.chain_[re]>>ze&255,++Ce;return W}}function $i(H,W){const z=new _t(H,W);return z.subscribe.bind(z)}class _t{constructor(W,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{W(this)}).catch(Ce=>{this.error(Ce)})}next(W){this.forEachObserver(z=>{z.next(W)})}error(W){this.forEachObserver(z=>{z.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,z,Ce){let re;if(void 0===W&&void 0===z&&void 0===Ce)throw new Error("Missing Observer.");re=function zn(H,W){if("object"!=typeof H||null===H)return!1;for(const z of W)if(z in H&&"function"==typeof H[z])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:z,complete:Ce},void 0===re.next&&(re.next=Nn),void 0===re.error&&(re.error=Nn),void 0===re.complete&&(re.complete=Nn);const ze=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch(mt){}}),this.observers.push(re),ze}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,W)}sendOne(W,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{z(this.observers[W])}catch(Ce){"undefined"!=typeof console&&console.error&&console.error(Ce)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nn(){}const Ks=function(H,W,z,Ce){let re;if(Ce<W?re="at least "+W:Ce>z&&(re=0===z?"none":"no more than "+z),re)throw new Error(H+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+re+".")};function gt(H,W){return`${H} failed: ${W} argument `}function Rt(H,W,z,Ce){if((!Ce||z)&&"function"!=typeof z)throw new Error(gt(H,W)+"must be a valid function.")}function dn(H,W,z,Ce){if((!Ce||z)&&("object"!=typeof z||null===z))throw new Error(gt(H,W)+"must be a valid context object.")}const hr=function(H){const W=[];let z=0;for(let Ce=0;Ce<H.length;Ce++){let re=H.charCodeAt(Ce);if(re>=55296&&re<=56319){const ze=re-55296;Ce++,ee(Ce<H.length,"Surrogate pair missing trail surrogate."),re=65536+(ze<<10)+(H.charCodeAt(Ce)-56320)}re<128?W[z++]=re:re<2048?(W[z++]=re>>6|192,W[z++]=63&re|128):re<65536?(W[z++]=re>>12|224,W[z++]=re>>6&63|128,W[z++]=63&re|128):(W[z++]=re>>18|240,W[z++]=re>>12&63|128,W[z++]=re>>6&63|128,W[z++]=63&re|128)}return W},xt=function(H){let W=0;for(let z=0;z<H.length;z++){const Ce=H.charCodeAt(z);Ce<128?W++:Ce<2048?W+=2:Ce>=55296&&Ce<=56319?(W+=4,z++):W+=3}return W};function Ht(H,W=1e3,z=2){const Ce=W*Math.pow(z,H),re=Math.round(.5*Ce*(Math.random()-.5)*2);return Math.min(144e5,Ce+re)}function oi(H){return H&&H._delegate?H._delegate:H}},194:(it,Se,F)=>{"use strict";var y=F(5e3);let ee=null;function L(){return ee}const ie=new y.OlP("DocumentToken");var ae=(()=>((ae=ae||{})[ae.Zero=0]="Zero",ae[ae.One=1]="One",ae[ae.Two=2]="Two",ae[ae.Few=3]="Few",ae[ae.Many=4]="Many",ae[ae.Other=5]="Other",ae))();const zs=y.kL8;class Wt{}let Sn=(()=>{class n extends Wt{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(zs(r||this.locale)(t)){case ae.Zero:return"zero";case ae.One:return"one";case ae.Two:return"two";case ae.Few:return"few";case ae.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.soG))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class da{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Fn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new da(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,u),Ys(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ys(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},n.\u0275dir=y.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Ys(n,e){n.context.$implicit=e.item}class zc{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class _p{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}onDestroy(e){}}const hs=new _p,yp=new zc;let Lu=(()=>{class n{constructor(t){this._ref=t,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,y.QGY)(t))return hs;if((0,y.F4k)(t))return yp;throw function Ln(n,e){return new y.vHH(2100,"")}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.sBO,16))},n.\u0275pipe=y.Yjl({name:"async",type:n,pure:!1}),n})(),Ao=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[{provide:Wt,useClass:Sn}]}),n})();const Qc="browser";function Er(n){return"server"===n}class Js extends class Za extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function oe(n){ee||(ee=n)}(new Js)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Hl(){return en=en||document.querySelector("base"),en?en.getAttribute("href"):null}();return null==t?null:function Mo(n){Ya=Ya||document.createElement("a"),Ya.setAttribute("href",n);const e=Ya.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){en=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function la(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Ya,en=null;const ir=new y.OlP("TRANSITION_ID"),An=[{provide:y.ip1,useFactory:function $l(n,e,t){return()=>{t.get(y.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[ir,ie,y.zs3],multi:!0}];class ms{static init(){(0,y.VLi)(new ms)}addToWindow(e){y.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},y.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(r=>{const i=y.dqk.getAllAngularTestabilities();let a=i.length,u=!1;const h=function(m){u=u||m,a--,0==a&&r(u)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let sr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const ma=new y.OlP("EventManagerPlugins");let qi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const u=i[a];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ma),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class Hu{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Kr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),eo=(()=>{class n extends Kr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const u=this._doc.createElement("style");u.textContent=a,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(to),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(to))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ie))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function to(n){L().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Qa=/%COMP%/g;function De(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?De(n,i,t):(i=i.replace(Qa,n),t.push(i))}return t}function Ot(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Tn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new no(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case y.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new qu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case y.ifc.ShadowDom:return new Gu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=De(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(qi),y.LFG(eo),y.LFG(y.AFp))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class no{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t],e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=dt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=dt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(t,r,i&y.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&y.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ot(r)):this.eventManager.addEventListener(e,t,Ot(r))}}class qu extends no{constructor(e,t,r,i){super(e),this.component=r;const a=De(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function el(n){return"_ngcontent-%COMP%".replace(Qa,n)}(i+"-"+r.id),this.hostAttr=function Ah(n){return"_nghost-%COMP%".replace(Qa,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Gu extends no{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=De(i.id,i.styles,[]);for(let u=0;u<a.length;u++){const h=document.createElement("style");h.textContent=a[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let nd=(()=>{class n extends Hu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ie))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const rd=["alt","control","meta","shift"],_a={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Di={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wu=(()=>{class n extends Hu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),u=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,a.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let u="";if(rd.forEach(m=>{const E=r.indexOf(m);E>-1&&(r.splice(E,1),u+=m+".")}),u+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=u,h}static getEventFullKey(t){let r="",i=function Gi(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Qn.hasOwnProperty(e)&&(e=Qn[e]))}return _a[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),rd.forEach(a=>{a!=i&&Di[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ie))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const sd=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:Qc},{provide:y.g9A,useValue:function _s(){Js.makeCurrent(),ms.init()},multi:!0},{provide:ie,useFactory:function id(){return(0,y.RDi)(document),document},deps:[]}]),Ro=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function rl(){return new y.qLn},deps:[]},{provide:ma,useClass:nd,multi:!0,deps:[ie,y.R0b,y.Lbi]},{provide:ma,useClass:Wu,multi:!0,deps:[ie]},{provide:Tn,useClass:Tn,deps:[qi,eo,y.AFp]},{provide:y.FYo,useExisting:Tn},{provide:Kr,useExisting:eo},{provide:eo,useClass:eo,deps:[ie]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b]},{provide:qi,useClass:qi,deps:[ma,y.R0b]},{provide:class cn{},useClass:sr,deps:[]}];let Gl=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:y.AFp,useValue:t.appId},{provide:ir,useExisting:y.AFp},An]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(n,12))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:Ro,imports:[Ao,y.hGG]}),n})();"undefined"!=typeof window&&window;let ro=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(t){let r=null;return r=t?new(t||n):y.LFG(ld),r},providedIn:"root"}),n})(),ld=(()=>{class n extends ro{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case y.q3G.NONE:return r;case y.q3G.HTML:return(0,y.qzn)(r,"HTML")?(0,y.z3N)(r):(0,y.EiD)(this._doc,String(r)).toString();case y.q3G.STYLE:return(0,y.qzn)(r,"Style")?(0,y.z3N)(r):r;case y.q3G.SCRIPT:if((0,y.qzn)(r,"Script"))return(0,y.z3N)(r);throw new Error("unsafe value used in a script context");case y.q3G.URL:return(0,y.yhl)(r),(0,y.qzn)(r,"URL")?(0,y.z3N)(r):(0,y.mCW)(String(r));case y.q3G.RESOURCE_URL:if((0,y.qzn)(r,"ResourceURL"))return(0,y.z3N)(r);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${t} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(t){return(0,y.JVY)(t)}bypassSecurityTrustStyle(t){return(0,y.L6k)(t)}bypassSecurityTrustScript(t){return(0,y.eBb)(t)}bypassSecurityTrustUrl(t){return(0,y.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,y.pB0)(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ie))},n.\u0275prov=y.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function ll(n){return new ld(n.get(ie))}(y.LFG(y.zs3)),r},providedIn:"root"}),n})();var kh=F(4986),ws=F(8306),Un=F(7669),Pn=F(8996);function lr(...n){const e=(0,Un.yG)(n);return(0,Pn.D)(n,e)}var Ea=F(6451),Bt=F(4004),Kl=F(3099),on=F(8421),wr=F(4482),Rn=F(5403);function Ir(n,e){return(0,wr.e)((t,r)=>{let i=null,a=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe(new Rn.Q(r,m=>{null==i||i.unsubscribe();let E=0;const C=a++;(0,on.Xf)(n(m,C)).subscribe(i=new Rn.Q(r,S=>r.next(e?e(m,S,C,E++):S),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function ko(n,e,t,r,i){return(a,u)=>{let h=t,m=e,E=0;a.subscribe(new Rn.Q(u,C=>{const S=E++;m=h?n(m,C,S):(h=!0,C),r&&u.next(m)},i&&(()=>{h&&u.next(m),u.complete()})))}}function wa(n,e){return(0,wr.e)(ko(n,e,arguments.length>=2,!0))}var Zl=F(4671);function Yl(n,e=Zl.y){return n=null!=n?n:Ph,(0,wr.e)((t,r)=>{let i,a=!0;t.subscribe(new Rn.Q(r,u=>{const h=e(u);(a||!n(i,h))&&(a=!1,i=h,r.next(u))}))})}function Ph(n,e){return n===e}var Ql=F(5032),At=F(5813),Cn=F(2011),ul=(F(8999),F(3942)),br=F(4859),me=F(5861),Bn=F(9681),O=F(2090),Tr=F(1877);const Xl="@firebase/database";let di="";function ud(n){di=n}class cd{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,O.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,O.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Jl{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,O.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Is=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new cd(e)}}catch(e){}return new Jl},bs=Is("localStorage"),Ia=Is("sessionStorage"),Si=new Tr.Yd("@firebase/database"),Oo=function(){let n=1;return function(){return n++}}(),Ts=function(n){const e=(0,O.dS)(n),t=new O.gQ;t.update(e);const r=t.digest();return O.US.encodeByteArray(r)},Yr=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Yr.apply(null,r):e+="object"==typeof r?(0,O.Pz)(r):r,e+=" "}return e};let zi=null,Xu=!0;const Fo=function(n,e){(0,O.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Si.logLevel=Tr.in.VERBOSE,zi=Si.log.bind(Si),e&&Ia.set("logging_enabled",!0)):"function"==typeof n?zi=n:(zi=null,Ia.remove("logging_enabled"))},Vn=function(...n){if(!0===Xu&&(Xu=!1,null===zi&&!0===Ia.get("logging_enabled")&&Fo(!0)),zi){const e=Yr.apply(null,n);zi(e)}},Lo=function(n){return function(...e){Vn(n,...e)}},En=function(...n){const e="FIREBASE INTERNAL ERROR: "+Yr(...n);Si.error(e)},so=function(...n){const e=`FIREBASE FATAL ERROR: ${Yr(...n)}`;throw Si.error(e),new Error(e)},Qr=function(...n){const e="FIREBASE WARNING: "+Yr(...n);Si.warn(e)},eu=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Cs="[MIN_NAME]",Ds="[MAX_NAME]",Xr=function(n,e){if(n===e)return 0;if(n===Cs||e===Ds)return-1;if(e===Cs||n===Ds)return 1;{const t=Uo(n),r=Uo(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Sp=function(n,e){return n===e?0:n<e?-1:1},fn=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,O.Pz)(e))},cl=function(n){if("object"!=typeof n||null===n)return(0,O.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,O.Pz)(e[r]),t+=":",t+=cl(n[e[r]]);return t+="}",t},oo=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function gr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const tu=function(n){(0,O.hu)(!eu(n),"Invalid JSON number");const r=1023;let i,a,u,h,m;0===n?(a=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,u=Math.round(n/Math.pow(2,-1074))));const E=[];for(m=52;m;m-=1)E.push(u%2?1:0),u=Math.floor(u/2);for(m=11;m;m-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const C=E.join("");let S="";for(m=0;m<64;m+=8){let k=parseInt(C.substr(m,8),2).toString(16);1===k.length&&(k="0"+k),S+=k}return S.toLowerCase()},ba=new RegExp("^-?(0*)\\d{1,10}$"),Ai=-2147483648,hi=2147483647,Uo=function(n){if(ba.test(n)){const e=Number(n);if(e>=Ai&&e<=hi)return e}return null},ao=function(n){try{n()}catch(e){setTimeout(()=>{throw Qr("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Ta=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class Ca{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Qr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class ei{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Vn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Qr(e)}}let Da=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const nu=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Ki="websocket",dl="long_polling";class nc{constructor(e,t,r,i,a=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bs.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bs.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Sa(n,e,t){let r;if((0,O.hu)("string"==typeof e,"typeof type must == string"),(0,O.hu)("object"==typeof t,"typeof params must == object"),e===Ki)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==dl)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function uo(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return gr(t,(a,u)=>{i.push(a+"="+u)}),r+i.join("&")}class iu{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,O.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,O.p$)(this.counters_)}}const rc={},T={};function D(n){const e=n.toString();return rc[e]||(rc[e]=new iu),rc[e]}class V{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&ao(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class jo{constructor(e,t,r,i,a,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Lo(e),this.stats_=D(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),Sa(t,dl,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new V(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,O.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Aa((...a)=>{const[u,h,m,E,C]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=m;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[u,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&nu.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){jo.forceAllow_=!0}static forceDisallow(){jo.forceDisallow_=!0}static isAvailable(){return!((0,O.Yr)()||!jo.forceAllow_&&(jo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,O.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,O.h$)(t),i=oo(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,O.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,O.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Aa{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,O.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Oo(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Aa.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Vn("frame writing exception"),h.stack&&Vn(h.stack),Vn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Vn("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,O.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Vn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let sc=null;"undefined"!=typeof MozWebSocket?sc=MozWebSocket:"undefined"!=typeof WebSocket&&(sc=WebSocket);let Yi=(()=>{class n{constructor(t,r,i,a,u,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Lo(this.connId),this.stats_=D(r),this.connURL=n.connectionURL_(r,h,m,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const u={v:"5"};return!(0,O.Yr)()&&"undefined"!=typeof location&&location.hostname&&nu.test(location.hostname)&&(u.r="f"),r&&(u.s=r),i&&(u.ls=i),a&&(u.ac=a),Sa(t,Ki,u)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bs.set("previous_websocket_failure",!0);try{if((0,O.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${di}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new sc(this.connURL,[],a)}else this.mySock=new sc(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==sc&&!n.forceDisallow_}static previouslyFailed(){return bs.isInMemoryStorage||!0===bs.get("previous_websocket_failure")}markConnectionHealthy(){bs.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,O.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,O.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,O.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=oo(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class fl{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[jo,Yi]}initTransports_(e){const t=Yi&&Yi.isAvailable();let r=t&&!Yi.previouslyFailed();if(e.webSocketOnly&&(t||Qr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Yi];else{const i=this.transports_=[];for(const a of fl.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class oc{constructor(e,t,r,i,a,u,h,m,E,C){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=m,this.onKill_=E,this.lastSessionId=C,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Lo("c:"+this.id+":"),this.transportManager_=new fl(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Ta(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=fn("t",e),r=fn("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=fn("t",e),r=fn("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=fn("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?En("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):En("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Qr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),Ta(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ta(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class md{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Lh{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,O.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,O.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class ac extends Lh{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,O.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ac}getInitialEvent(e){return(0,O.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class tn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function zt(){return new tn("")}function Ft(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function ho(n){return n.pieces_.length-n.pieceNum_}function pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new tn(n.pieces_,e)}function Mi(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gl(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Op(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new tn(e,0)}function _n(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof tn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new tn(t,0)}function Lt(n){return n.pieceNum_>=n.pieces_.length}function Nr(n,e){const t=Ft(n),r=Ft(e);if(null===t)return e;if(t===r)return Nr(pn(n),pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Fp(n,e){const t=gl(n,0),r=gl(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Xr(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function yd(n,e){if(ho(n)!==ho(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Qi(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(ho(n)>ho(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class h_{constructor(e,t){this.errorPrefix_=t,this.parts_=gl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,O.ug)(this.parts_[r]);f_(this)}}function f_(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+_l(n))}function _l(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Ho extends Lh{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ho}getInitialEvent(e){return(0,O.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const ou=1e3;let uu,au=(()=>{class n extends md{constructor(t,r,i,a,u,h,m,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=Lo("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ou,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,O.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ho.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&ac.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,u={r:a,a:t,b:r};this.log_((0,O.Pz)(u)),(0,O.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new O.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const u=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[u];void 0===h||a!==h||(delete this.outstandingGets_[u],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+u+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(u),r.promise}listen(t,r,i,a){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,O.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,m=>{const E=m.d,C=m.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==C&&this.removeListen_(i,a),t.onComplete&&t.onComplete(C,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,O.r3)(t,"w")){const i=(0,O.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Qr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,O.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,O.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const u=a.s,h=a.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,O.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const u={p:t};a&&(u.q=i,u.t=a),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,O.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):En("Unrecognized action received from server: "+(0,O.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,O.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ou,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ou,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ou),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,E=null;const C=function(){E?E.close():(m=!0,a())};t.realtime_={close:C,sendRequest:function(B){(0,O.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(B)}};const k=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[B,j]=yield Promise.all([t.authTokenProvider_.getToken(k),t.appCheckTokenProvider_.getToken(k)]);m?Vn("getToken() completed but was canceled"):(Vn("getToken() completed. Creating connection."),t.authToken_=B&&B.accessToken,t.appCheckToken_=j&&j.token,E=new oc(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ne=>{Qr(ne+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(B){t.log_("Failed to get token: "+B),m||(t.repoInfo_.nodeAdmin&&Qr(B),C())}}})()}interrupt(t){Vn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Vn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,O.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ou,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>cl(u)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new tn(t).toString();let a;if(this.listens.has(i)){const u=this.listens.get(i);a=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Vn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Vn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,O.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+di.replace(/\./g,"-")]=1,(0,O.uI)()?t["framework.cordova"]=1:(0,O.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=ac.getInstance().currentlyOnline();return(0,O.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new kt(e,t)}}class lu{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new kt(Cs,e),i=new kt(Cs,t);return 0!==this.compare(r,i)}minPost(){return kt.MIN}}class p_ extends lu{static get __EMPTY_NODE(){return uu}static set __EMPTY_NODE(e){uu=e}compare(e,t){return Xr(e.name,t.name)}isDefinedOn(e){throw(0,O.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return kt.MIN}maxPost(){return new kt(Ds,uu)}makePost(e,t){return(0,O.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new kt(e,uu)}toString(){return".key"}}const fo=new p_;class yl{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(e=e,u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let cu,As=(()=>{class n{constructor(t,r,i,a,u){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:kr.EMPTY_NODE,this.right=null!=u?u:kr.EMPTY_NODE}copy(t,r,i,a,u){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=u?u:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const u=i(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===u?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return kr.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return kr.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class kr{constructor(e,t=kr.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new kr(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,As.BLACK,null,null))}remove(e){return new kr(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,As.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new yl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new yl(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new yl(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new yl(this.root_,null,this.comparator_,!0,e)}}function Vh(n,e){return Xr(n.name,e.name)}function Ed(n,e){return Xr(n,e)}kr.EMPTY_NODE=new class g_{copy(e,t,r,i,a){return this}insert(e,t,r){return new As(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const wd=function(n){return"number"==typeof n?"number:"+tu(n):"string:"+n},Up=function(n){if(n.isLeafNode()){const e=n.val();(0,O.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,O.r3)(e,".sv"),"Priority must be a string or number.")}else(0,O.hu)(n===cu||n.isEmpty(),"priority of unexpected type.");(0,O.hu)(n===cu||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let On,Bp,jh,vl=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,O.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Up(this.priorityNode_)}static set __childrenNodeConstructor(t){On=t}static get __childrenNodeConstructor(){return On}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Lt(t)?this:".priority"===Ft(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ft(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,O.hu)(".priority"!==i||1===ho(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+wd(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?tu(this.value_):this.value_,this.lazyHash_=Ts(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,O.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,O.hu)(a>=0,"Unknown leaf type: "+r),(0,O.hu)(u>=0,"Unknown leaf type: "+i),a===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const yn=new class Id extends lu{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Xr(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return kt.MIN}maxPost(){return new kt(Ds,new vl("[PRIORITY-POST]",jh))}makePost(e,t){const r=Bp(e);return new kt(t,new vl("[PRIORITY-POST]",r))}toString(){return".priority"}},jp=Math.log(2);class __{constructor(e){this.count=parseInt(Math.log(e+1)/jp,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Hh=function(n,e,t,r){n.sort(e);const i=function(m,E){const C=E-m;let S,k;if(0===C)return null;if(1===C)return S=n[m],k=t?t(S):S,new As(k,S.node,As.BLACK,null,null);{const B=parseInt(C/2,10)+m,j=i(m,B),ne=i(B+1,E);return S=n[B],k=t?t(S):S,new As(k,S.node,As.BLACK,j,ne)}},h=function(m){let E=null,C=null,S=n.length;const k=function(j,ne){const we=S-j,Qe=S;S-=j;const Je=i(we+1,Qe),pt=n[we],Ze=t?t(pt):pt;B(new As(Ze,pt.node,ne,null,Je))},B=function(j){E?(E.left=j,E=j):(C=j,E=j)};for(let j=0;j<m.count;++j){const ne=m.nextBitIsOne(),we=Math.pow(2,m.count-(j+1));ne?k(we,As.BLACK):(k(we,As.BLACK),k(we,As.RED))}return C}(new __(n.length));return new kr(r||e,h)};let Hp;const po={};class Dn{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,O.hu)(po&&yn,"ChildrenNode.ts has not been loaded"),Hp=Hp||new Dn({".priority":po},{".priority":yn}),Hp}get(e){const t=(0,O.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof kr?t:null}hasIndex(e){return(0,O.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,O.hu)(e!==fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(kt.Wrap);let h,u=a.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=a.getNext();h=i?Hh(r,e.getCompare()):po;const m=e.toString(),E=Object.assign({},this.indexSet_);E[m]=e;const C=Object.assign({},this.indexes_);return C[m]=h,new Dn(C,E)}addToIndexes(e,t){const r=(0,O.UI)(this.indexes_,(i,a)=>{const u=(0,O.DV)(this.indexSet_,a);if((0,O.hu)(u,"Missing index implementation for "+a),i===po){if(u.isDefinedOn(e.node)){const h=[],m=t.getIterator(kt.Wrap);let E=m.getNext();for(;E;)E.name!==e.name&&h.push(E),E=m.getNext();return h.push(e),Hh(h,u.getCompare())}return po}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new kt(e.name,h))),m.insert(e,e.node)}});return new Dn(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,O.UI)(this.indexes_,i=>{if(i===po)return i;{const a=t.get(e.name);return a?i.remove(new kt(e.name,a)):i}});return new Dn(r,this.indexSet_)}}let $o,It=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Up(this.priorityNode_),this.children_.isEmpty()&&(0,O.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return $o||($o=new n(new kr(Ed),null,Dn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||$o}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?$o:r}}getChild(t){const r=Ft(t);return null===r?this:this.getImmediateChild(r).getChild(pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,O.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new kt(t,r);let a,u;r.isEmpty()?(a=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?$o:this.priorityNode_;return new n(a,h,u)}}updateChild(t,r){const i=Ft(t);if(null===i)return r;{(0,O.hu)(".priority"!==Ft(t)||1===ho(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(pn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,u=!0;if(this.forEachChild(yn,(h,m)=>{r[h]=m.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):u=!1}),!t&&u&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+wd(this.getPriority().val())+":"),this.forEachChild(yn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":Ts(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const u=a.getPredecessorKey(new kt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new kt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,kt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)<0;)a.getNext(),u=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,kt.Wrap);let u=a.peek();for(;null!=u&&r.compare(u,t)>0;)a.getNext(),u=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Xn?-1:0}withIndex(t){if(t===fo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===fo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(yn),a=r.getIterator(yn);let u=i.getNext(),h=a.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=a.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===fo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Xn=new class $h extends It{constructor(){super(new kr(Ed),It.EMPTY_NODE,Dn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return It.EMPTY_NODE}isEmpty(){return!1}};function wn(n,e=null){if(null===n)return It.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,O.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new vl(n,wn(e));if(n instanceof Array){let t=It.EMPTY_NODE;return gr(n,(r,i)=>{if((0,O.r3)(n,r)&&"."!==r.substring(0,1)){const a=wn(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(wn(e))}{const t=[];let r=!1;if(gr(n,(u,h)=>{if("."!==u.substring(0,1)){const m=wn(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new kt(u,m)))}}),0===t.length)return It.EMPTY_NODE;const a=Hh(t,Vh,u=>u.name,Ed);if(r){const u=Hh(t,yn.getCompare());return new It(a,wn(e),new Dn({".priority":u},{".priority":yn}))}return new It(a,wn(e),Dn.Default)}}Object.defineProperties(kt,{MIN:{value:new kt(Cs,It.EMPTY_NODE)},MAX:{value:new kt(Ds,Xn)}}),p_.__EMPTY_NODE=It.EMPTY_NODE,vl.__childrenNodeConstructor=It,function uc(n){cu=n}(Xn),function m_(n){jh=n}(Xn),function Vp(n){Bp=n}(wn);class ti extends lu{constructor(e){super(),this.indexPath_=e,(0,O.hu)(!Lt(e)&&".priority"!==Ft(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Xr(e.name,t.name):a}makePost(e,t){const r=wn(e),i=It.EMPTY_NODE.updateChild(this.indexPath_,r);return new kt(t,i)}maxPost(){const e=It.EMPTY_NODE.updateChild(this.indexPath_,Xn);return new kt(Ds,e)}toString(){return gl(this.indexPath_,0).join("/")}}const dc=new class cc extends lu{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Xr(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return kt.MIN}maxPost(){return kt.MAX}makePost(e,t){const r=wn(e);return new kt(t,r)}toString(){return".value"}},du="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",$p=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=du.charAt(t%64),t=Math.floor(t/64);(0,O.hu)(0===t,"Cannot push at time == 0");let u=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=du.charAt(e[i]);return(0,O.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),qp=function(n){if(n===""+hi)return"-";const e=Uo(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Ds;const a=du.charAt(du.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},Ms=function(n){if(n===""+Ai)return Cs;const e=Uo(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+hi:(delete t[t.length-1],t.join("")):(t[t.length-1]=du.charAt(du.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function Gh(n){return{type:"value",snapshotNode:n}}function fu(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function wl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function hc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Jn{constructor(e){this.index_=e}updateChild(e,t,r,i,a,u){(0,O.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(wl(t,h)):(0,O.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(fu(t,r)):u.trackChildChange(hc(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(yn,(i,a)=>{t.hasChild(i)||r.trackChildChange(wl(i,a))}),t.isLeafNode()||t.forEachChild(yn,(i,a)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(a)||r.trackChildChange(hc(i,a,u))}else r.trackChildChange(fu(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?It.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Il{constructor(e){this.indexedFilter_=new Jn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Il.getStartPost_(e),this.endPost_=Il.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,u){return this.matches(new kt(t,r))||(r=It.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=It.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(It.EMPTY_NODE);const a=this;return t.forEachChild(yn,(u,h)=>{a.matches(new kt(u,h))||(i=i.updateImmediateChild(u,It.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Wh{constructor(e){this.rangedFilter_=new Il(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,u){return this.rangedFilter_.matches(new kt(t,r))||(r=It.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,u):this.fullLimitUpdateChild_(e,t,r,a,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=It.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=It.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;a.hasNext()&&u<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let a,u,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(It.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(k,B)=>S(B,k)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let E=0,C=!1;for(;m.hasNext();){const S=m.getNext();!C&&h(a,S)<=0&&(C=!0),C&&E<this.limit_&&h(S,u)<=0?E++:i=i.updateImmediateChild(S.name,It.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let u;if(this.reverse_){const S=this.index_.getCompare();u=(k,B)=>S(B,k)}else u=this.index_.getCompare();const h=e;(0,O.hu)(h.numChildren()===this.limit_,"");const m=new kt(t,r),E=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),C=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let k=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=k&&(k.name===t||h.hasChild(k.name));)k=i.getChildAfterChild(this.index_,k,this.reverse_);const B=null==k?1:u(k,m);if(C&&!r.isEmpty()&&B>=0)return null!=a&&a.trackChildChange(hc(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(wl(t,S));const ne=h.updateImmediateChild(t,It.EMPTY_NODE);return null!=k&&this.rangedFilter_.matches(k)?(null!=a&&a.trackChildChange(fu(k.name,k.node)),ne.updateImmediateChild(k.name,k.node)):ne}}return r.isEmpty()?e:C&&u(E,m)>=0?(null!=a&&(a.trackChildChange(wl(E.name,E.node)),a.trackChildChange(fu(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(E.name,It.EMPTY_NODE)):e}}class Td{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=yn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,O.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cs}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,O.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ds}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,O.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===yn}copy(){const e=new Td;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Cd(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function pc(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function gc(n,e){const t=n.copy();return t.index_=e,t}function Wp(n){const e={};if(n.isDefault())return e;let t;return n.index_===yn?t="$priority":n.index_===dc?t="$value":n.index_===fo?t="$key":((0,O.hu)(n.index_ instanceof ti,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,O.Pz)(t),n.startSet_&&(e.startAt=(0,O.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,O.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,O.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,O.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function zp(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==yn&&(e.i=n.index_.toString()),e}class _ extends md{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Lo("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,O.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const u=_.getListenId_(e,r),h={};this.listens_[u]=h;const m=Wp(e._queryParams);this.restRequest_(a+".json",m,(E,C)=>{let S=C;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(a,S,!1,r),(0,O.DV)(this.listens_,u)===h){let k;k=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(k,null)}})}unlisten(e,t){const r=_.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Wp(e._queryParams),r=e._path.toString(),i=new O.BH;return this.restRequest_(r+".json",t,(a,u)=>{let h=u;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,O.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,O.cI)(h.responseText)}catch(E){Qr("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Qr("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class f{constructor(){this.rootNode_=It.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function g(){return{value:null,children:new Map}}function w(n,e,t){if(Lt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ft(e);n.children.has(r)||n.children.set(r,g()),w(n.children.get(r),e=pn(e),t)}}function R(n,e){if(Lt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(yn,(r,i)=>{w(n,new tn(r),i)}),R(n,e)}}if(n.children.size>0){const t=Ft(e);return e=pn(e),n.children.has(t)&&R(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function P(n,e,t){null!==n.value?t(e,n.value):function K(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{P(i,new tn(e.toString()+"/"+r),t)})}class he{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&gr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class at{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new he(e);const r=1e4+2e4*Math.random();Ta(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;gr(e,(i,a)=>{a>0&&(0,O.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),Ta(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var $t=(()=>{return(n=$t||($t={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",$t;var n})();function pu(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class Ra{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=$t.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Lt(this.path)){if(null!=this.affectedTree.value)return(0,O.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new tn(e));return new Ra(zt(),t,this.revert)}}return(0,O.hu)(Ft(this.path)===e,"operationForChild called for unrelated child."),new Ra(pn(this.path),this.affectedTree,this.revert)}}class Tl{constructor(e,t){this.source=e,this.path=t,this.type=$t.LISTEN_COMPLETE}operationForChild(e){return Lt(this.path)?new Tl(this.source,zt()):new Tl(this.source,pn(this.path))}}class Cl{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=$t.OVERWRITE}operationForChild(e){return Lt(this.path)?new Cl(this.source,zt(),this.snap.getImmediateChild(e)):new Cl(this.source,pn(this.path),this.snap)}}class Ri{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=$t.MERGE}operationForChild(e){if(Lt(this.path)){const t=this.children.subtree(new tn(e));return t.isEmpty()?null:t.value?new Cl(this.source,zt(),t.value):new Ri(this.source,zt(),t)}return(0,O.hu)(Ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ri(this.source,pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Rs{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Lt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ft(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Kh{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function xa(n,e,t,r,i,a){const u=r.filter(h=>h.type===t);u.sort((h,m)=>function Yh(n,e,t){if(null==e.childName||null==t.childName)throw(0,O.g5)("Should only compare child_ events.");const r=new kt(e.childName,e.snapshotNode),i=new kt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),u.forEach(h=>{const m=function E_(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(E=>{E.respondsTo(h.type)&&e.push(E.createEvent(m,n.query_))})})}function Dd(n,e){return{eventCache:n,serverCache:e}}function Qh(n,e,t,r){return Dd(new Rs(e,t,r),n.serverCache)}function BE(n,e,t,r){return Dd(n.eventCache,new Rs(e,t,r))}function Kp(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function gu(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Xh;class vn{constructor(e,t=(()=>(Xh||(Xh=new kr(Sp)),Xh))()){this.value=e,this.children=t}static fromObject(e){let t=new vn(null);return gr(e,(r,i)=>{t=t.set(new tn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:zt(),value:this.value};if(Lt(e))return null;{const r=Ft(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(pn(e),t);return null!=a?{path:_n(new tn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Lt(e))return this;{const t=Ft(e),r=this.children.get(t);return null!==r?r.subtree(pn(e)):new vn(null)}}set(e,t){if(Lt(e))return new vn(t,this.children);{const r=Ft(e),a=(this.children.get(r)||new vn(null)).set(pn(e),t),u=this.children.insert(r,a);return new vn(this.value,u)}}remove(e){if(Lt(e))return this.children.isEmpty()?new vn(null):new vn(null,this.children);{const t=Ft(e),r=this.children.get(t);if(r){const i=r.remove(pn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new vn(null):new vn(this.value,a)}return this}}get(e){if(Lt(e))return this.value;{const t=Ft(e),r=this.children.get(t);return r?r.get(pn(e)):null}}setTree(e,t){if(Lt(e))return t;{const r=Ft(e),a=(this.children.get(r)||new vn(null)).setTree(pn(e),t);let u;return u=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new vn(this.value,u)}}fold(e){return this.fold_(zt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(_n(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,zt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Lt(e))return null;{const a=Ft(e),u=this.children.get(a);return u?u.findOnPath_(pn(e),_n(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,zt(),t)}foreachOnPath_(e,t,r){if(Lt(e))return this;{this.value&&r(t,this.value);const i=Ft(e),a=this.children.get(i);return a?a.foreachOnPath_(pn(e),_n(t,i),r):new vn(null)}}foreach(e){this.foreach_(zt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(_n(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Go{constructor(e){this.writeTree_=e}static empty(){return new Go(new vn(null))}}function Jh(n,e,t){if(Lt(e))return new Go(new vn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const u=Nr(i,e);return a=a.updateChild(u,t),new Go(n.writeTree_.set(i,a))}{const i=new vn(t),a=n.writeTree_.setTree(e,i);return new Go(a)}}}function Zp(n,e,t){let r=n;return gr(t,(i,a)=>{r=Jh(r,_n(e,i),a)}),r}function w_(n,e){if(Lt(e))return Go.empty();{const t=n.writeTree_.setTree(e,new vn(null));return new Go(t)}}function Dl(n,e){return null!=mu(n,e)}function mu(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Nr(t.path,e)):null}function I_(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(yn,(r,i)=>{e.push(new kt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new kt(r,i.value))}),e}function _u(n,e){if(Lt(e))return n;{const t=mu(n,e);return new Go(null!=t?new vn(t):n.writeTree_.subtree(e))}}function Sd(n){return n.writeTree_.isEmpty()}function Ad(n,e){return b_(zt(),n.writeTree_,e)}function b_(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,O.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=b_(_n(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(_n(n,".priority"),r)),t}}function ef(n,e){return zE(e,n)}function Qp(n,e){if(n.snap)return Qi(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Qi(_n(n.path,t),e))return!0;return!1}function C_(n){return n.visible}function D_(n,e,t){let r=Go.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const u=a.path;let h;if(a.snap)Qi(t,u)?(h=Nr(t,u),r=Jh(r,h,a.snap)):Qi(u,t)&&(h=Nr(u,t),r=Jh(r,zt(),a.snap.getChild(h)));else{if(!a.children)throw(0,O.g5)("WriteRecord should have .snap or .children");if(Qi(t,u))h=Nr(t,u),r=Zp(r,h,a.children);else if(Qi(u,t))if(h=Nr(u,t),Lt(h))r=Zp(r,zt(),a.children);else{const m=(0,O.DV)(a.children,Ft(h));if(m){const E=m.getChild(pn(h));r=Jh(r,zt(),E)}}}}}return r}function Xp(n,e,t,r,i){if(r||i){const a=_u(n.visibleWrites,e);return!i&&Sd(a)?t:i||null!=t||Dl(a,zt())?Ad(D_(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(Qi(E.path,e)||Qi(e,E.path))},e),t||It.EMPTY_NODE):null}{const a=mu(n.visibleWrites,e);if(null!=a)return a;{const u=_u(n.visibleWrites,e);return Sd(u)?t:null!=t||Dl(u,zt())?Ad(u,t||It.EMPTY_NODE):null}}}function Md(n,e,t,r){return Xp(n.writeTree,n.treePath,e,t,r)}function Jp(n,e){return function tf(n,e,t){let r=It.EMPTY_NODE;const i=mu(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(yn,(a,u)=>{r=r.updateImmediateChild(a,u)}),r;if(t){const a=_u(n.visibleWrites,e);return t.forEachChild(yn,(u,h)=>{const m=Ad(_u(a,new tn(u)),h);r=r.updateImmediateChild(u,m)}),I_(a).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return I_(_u(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function iT(n,e,t,r){return function tT(n,e,t,r,i){(0,O.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=_n(e,t);if(Dl(n.visibleWrites,a))return null;{const u=_u(n.visibleWrites,a);return Sd(u)?i.getChild(t):Ad(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function nf(n,e){return function nT(n,e){return mu(n.visibleWrites,e)}(n.writeTree,_n(n.treePath,e))}function eg(n,e,t){return function qE(n,e,t,r){const i=_n(e,t),a=mu(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Ad(_u(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function WE(n,e){return zE(_n(n.treePath,e),n.writeTree)}function zE(n,e){return{treePath:n,writeTree:e}}class Wo{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,O.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,O.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,hc(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,wl(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,fu(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,O.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,hc(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const S_=new class oT{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class A_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Rs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eg(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:gu(this.viewCache_),a=function sT(n,e,t,r,i,a){return function rT(n,e,t,r,i,a,u){let h;const m=_u(n.visibleWrites,e),E=mu(m,zt());if(null!=E)h=E;else{if(null==t)return[];h=Ad(m,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const C=[],S=u.getCompare(),k=a?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let B=k.getNext();for(;B&&C.length<i;)0!==S(B,r)&&C.push(B),B=k.getNext();return C}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function ZE(n,e,t,r,i,a){const u=e.eventCache;if(null!=nf(r,t))return e;{let h,m;if(Lt(t))if((0,O.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=gu(e),S=Jp(r,E instanceof It?E:It.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const E=Md(r,gu(e));h=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Ft(t);if(".priority"===E){(0,O.hu)(1===ho(t),"Can't have a priority with additional path components");const C=u.getNode();m=e.serverCache.getNode();const S=iT(r,t,C,m);h=null!=S?n.filter.updatePriority(C,S):u.getNode()}else{const C=pn(t);let S;if(u.isCompleteForChild(E)){m=e.serverCache.getNode();const k=iT(r,t,u.getNode(),m);S=null!=k?u.getNode().getImmediateChild(E).updateChild(C,k):u.getNode().getImmediateChild(E)}else S=eg(r,E,e.serverCache);h=null!=S?n.filter.updateChild(u.getNode(),E,S,C,i,a):u.getNode()}}return Qh(e,h,u.isFullyInitialized()||Lt(t),n.filter.filtersNodes())}}function tg(n,e,t,r,i,a,u,h){const m=e.serverCache;let E;const C=u?n.filter:n.filter.getIndexedFilter();if(Lt(t))E=C.updateFullNode(m.getNode(),r,null);else if(C.filtersNodes()&&!m.isFiltered()){const B=m.getNode().updateChild(t,r);E=C.updateFullNode(m.getNode(),B,null)}else{const B=Ft(t);if(!m.isCompleteForPath(t)&&ho(t)>1)return e;const j=pn(t),we=m.getNode().getImmediateChild(B).updateChild(j,r);E=".priority"===B?C.updatePriority(m.getNode(),we):C.updateChild(m.getNode(),B,we,j,S_,null)}const S=BE(e,E,m.isFullyInitialized()||Lt(t),C.filtersNodes());return ZE(n,S,t,i,new A_(i,S,a),h)}function M_(n,e,t,r,i,a,u){const h=e.eventCache;let m,E;const C=new A_(i,e,a);if(Lt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,u),m=Qh(e,E,!0,n.filter.filtersNodes());else{const S=Ft(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),m=Qh(e,E,h.isFullyInitialized(),h.isFiltered());else{const k=pn(t),B=h.getNode().getImmediateChild(S);let j;if(Lt(k))j=r;else{const ne=C.getCompleteChild(S);j=null!=ne?".priority"===Mi(k)&&ne.getChild(Op(k)).isEmpty()?ne:ne.updateChild(k,r):It.EMPTY_NODE}m=B.equals(j)?e:Qh(e,n.filter.updateChild(h.getNode(),S,j,k,C,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function Dt(n,e){return n.eventCache.isCompleteForChild(e)}function R_(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function ng(n,e,t,r,i,a,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,m=e;E=Lt(t)?r:new vn(null).setTree(t,r);const C=e.serverCache.getNode();return E.children.inorderTraversal((S,k)=>{if(C.hasChild(S)){const j=R_(0,e.serverCache.getNode().getImmediateChild(S),k);m=tg(n,m,new tn(S),j,i,a,u,h)}}),E.children.inorderTraversal((S,k)=>{const B=!e.serverCache.isCompleteForChild(S)&&void 0===k.value;if(!C.hasChild(S)&&!B){const ne=R_(0,e.serverCache.getNode().getImmediateChild(S),k);m=tg(n,m,new tn(S),ne,i,a,u,h)}}),m}class cT{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Jn(r.getIndex()),a=function qo(n){return n.loadsAllData()?new Jn(n.getIndex()):n.hasLimit()?new Wh(n):new Il(n)}(r);this.processor_=function aT(n){return{filter:n}}(a);const u=t.serverCache,h=t.eventCache,m=i.updateFullNode(It.EMPTY_NODE,u.getNode(),null),E=a.updateFullNode(It.EMPTY_NODE,h.getNode(),null),C=new Rs(m,u.isFullyInitialized(),i.filtersNodes()),S=new Rs(E,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=Dd(S,C),this.eventGenerator_=new Kh(this.query_)}get query(){return this.query_}}function N_(n,e){const t=gu(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Lt(e)&&!t.getImmediateChild(Ft(e)).isEmpty())?t.getChild(e):null}function k_(n){return 0===n.eventRegistrations_.length}function dT(n,e,t){const r=[];if(t){(0,O.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const u=a.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const u=n.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function O_(n,e,t,r){e.type===$t.MERGE&&null!==e.source.queryId&&((0,O.hu)(gu(n.viewCache_),"We should always have a full cache before handling merges"),(0,O.hu)(Kp(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function uT(n,e,t,r,i){const a=new Wo;let u,h;if(t.type===$t.OVERWRITE){const E=t;E.source.fromUser?u=M_(n,e,E.path,E.snap,r,i,a):((0,O.hu)(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered()&&!Lt(E.path),u=tg(n,e,E.path,E.snap,r,i,h,a))}else if(t.type===$t.MERGE){const E=t;E.source.fromUser?u=function YE(n,e,t,r,i,a,u){let h=e;return r.foreach((m,E)=>{const C=_n(t,m);Dt(e,Ft(C))&&(h=M_(n,h,C,E,i,a,u))}),r.foreach((m,E)=>{const C=_n(t,m);Dt(e,Ft(C))||(h=M_(n,h,C,E,i,a,u))}),h}(n,e,E.path,E.children,r,i,a):((0,O.hu)(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered(),u=ng(n,e,E.path,E.children,r,i,h,a))}else if(t.type===$t.ACK_USER_WRITE){const E=t;u=E.revert?function QE(n,e,t,r,i,a){let u;if(null!=nf(r,t))return e;{const h=new A_(r,e,i),m=e.eventCache.getNode();let E;if(Lt(t)||".priority"===Ft(t)){let C;if(e.serverCache.isFullyInitialized())C=Md(r,gu(e));else{const S=e.serverCache.getNode();(0,O.hu)(S instanceof It,"serverChildren would be complete if leaf node"),C=Jp(r,S)}C=C,E=n.filter.updateFullNode(m,C,a)}else{const C=Ft(t);let S=eg(r,C,e.serverCache);null==S&&e.serverCache.isCompleteForChild(C)&&(S=m.getImmediateChild(C)),E=null!=S?n.filter.updateChild(m,C,S,pn(t),h,a):e.eventCache.getNode().hasChild(C)?n.filter.updateChild(m,C,It.EMPTY_NODE,pn(t),h,a):m,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=Md(r,gu(e)),u.isLeafNode()&&(E=n.filter.updateFullNode(E,u,a)))}return u=e.serverCache.isFullyInitialized()||null!=nf(r,zt()),Qh(e,E,u,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function rg(n,e,t,r,i,a,u){if(null!=nf(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(Lt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return tg(n,e,t,m.getNode().getChild(t),i,a,h,u);if(Lt(t)){let E=new vn(null);return m.getNode().forEachChild(fo,(C,S)=>{E=E.set(new tn(C),S)}),ng(n,e,t,E,i,a,h,u)}return e}{let E=new vn(null);return r.foreach((C,S)=>{const k=_n(t,C);m.isCompleteForPath(k)&&(E=E.set(C,m.getNode().getChild(k)))}),ng(n,e,t,E,i,a,h,u)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==$t.LISTEN_COMPLETE)throw(0,O.g5)("Unknown operation type: "+t.type);u=function zo(n,e,t,r,i){const a=e.serverCache;return ZE(n,BE(e,a.getNode(),a.isFullyInitialized()||Lt(t),a.isFiltered()),t,r,S_,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function KE(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=Kp(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(Gh(Kp(e)))}}(e,u,m),{viewCache:u,changes:m}}(n.processor_,i,e,t,r);return function lT(n,e){(0,O.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,O.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,O.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,rf(n,a.changes,a.viewCache.eventCache.getNode(),null)}function rf(n,e,t,r){return function Zh(n,e,t,r){const i=[],a=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&a.push(function Gp(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),xa(n,i,"child_removed",e,r,t),xa(n,i,"child_added",e,r,t),xa(n,i,"child_moved",a,r,t),xa(n,i,"child_changed",e,r,t),xa(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let mc,sg;class ig{constructor(){this.views=new Map}}function U_(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,O.hu)(null!=a,"SyncTree gave us an op for an invalid query."),O_(a,e,t,r)}{let a=[];for(const u of n.views.values())a=a.concat(O_(u,e,t,r));return a}}function XE(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=Md(t,i?r:null),m=!1;h?m=!0:r instanceof It?(h=Jp(t,r),m=!1):(h=It.EMPTY_NODE,m=!1);const E=Dd(new Rs(h,m,!1),new Rs(r,i,!1));return new cT(e,E)}return u}function B_(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function _c(n,e){let t=null;for(const r of n.views.values())t=t||N_(r,e);return t}function JE(n,e){return e._queryParams.loadsAllData()?sf(n):n.views.get(e._queryIdentifier)}function pT(n,e){return null!=JE(n,e)}function Al(n){return null!=sf(n)}function sf(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let fx=1;class gT{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vn(null),this.pendingWriteTree_=function GE(){return{visibleWrites:Go.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function e0(n,e,t,r,i){return function jE(n,e,t,r,i){(0,O.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Jh(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?yu(n,new Cl({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function yc(n,e,t=!1){const r=function HE(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Yp(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,O.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&Qp(h,r.path)?i=!1:Qi(r.path,h.path)&&(a=!0)),u--}return!!i&&(a?(function $E(n){n.visibleWrites=D_(n.allWrites,C_,zt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=w_(n.visibleWrites,r.path):gr(r.children,m=>{n.visibleWrites=w_(n.visibleWrites,_n(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new vn(null);return null!=r.snap?a=a.set(zt(),!0):gr(r.children,u=>{a=a.set(new tn(u),!0)}),yu(n,new Ra(r.path,a,t))}return[]}function og(n,e,t){return yu(n,new Cl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Na(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let u=[];if(a&&("default"===e._queryIdentifier||pT(a,e))){const h=function fT(n,e,t,r){const i=e._queryIdentifier,a=[];let u=[];const h=Al(n);if("default"===i)for(const[m,E]of n.views.entries())u=u.concat(dT(E,t,r)),k_(E)&&(n.views.delete(m),E.query._queryParams.loadsAllData()||a.push(E.query));else{const m=n.views.get(i);m&&(u=u.concat(dT(m,t,r)),k_(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Al(n)&&a.push(new(function L_(){return(0,O.hu)(mc,"Reference.ts has not been loaded"),mc}())(e._repo,e._path)),{removed:a,events:u}}(a,e,t,r);(function dx(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;u=h.events;const E=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),C=n.syncPointTree_.findOnPath(i,(S,k)=>Al(k));if(E&&!C){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const k=function _T(n){return n.fold((e,t,r)=>{if(t&&Al(t))return[sf(t)];{let i=[];return t&&(i=B_(t)),gr(r,(a,u)=>{i=i.concat(u)}),i}})}(S);for(let B=0;B<k.length;++B){const j=k[B],ne=j.query,we=$_(n,j);n.listenProvider_.startListening(Rl(ne),ag(n,ne),we.hashFn,we.onComplete)}}}if(!C&&m.length>0&&!r)if(E){const S=null;n.listenProvider_.stopListening(Rl(e),S)}else m.forEach(S=>{const k=n.queryToTagMap.get(xd(S));n.listenProvider_.stopListening(Rl(S),k)});!function Nd(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=xd(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return u}function H_(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,k)=>{const B=Nr(S,r);i=i||_c(k,B),a=a||Al(k)});let h,u=n.syncPointTree_.get(r);u?(a=a||Al(u),i=i||_c(u,zt())):(u=new ig,n.syncPointTree_=n.syncPointTree_.set(r,u)),null!=i?h=!0:(h=!1,i=It.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((k,B)=>{const j=_c(B,zt());j&&(i=i.updateImmediateChild(k,j))}));const m=pT(u,e);if(!m&&!e._queryParams.loadsAllData()){const S=xd(e);(0,O.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const k=function W_(){return fx++}();n.queryToTagMap.set(S,k),n.tagToQueryMap.set(k,S)}let C=function hT(n,e,t,r,i,a){const u=XE(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function P_(n,e){n.eventRegistrations_.push(e)}(u,t),function cx(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(yn,(a,u)=>{r.push(fu(a,u))}),t.isFullyInitialized()&&r.push(Gh(t.getNode())),rf(n,r,t.getNode(),e)}(u,t)}(u,e,t,ef(n.pendingWriteTree_,r),i,h);if(!m&&!a){const S=JE(u,e);C=C.concat(function kd(n,e,t){const r=e._path,i=ag(n,e),a=$_(n,t),u=n.listenProvider_.startListening(Rl(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,O.hu)(!Al(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((E,C,S)=>{if(!Lt(E)&&C&&Al(C))return[sf(C).query];{let k=[];return C&&(k=k.concat(B_(C).map(B=>B.query))),gr(S,(B,j)=>{k=k.concat(j)}),k}});for(let E=0;E<m.length;++E){const C=m[E];n.listenProvider_.stopListening(Rl(C),ag(n,C))}}return u}(n,e,S))}return C}function Rd(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(u,h)=>{const E=_c(h,Nr(u,e));if(E)return E});return Xp(i,e,a,t,!0)}function yu(n,e){return n0(e,n.syncPointTree_,null,ef(n.pendingWriteTree_,zt()))}function n0(n,e,t,r){if(Lt(n.path))return Ml(n,e,t,r);{const i=e.get(zt());null==t&&null!=i&&(t=_c(i,zt()));let a=[];const u=Ft(n.path),h=n.operationForChild(u),m=e.children.get(u);if(m&&h){const E=t?t.getImmediateChild(u):null,C=WE(r,u);a=a.concat(n0(h,m,E,C))}return i&&(a=a.concat(U_(i,n,r,t))),a}}function Ml(n,e,t,r){const i=e.get(zt());null==t&&null!=i&&(t=_c(i,zt()));let a=[];return e.children.inorderTraversal((u,h)=>{const m=t?t.getImmediateChild(u):null,E=WE(r,u),C=n.operationForChild(u);C&&(a=a.concat(Ml(C,h,m,E)))}),i&&(a=a.concat(U_(i,n,r,t))),a}function $_(n,e){const t=e.query,r=ag(n,t);return{hashFn:()=>(function x_(n){return n.viewCache_.serverCache.getNode()}(e)||It.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function _x(n,e,t){const r=q_(n,t);if(r){const i=lg(r),a=i.path,u=i.queryId,h=Nr(a,e);return G_(n,a,new Tl(pu(u),h))}return[]}(n,t._path,r):function mx(n,e){return yu(n,new Tl({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function dd(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Na(n,t,null,a)}}}}function ag(n,e){const t=xd(e);return n.queryToTagMap.get(t)}function xd(n){return n._path.toString()+"$"+n._queryIdentifier}function q_(n,e){return n.tagToQueryMap.get(e)}function lg(n){const e=n.indexOf("$");return(0,O.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new tn(n.substr(0,e))}}function G_(n,e,t){const r=n.syncPointTree_.get(e);return(0,O.hu)(r,"Missing sync point for query tag that we're tracking"),U_(r,t,ef(n.pendingWriteTree_,e),null)}function Rl(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function hx(){return(0,O.hu)(sg,"Reference.ts has not been loaded"),sg}())(n._repo,n._path):n}class vc{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new vc(t)}node(){return this.node_}}class vu{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=_n(this.path_,e);return new vu(this.syncTree_,t)}node(){return Rd(this.syncTree_,this.path_)}}const z_=function(n,e,t){return n&&"object"==typeof n?((0,O.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?r0(n[".sv"],e,t):"object"==typeof n[".sv"]?K_(n[".sv"],e):void(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},r0=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,O.hu)(!1,"Unexpected server value: "+n)},K_=function(n,e,t){n.hasOwnProperty("increment")||(0,O.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,O.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,O.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},ug=function(n,e,t,r){return Pd(e,new vu(t,n),r)},cg=function(n,e,t){return Pd(n,new vc(e),t)};function Pd(n,e,t){const r=n.getPriority().val(),i=z_(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const u=n,h=z_(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new vl(h,wn(i)):n}{const u=n;return a=u,i!==u.getPriority().val()&&(a=a.updatePriority(new vl(i))),u.forEachChild(yn,(h,m)=>{const E=Pd(m,e.getImmediateChild(h),t);E!==m&&(a=a.updateImmediateChild(h,E))}),a}}class Z_{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function af(n,e){let t=e instanceof tn?e:new tn(e),r=n,i=Ft(t);for(;null!==i;){const a=(0,O.DV)(r.node.children,i)||{children:{},childCount:0};r=new Z_(i,r,a),t=pn(t),i=Ft(t)}return r}function Od(n){return n.node.value}function dg(n,e){n.node.value=e,Q_(n)}function Y_(n){return n.node.childCount>0}function lf(n,e){gr(n.node.children,(t,r)=>{e(new Z_(t,n,r))})}function s0(n,e,t,r){t&&!r&&e(n),lf(n,i=>{s0(i,e,!0,r)}),t&&r&&e(n)}function ni(n){return new tn(null===n.parent?n.name:ni(n.parent)+"/"+n.name)}function Q_(n){null!==n.parent&&function wT(n,e,t){const r=function vT(n){return void 0===Od(n)&&!Y_(n)}(t),i=(0,O.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,Q_(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,Q_(n))}(n.parent,n.name,n)}const yx=/[\[\].#$\/\u0000-\u001F\u007F]/,vx=/[\[\].#$\u0000-\u001F\u007F]/,hg=10485760,X_=function(n){return"string"==typeof n&&0!==n.length&&!yx.test(n)},o0=function(n){return"string"==typeof n&&0!==n.length&&!vx.test(n)},Fd=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!eu(n)||n&&"object"==typeof n&&(0,O.r3)(n,".sv")},ka=function(n,e,t,r){r&&void 0===e||uf((0,O.gK)(n,"value"),e,t)},uf=function(n,e,t){const r=t instanceof tn?new h_(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+_l(r));if("function"==typeof e)throw new Error(n+"contains a function "+_l(r)+" with contents = "+e.toString());if(eu(e))throw new Error(n+"contains "+e.toString()+" "+_l(r));if("string"==typeof e&&e.length>hg/3&&(0,O.ug)(e)>hg)throw new Error(n+"contains a string greater than "+hg+" utf8 bytes "+_l(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(gr(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(a=!0,!X_(u)))throw new Error(n+" contains an invalid key ("+u+") "+_l(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function LE(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,O.ug)(e),f_(n)})(r,u),uf(n,h,r),function ml(n){const e=n.parts_.pop();n.byteLength_-=(0,O.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+_l(r)+" in addition to actual children.")}},ey=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,O.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];gr(e,(u,h)=>{const m=new tn(u);if(uf(i,h,_n(t,m)),".priority"===Mi(m)&&!Fd(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=gl(r);for(let u=0;u<a.length;u++)if((".priority"!==a[u]||u!==a.length-1)&&!X_(a[u]))throw new Error(n+"contains an invalid key ("+a[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Fp);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Qi(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},ty=function(n,e,t){if(!t||void 0!==e){if(eu(e))throw new Error((0,O.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Fd(e))throw new Error((0,O.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ld=function(n,e,t,r){if(!(r&&void 0===t||X_(t)))throw new Error((0,O.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},cf=function(n,e,t,r){if(!(r&&void 0===t||o0(t)))throw new Error((0,O.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},xs=function(n,e){if(".info"===Ft(e))throw new Error(n+" failed = Can't modify data under /.info/")},ny=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!X_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),o0(n)}(t))throw new Error((0,O.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class TT{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ns(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!yd(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function df(n,e,t){Ns(n,t),a0(n,r=>yd(r,e))}function go(n,e,t){Ns(n,t),a0(n,r=>Qi(r,e)||Qi(e,r))}function a0(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(Ex(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function Ex(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();zi&&Vn("event: "+t.toString()),ao(r)}}}const ry="repo_interrupt";class DT{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new TT,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=g(),this.transactionQueueTree_=new Z_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function fg(n){const t=n.infoData_.getNode(new tn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function hf(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:fg(n)})}function l0(n,e,t,r,i){n.dataUpdateCount++;const a=new tn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const m=(0,O.UI)(t,E=>wn(E));u=function mT(n,e,t,r){const i=q_(n,r);if(i){const a=lg(i),u=a.path,h=a.queryId,m=Nr(u,e),E=vn.fromObject(t);return G_(n,u,new Ri(pu(h),m,E))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=wn(t);u=function j_(n,e,t,r){const i=q_(n,r);if(null!=i){const a=lg(i),u=a.path,h=a.queryId,m=Nr(u,e);return G_(n,u,new Cl(pu(h),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,O.UI)(t,E=>wn(E));u=function gx(n,e,t){const r=vn.fromObject(t);return yu(n,new Ri({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=wn(t);u=og(n.serverSyncTree_,a,m)}let h=a;u.length>0&&(h=Ec(n,a)),go(n.eventQueue_,h,u)}function ff(n,e){sy(n,"connected",e),!1===e&&function MT(n){Ji(n,"onDisconnectEvents");const e=hf(n),t=g();P(n.onDisconnect_,zt(),(i,a)=>{const u=ug(i,a,n.serverSyncTree_,e);w(t,i,u)});let r=[];P(t,zt(),(i,a)=>{r=r.concat(og(n.serverSyncTree_,i,a));const u=_g(n,i);Ec(n,u)}),n.onDisconnect_=g(),go(n.eventQueue_,zt(),r)}(n)}function sy(n,e,t){const r=new tn("/.info/"+e),i=wn(t);n.infoData_.updateSnapshot(r,i);const a=og(n.infoSyncTree_,r,i);go(n.eventQueue_,r,a)}function Ud(n){return n.nextWriteId_++}function pg(n,e,t,r,i){Ji(n,"set",{path:e.toString(),value:t,priority:r});const a=hf(n),u=wn(t,r),h=Rd(n.serverSyncTree_,e),m=cg(u,h,a),E=Ud(n),C=e0(n.serverSyncTree_,e,m,E,!0);Ns(n.eventQueue_,C),n.server_.put(e.toString(),u.val(!0),(k,B)=>{const j="ok"===k;j||Qr("set at "+e+" failed: "+k);const ne=yc(n.serverSyncTree_,E,!j);go(n.eventQueue_,e,ne),Ko(0,i,k,B)});const S=_g(n,e);Ec(n,S),go(n.eventQueue_,S,[])}function ay(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&R(n.onDisconnect_,e),Ko(0,t,r,i)})}function RT(n,e,t,r){const i=wn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,u)=>{"ok"===a&&w(n.onDisconnect_,e,i),Ko(0,r,a,u)})}function gg(n,e,t){let r;r=".info"===Ft(e._path)?Na(n.infoSyncTree_,e,t):Na(n.serverSyncTree_,e,t),df(n.eventQueue_,e._path,r)}function ly(n){n.persistentConnection_&&n.persistentConnection_.interrupt(ry)}function Ji(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Vn(t,...e)}function Ko(n,e,t,r){e&&ao(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const u=new Error(a);u.code=i,e(u)}})}function uy(n,e,t){return Rd(n.serverSyncTree_,e,t)||It.EMPTY_NODE}function cy(n,e=n.transactionQueueTree_){if(e||pf(n,e),Od(e)){const t=h0(n,e);(0,O.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function dy(n,e,t){const r=t.map(E=>E.currentWriteId),i=uy(n,e,r);let a=i;const u=i.hash();for(let E=0;E<t.length;E++){const C=t[E];(0,O.hu)(0===C.status,"tryToSendTransactionQueue_: items in queue should all be run."),C.status=1,C.retryCount++;const S=Nr(e,C.path);a=a.updateChild(S,C.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,E=>{Ji(n,"transaction put response",{path:m.toString(),status:E});let C=[];if("ok"===E){const S=[];for(let k=0;k<t.length;k++)t[k].status=2,C=C.concat(yc(n.serverSyncTree_,t[k].currentWriteId)),t[k].onComplete&&S.push(()=>t[k].onComplete(null,!0,t[k].currentOutputSnapshotResolved)),t[k].unwatcher();pf(n,af(n.transactionQueueTree_,e)),cy(n,n.transactionQueueTree_),go(n.eventQueue_,e,C);for(let k=0;k<S.length;k++)ao(S[k])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Qr("transaction at "+m.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}Ec(n,e)}},u)}(n,ni(e),t)}else Y_(e)&&lf(e,t=>{cy(n,t)})}function Ec(n,e){const t=Bd(n,e),r=ni(t);return function hy(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],E=Nr(t,m.path);let S,C=!1;if((0,O.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)C=!0,S=m.abortReason,i=i.concat(yc(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)C=!0,S="maxretry",i=i.concat(yc(n.serverSyncTree_,m.currentWriteId,!0));else{const k=uy(n,m.path,u);m.currentInputSnapshot=k;const B=e[h].update(k.val());if(void 0!==B){uf("transaction failed: Data returned ",B,m.path);let j=wn(B);"object"==typeof B&&null!=B&&(0,O.r3)(B,".priority")||(j=j.updatePriority(k.getPriority()));const we=m.currentWriteId,Qe=hf(n),Je=cg(j,k,Qe);m.currentOutputSnapshotRaw=j,m.currentOutputSnapshotResolved=Je,m.currentWriteId=Ud(n),u.splice(u.indexOf(we),1),i=i.concat(e0(n.serverSyncTree_,m.path,Je,m.currentWriteId,m.applyLocally)),i=i.concat(yc(n.serverSyncTree_,we,!0))}else C=!0,S="nodata",i=i.concat(yc(n.serverSyncTree_,m.currentWriteId,!0))}go(n.eventQueue_,t,i),i=[],C&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}pf(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)ao(r[h]);cy(n,n.transactionQueueTree_)}(n,h0(n,t),r),r}function Bd(n,e){let t,r=n.transactionQueueTree_;for(t=Ft(e);null!==t&&void 0===Od(r);)r=af(r,t),t=Ft(e=pn(e));return r}function h0(n,e){const t=[];return mg(n,e,t),t.sort((r,i)=>r.order-i.order),t}function mg(n,e,t){const r=Od(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);lf(e,i=>{mg(n,i,t)})}function pf(n,e){const t=Od(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,dg(e,t.length>0?t:void 0)}lf(e,r=>{pf(n,r)})}function _g(n,e){const t=ni(Bd(n,e)),r=af(n.transactionQueueTree_,e);return function ET(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{yg(n,i)}),yg(n,r),s0(r,i=>{yg(n,i)}),t}function yg(n,e){const t=Od(e);if(t){const r=[];let i=[],a=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,O.hu)(a===u-1,"All SENT items should be at beginning of queue."),a=u,t[u].status=3,t[u].abortReason="set"):((0,O.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(yc(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===a?dg(e,void 0):t.length=a+1,go(n.eventQueue_,ni(e),i);for(let u=0;u<r.length;u++)ao(r[u])}}const py=function(n,e){const t=PT(n),r=t.namespace;return"firebase.com"===t.domain&&so(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&so("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Qr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new nc(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new tn(t.pathString)}},PT=function(n){let e="",t="",r="",i="",a="",u=!0,h="https",m=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(h=n.substring(0,E-1),n=n.substring(E+2));let C=n.indexOf("/");-1===C&&(C=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(C,S)),C<S&&(i=function kT(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(C,S)));const k=function fy(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Qr(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(u="https"===h||"wss"===h,m=parseInt(e.substring(E+1),10)):E=e.length;const B=e.slice(0,E);if("localhost"===B.toLowerCase())t="localhost";else if(B.split(".").length<=2)t=B;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in k&&(a=k.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:a}};class gy{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,O.Pz)(this.snapshot.exportVal())}}class wc{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class my{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,O.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class f0{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new O.BH;return ay(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){xs("OnDisconnect.remove",this._path);const e=new O.BH;return RT(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){xs("OnDisconnect.set",this._path),ka("OnDisconnect.set",e,this._path,!1);const t=new O.BH;return RT(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){xs("OnDisconnect.setWithPriority",this._path),ka("OnDisconnect.setWithPriority",e,this._path,!1),ty("OnDisconnect.setWithPriority",t,!1);const r=new O.BH;return function xT(n,e,t,r,i){const a=wn(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(u,h)=>{"ok"===u&&w(n.onDisconnect_,e,a),Ko(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){xs("OnDisconnect.update",this._path),ey("OnDisconnect.update",e,this._path,!1);const t=new O.BH;return function u0(n,e,t,r){if((0,O.xb)(t))return Vn("onDisconnect().update() called with empty data.  Don't do anything."),void Ko(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&gr(t,(u,h)=>{const m=wn(h);w(n.onDisconnect_,_n(e,u),m)}),Ko(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class es{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Lt(this._path)?null:Mi(this._path)}get ref(){return new mo(this._repo,this._path)}get _queryIdentifier(){const e=zp(this._queryParams),t=cl(e);return"{}"===t?"default":t}get _queryObject(){return zp(this._queryParams)}isEqual(e){if(!((e=(0,O.m9)(e))instanceof es))return!1;const t=this._repo===e._repo,r=yd(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function su(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function xl(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Eu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===fo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Cs)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Ds)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===yn){if(null!=e&&!Fd(e)||null!=t&&!Fd(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,O.hu)(n.getIndex()instanceof ti||n.getIndex()===dc,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function vg(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class mo extends es{constructor(e,t){super(e,t,new Td,!1)}get parent(){const e=Op(this._path);return null===e?null:new mo(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ic{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new tn(e),r=wu(this.ref,e);return new Ic(this._node.getChild(t),r,yn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ic(i,wu(this.ref,r),yn)))}hasChild(e){const t=new tn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function ks(n,e){return(n=(0,O.m9)(n))._checkNotDeleted("ref"),void 0!==e?wu(n._root,e):n._root}function Eg(n,e){(n=(0,O.m9)(n))._checkNotDeleted("refFromURL");const t=py(e,n._repo.repoInfo_.nodeAdmin);ny("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&so("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),ks(n,t.path.toString())}function wu(n,e){return null===Ft((n=(0,O.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),cf("child","path",t,!1)):cf("child","path",e,!1),new mo(n._repo,_n(n._path,e));var t}function _y(n,e){n=(0,O.m9)(n),xs("set",n._path),ka("set",e,n._path,!1);const t=new O.BH;return pg(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function UT(n,e){ey("update",e,n._path,!1);const t=new O.BH;return function AT(n,e,t,r){Ji(n,"update",{path:e.toString(),value:t});let i=!0;const a=hf(n),u={};if(gr(t,(h,m)=>{i=!1,u[h]=ug(_n(e,h),wn(m),n.serverSyncTree_,a)}),i)Vn("update() called with empty data.  Don't do anything."),Ko(0,r,"ok",void 0);else{const h=Ud(n),m=function px(n,e,t,r){!function T_(n,e,t,r){(0,O.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Zp(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=vn.fromObject(t);return yu(n,new Ri({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);Ns(n.eventQueue_,m),n.server_.merge(e.toString(),t,(E,C)=>{const S="ok"===E;S||Qr("update at "+e+" failed: "+E);const k=yc(n.serverSyncTree_,h,!S),B=k.length>0?Ec(n,e):e;go(n.eventQueue_,B,k),Ko(0,r,E,C)}),gr(t,E=>{const C=_g(n,_n(e,E));Ec(n,C)}),go(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function m0(n){return function oy(n,e){const t=function t0(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,C)=>{const S=Nr(E,t);r=r||_c(C,S)});let i=n.syncPointTree_.get(t);i?r=r||_c(i,zt()):(i=new ig,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,u=a?new Rs(r,!0,!1):null;return function Sl(n){return Kp(n.viewCache_)}(XE(i,e,ef(n.pendingWriteTree_,e._path),a?u.getNode():It.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=wn(r).withIndex(e._queryParams.getIndex()),a=og(n.serverSyncTree_,e._path,i);return df(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Ji(n,"get for query "+(0,O.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,O.m9)(n))._repo,n).then(e=>new Ic(e,new mo(n._repo,n._path),n._queryParams.getIndex()))}class yy{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new gy("value",this,new Ic(e.snapshotNode,new mo(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wc(this,e,t):null}matches(e){return e instanceof yy&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gf{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new wc(this,e,t):null}createEvent(e,t){(0,O.hu)(null!=e.childName,"Child events should have a childName.");const r=wu(new mo(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new gy(e.type,this,new Ic(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof gf&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function mf(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,E=(C,S)=>{gg(n._repo,n,h),m(C,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const u=new my(t,a||void 0),h="value"===e?new yy(u):new gf(e,u);return function c0(n,e,t){let r;r=".info"===Ft(e._path)?H_(n.infoSyncTree_,e,t):H_(n.serverSyncTree_,e,t),df(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>gg(n._repo,n,h)}function vy(n,e,t,r){return mf(n,"value",e,t,r)}function BT(n,e,t,r){return mf(n,"child_added",e,t,r)}function VT(n,e,t,r){return mf(n,"child_changed",e,t,r)}function wg(n,e,t,r){return mf(n,"child_moved",e,t,r)}function _0(n,e,t,r){return mf(n,"child_removed",e,t,r)}function Ey(n,e,t){let r=null;const i=t?new my(t):null;"value"===e?r=new yy(i):e&&(r=new gf(e,i)),gg(n._repo,n,r)}class _o{}class jT extends _o{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ka("endAt",this._value,e._path,!0);const t=pc(e._queryParams,this._value,this._key);if(vg(t),Eu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new es(e._repo,e._path,t,e._orderByCalled)}}class wx extends _o{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ka("endBefore",this._value,e._path,!1);const t=function v_(n,e,t){let r,i;return n.index_===fo?("string"==typeof e&&(e=Ms(e)),i=pc(n,e,t)):(r=null==t?Cs:Ms(t),i=pc(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(vg(t),Eu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new es(e._repo,e._path,t,e._orderByCalled)}}class wy extends _o{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ka("startAt",this._value,e._path,!0);const t=Cd(e._queryParams,this._value,this._key);if(vg(t),Eu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new es(e._repo,e._path,t,e._orderByCalled)}}class v0 extends _o{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ka("startAfter",this._value,e._path,!1);const t=function y_(n,e,t){let r;if(n.index_===fo)"string"==typeof e&&(e=qp(e)),r=Cd(n,e,t);else{let i;i=null==t?Ds:qp(t),r=Cd(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(vg(t),Eu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new es(e._repo,e._path,t,e._orderByCalled)}}class bx extends _o{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new es(e._repo,e._path,function fc(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class Iy extends _o{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new es(e._repo,e._path,function zh(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class by extends _o{constructor(e){super(),this._path=e}_apply(e){xl(e,"orderByChild");const t=new tn(this._path);if(Lt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new ti(t),i=gc(e._queryParams,r);return Eu(i),new es(e._repo,e._path,i,!0)}}class GT extends _o{_apply(e){xl(e,"orderByKey");const t=gc(e._queryParams,fo);return Eu(t),new es(e._repo,e._path,t,!0)}}class zT extends _o{_apply(e){xl(e,"orderByPriority");const t=gc(e._queryParams,yn);return Eu(t),new es(e._repo,e._path,t,!0)}}class ZT extends _o{_apply(e){xl(e,"orderByValue");const t=gc(e._queryParams,dc);return Eu(t),new es(e._repo,e._path,t,!0)}}class Vd extends _o{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ka("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jT(this._value,this._key)._apply(new wy(this._value,this._key)._apply(e))}}function xi(n,...e){let t=(0,O.m9)(n);for(const r of e)t=r._apply(t);return t}(function F_(n){(0,O.hu)(!mc,"__referenceConstructor has already been defined"),mc=n})(mo),function V_(n){(0,O.hu)(!sg,"__referenceConstructor has already been defined"),sg=n}(mo);const Ty={};function jd(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||so("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Vn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,E,u=py(a,i),h=u.repoInfo;"undefined"!=typeof process&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(m=!0,a=`http://${E}?ns=${h.namespace}`,u=py(a,i),h=u.repoInfo):m=!u.repoInfo.secure;const C=i&&m?new Da(Da.OWNER):new ei(n.name,n.options,e);ny("Invalid Firebase Database URL",u),Lt(u.path)||so("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function bc(n,e,t,r){let i=Ty[e.name];i||(i={},Ty[e.name]=i);let a=i[n.toURLString()];return a&&so("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new DT(n,false,t,r),i[n.toURLString()]=a,a}(h,n,C,new Ca(n.name,t));return new yo(S,n)}class yo{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function ST(n,e,t){if(n.stats_=D(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new _(n.repoInfo_,(r,i,a,u)=>{l0(n,r,i,a,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ff(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,O.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new au(n.repoInfo_,e,(r,i,a,u)=>{l0(n,r,i,a,u)},r=>{ff(n,r)},r=>{!function iy(n,e){gr(e,(t,r)=>{sy(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function N(n,e){const t=n.toString();return T[t]||(T[t]=e()),T[t]}(n.repoInfo_,()=>new at(n.stats_,n.server_)),n.infoData_=new f,n.infoSyncTree_=new gT({startListening:(r,i,a,u)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=og(n.infoSyncTree_,r._path,m),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),sy(n,"connected",!1),n.serverSyncTree_=new gT({startListening:(r,i,a,u)=>(n.server_.listen(r,a,i,(h,m)=>{const E=u(h,m);go(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new mo(this._repo,zt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function mi(n,e){const t=Ty[e];(!t||t[n.key]!==n)&&so(`Database ${e}(${n.repoInfo_}) has already been deleted.`),ly(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&so("Cannot call "+e+" on a deleted database.")}}function Gd(n,e){Fo(n,e)}const zd={".sv":"timestamp"};class Yd{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}au.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},au.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Wd(n){ud(Bn.SDK_VERSION),(0,Bn._registerComponent)(new br.wA("database",(e,{instanceIdentifier:t})=>jd(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Bn.registerVersion)(Xl,"0.12.5",n),(0,Bn.registerVersion)(Xl,"0.12.5","esm2017")}();const C0=new Tr.Yd("@firebase/database-compat"),Cy=function(n){C0.warn("FIREBASE WARNING: "+n)};class eC{constructor(e){this._delegate=e}cancel(e){(0,O.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,O.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,O.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,O.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,O.Dv)("OnDisconnect.set",1,2,arguments.length),(0,O.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,O.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,O.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Cy("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,O.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class A0{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,O.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Iu{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,O.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,O.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,O.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,O.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,O.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),cf("DataSnapshot.child","path",e,!1),new Iu(this._database,this._delegate.child(e))}hasChild(e){return(0,O.Dv)("DataSnapshot.hasChild",1,1,arguments.length),cf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,O.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,O.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,O.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Iu(this._database,t)))}hasChildren(){return(0,O.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,O.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,O.Dv)("DataSnapshot.ref",0,0,arguments.length),new ts(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ri{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,O.Dv)("Query.on",2,4,arguments.length),(0,O.Wj)("Query.on","callback",t,!1);const u=ri.getCancelAndContextArgs_("Query.on",r,i),h=(E,C)=>{t.call(u.context,new Iu(this.database,E),C)};h.userCallback=t,h.context=u.context;const m=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return vy(this._delegate,h,m),t;case"child_added":return BT(this._delegate,h,m),t;case"child_removed":return _0(this._delegate,h,m),t;case"child_changed":return VT(this._delegate,h,m),t;case"child_moved":return wg(this._delegate,h,m),t;default:throw new Error((0,O.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,O.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,O.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,O.Wj)("Query.off","callback",t,!0),(0,O.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Ey(this._delegate,e,i)}else Ey(this._delegate,e)}get(){return m0(this._delegate).then(e=>new Iu(this.database,e))}once(e,t,r,i){(0,O.Dv)("Query.once",1,4,arguments.length),(0,O.Wj)("Query.once","callback",t,!0);const a=ri.getCancelAndContextArgs_("Query.once",r,i),u=new O.BH,h=(E,C)=>{const S=new Iu(this.database,E);t&&t.call(a.context,S,C),u.resolve(S)};h.userCallback=t,h.context=a.context;const m=E=>{a.cancel&&a.cancel.call(a.context,E),u.reject(E)};switch(e){case"value":vy(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":BT(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":_0(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":VT(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":wg(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,O.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,O.Dv)("Query.limitToFirst",1,1,arguments.length),new ri(this.database,xi(this._delegate,function E0(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bx(n)}(e)))}limitToLast(e){return(0,O.Dv)("Query.limitToLast",1,1,arguments.length),new ri(this.database,xi(this._delegate,function $T(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Iy(n)}(e)))}orderByChild(e){return(0,O.Dv)("Query.orderByChild",1,1,arguments.length),new ri(this.database,xi(this._delegate,function qT(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return cf("orderByChild","path",n,!1),new by(n)}(e)))}orderByKey(){return(0,O.Dv)("Query.orderByKey",0,0,arguments.length),new ri(this.database,xi(this._delegate,function WT(){return new GT}()))}orderByPriority(){return(0,O.Dv)("Query.orderByPriority",0,0,arguments.length),new ri(this.database,xi(this._delegate,function KT(){return new zT}()))}orderByValue(){return(0,O.Dv)("Query.orderByValue",0,0,arguments.length),new ri(this.database,xi(this._delegate,function Ig(){return new ZT}()))}startAt(e=null,t){return(0,O.Dv)("Query.startAt",0,2,arguments.length),new ri(this.database,xi(this._delegate,function y0(n=null,e){return Ld("startAt","key",e,!0),new wy(n,e)}(e,t)))}startAfter(e=null,t){return(0,O.Dv)("Query.startAfter",0,2,arguments.length),new ri(this.database,xi(this._delegate,function HT(n,e){return Ld("startAfter","key",e,!0),new v0(n,e)}(e,t)))}endAt(e=null,t){return(0,O.Dv)("Query.endAt",0,2,arguments.length),new ri(this.database,xi(this._delegate,function Zo(n,e){return Ld("endAt","key",e,!0),new jT(n,e)}(e,t)))}endBefore(e=null,t){return(0,O.Dv)("Query.endBefore",0,2,arguments.length),new ri(this.database,xi(this._delegate,function Ix(n,e){return Ld("endBefore","key",e,!0),new wx(n,e)}(e,t)))}equalTo(e,t){return(0,O.Dv)("Query.equalTo",1,2,arguments.length),new ri(this.database,xi(this._delegate,function YT(n,e){return Ld("equalTo","key",e,!0),new Vd(n,e)}(e,t)))}toString(){return(0,O.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,O.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,O.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ri))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,O.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,O.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,O.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new ts(this.database,new mo(this._delegate._repo,this._delegate._path))}}class ts extends ri{constructor(e,t){super(e,new es(t._repo,t._path,new Td,!1)),this.database=e,this._delegate=t}getKey(){return(0,O.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,O.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ts(this.database,wu(this._delegate,e))}getParent(){(0,O.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ts(this.database,e):null}getRoot(){return(0,O.Dv)("Reference.root",0,0,arguments.length),new ts(this.database,this._delegate.root)}set(e,t){(0,O.Dv)("Reference.set",1,2,arguments.length),(0,O.Wj)("Reference.set","onComplete",t,!0);const r=_y(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,O.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Cy("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}xs("Reference.update",this._delegate._path),(0,O.Wj)("Reference.update","onComplete",t,!0);const r=UT(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,O.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,O.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function LT(n,e,t){if(xs("setWithPriority",n._path),ka("setWithPriority",e,n._path,!1),ty("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new O.BH;return pg(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,O.Dv)("Reference.remove",0,1,arguments.length),(0,O.Wj)("Reference.remove","onComplete",e,!0);const t=function g0(n){return xs("remove",n._path),_y(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,O.Dv)("Reference.transaction",1,3,arguments.length),(0,O.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,O.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,O.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function I0(n,e,t){var r;if(n=(0,O.m9)(n),xs("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new O.BH,h=vy(n,()=>{});return function NT(n,e,t,r,i,a){Ji(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:Oo(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=uy(n,e,void 0);u.currentInputSnapshot=h;const m=u.update(h.val());if(void 0===m)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{uf("transaction failed: Data returned ",m,u.path),u.status=0;const E=af(n.transactionQueueTree_,e),C=Od(E)||[];let S;C.push(u),dg(E,C),"object"==typeof m&&null!==m&&(0,O.r3)(m,".priority")?(S=(0,O.DV)(m,".priority"),(0,O.hu)(Fd(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(Rd(n.serverSyncTree_,e)||It.EMPTY_NODE).getPriority().val();const k=hf(n),B=wn(m,S),j=cg(B,h,k);u.currentOutputSnapshotRaw=B,u.currentOutputSnapshotResolved=j,u.currentWriteId=Ud(n);const ne=e0(n.serverSyncTree_,e,j,u.currentWriteId,u.applyLocally);go(n.eventQueue_,e,ne),cy(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,E,C)=>{let S=null;m?a.reject(m):(S=new Ic(C,new mo(n._repo,n._path),yn),a.resolve(new Yd(E,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new A0(a.committed,new Iu(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,O.Dv)("Reference.setPriority",1,2,arguments.length),(0,O.Wj)("Reference.setPriority","onComplete",t,!0);const r=function FT(n,e){n=(0,O.m9)(n),xs("setPriority",n._path),ty("setPriority",e,!1);const t=new O.BH;return pg(n._repo,_n(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,O.Dv)("Reference.push",0,2,arguments.length),(0,O.Wj)("Reference.push","onComplete",t,!0);const r=function p0(n,e){n=(0,O.m9)(n),xs("push",n._path),ka("push",e,n._path,!0);const t=fg(n._repo),r=$p(t),i=wu(n,r),a=wu(n,r);let u;return u=null!=e?_y(a,e).then(()=>a):Promise.resolve(a),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new ts(this.database,u));t&&i.then(()=>t(null),u=>t(u));const a=new ts(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return xs("Reference.onDisconnect",this._delegate._path),new eC(new f0(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class _f{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function Hd(n,e,t,r={}){(n=(0,O.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&so("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&so('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Da(Da.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,O.Sg)(r.mockUserToken,n.app.options.projectId);a=new Da(u)}!function Pa(n,e,t,r){n.repoInfo_=new nc(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,O.Dv)("database.ref",0,1,arguments.length),e instanceof ts){const t=Eg(this._delegate,e.toString());return new ts(this,t)}{const t=ks(this._delegate,e);return new ts(this,t)}}refFromURL(e){(0,O.Dv)("database.refFromURL",1,1,arguments.length);const r=Eg(this._delegate,e);return new ts(this,r)}goOffline(){return(0,O.Dv)("database.goOffline",0,0,arguments.length),function $d(n){(n=(0,O.m9)(n))._checkNotDeleted("goOffline"),ly(n._repo)}(this._delegate)}goOnline(){return(0,O.Dv)("database.goOnline",0,0,arguments.length),function qd(n){(n=(0,O.m9)(n))._checkNotDeleted("goOnline"),function d0(n){n.persistentConnection_&&n.persistentConnection_.resume(ry)}(n._repo)}(this._delegate)}}_f.ServerValue={TIMESTAMP:function Kd(){return zd}(),increment:n=>function Zd(n){return{".sv":{increment:n}}}(n)};var M0=Object.freeze({__proto__:null,initStandalone:function tC({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){ud(t);const u=new br.zt("auth-internal",new br.H0("database-standalone"));return u.setComponent(new br.wA("auth-internal",()=>r,"PRIVATE")),{instance:new _f(jd(n,u,void 0,e,a),n),namespace:i}}});const nC=_f.ServerValue;!function R0(n){n.INTERNAL.registerComponent(new br.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new _f(i,r)},"PUBLIC").setServiceProps({Reference:ts,Query:ri,Database:_f,DataSnapshot:Iu,enableLogging:Gd,INTERNAL:M0,ServerValue:nC}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(ul.Z);var x0=F(7579),Cg=F(5363),Tx=F(6063);class rC extends x0.x{constructor(e=1/0,t=1/0,r=Tx.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:u}=this;t||(r.push(e),!i&&r.push(a.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let u=0;u<a.length&&!e.closed;u+=r?1:2)e.next(a[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const u=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=u;m+=2)h=m;h&&r.splice(0,h+1)}}}function Dg(n,e,t){var r,i;let a,u=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,u=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,Kl.B)({connector:()=>new rC(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:u})}const N0=(0,F(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Sg(n,e){return(0,wr.e)((t,r)=>{let i=0;t.subscribe(new Rn.Q(r,a=>n.call(e,a,i++)&&r.next(a)))})}var iC=F(5698);function Cx(n){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe(new Rn.Q(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function sC(n=k0){return(0,wr.e)((e,t)=>{let r=!1;e.subscribe(new Rn.Q(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function k0(){return new N0}var Sy=F(576);function Tc(n,e){return(0,Sy.m)(e)?Ir(()=>n,e):Ir(()=>n)}var Ay=F(9468);F(5867);const L0=new Map,xx={activated:!1,tokenObservers:[]},yf={initialized:!1,enabled:!1};function Pr(n){return L0.get(n)||xx}function Ps(n,e){L0.set(n,e)}function Qd(){return yf}class B0{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new O.BH,yield function V0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new O.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ni=new O.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Py(n){if(!Pr(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function Oy(n,e){return xg.apply(this,arguments)}function xg(){return(xg=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let u,h;try{u=yield fetch(n,a)}catch(S){throw Ni.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==u.status)throw Ni.create("fetch-status-error",{httpStatus:u.status});try{h=yield u.json()}catch(S){throw Ni.create("fetch-parse-error",{originalErrorMessage:S.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const E=1e3*Number(m[1]),C=Date.now();return{token:h.attestationToken,expireTimeMillis:C+E,issuedAtTimeMillis:C}})).apply(this,arguments)}function mC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Jd="firebase-app-check-store";let eh=null;function Ly(){return eh||(eh=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ni.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Jd,{keyPath:"compositeKey"})}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t.message}))}}),eh)}function kg(){return(kg=(0,me.Z)(function*(n,e){const r=(yield Ly()).transaction(Jd,"readwrite"),a=r.objectStore(Jd).put({compositeKey:n,value:e});return new Promise((u,h)=>{a.onsuccess=m=>{u()},r.onerror=m=>{var E;h(Ni.create("storage-set",{originalErrorMessage:null===(E=m.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const Ef=new Tr.Yd("@firebase/app-check");function mr(n,e){return(0,O.hl)()?function q0(n,e){return function Uy(n,e){return kg.apply(this,arguments)}(function K0(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ef.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Q0(){return Qd().enabled}function Hy(){return $y.apply(this,arguments)}function $y(){return($y=(0,me.Z)(function*(){const n=Qd();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const J0={error:"UNKNOWN_ERROR"};function th(n){return O.US.encodeString(JSON.stringify(n),!1)}function Pg(n){return qy.apply(this,arguments)}function qy(){return(qy=(0,me.Z)(function*(n,e=!1){const t=n.app;Py(t);const r=Pr(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&nh(m)&&(i=m)}if(!e&&i&&nh(i))return{token:i.token};let h,u=!1;if(Q0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Oy(mC(t,yield Hy()),n.platformLoggerProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),u=!0);const m=yield r.exchangeTokenPromise;return yield mr(t,m),Ps(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),u=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Ef.warn(m.message):Ef.error(m),a=m}return i?(h={token:i.token},Ps(t,Object.assign(Object.assign({},r),{token:i})),yield mr(t,i)):h=Oa(a),u&&zy(t,h),h})).apply(this,arguments)}function Gy(n,e){const t=Pr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Ps(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function Wy(n){const{app:e}=n,t=Pr(e);let r=t.tokenRefresher;r||(r=function Nx(n){const{app:e}=n;return new B0((0,me.Z)(function*(){let r;if(r=Pr(e).token?yield Pg(n,!0):yield Pg(n),r.error)throw r.error}),()=>!0,()=>{const t=Pr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Ps(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function zy(n,e){const t=Pr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function nh(n){return n.expireTimeMillis-Date.now()>0}function Oa(n){return{token:th(J0),error:n}}class yC{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Pr(this.app);for(const t of e)Gy(this.app,t.next);return Promise.resolve()}}const Jy="app-check-internal";!function ow(){(0,Bn._registerComponent)(new br.wA("app-check",n=>function vC(n,e){return new yC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Jy).initialize()})),(0,Bn._registerComponent)(new br.wA(Jy,n=>function Fa(n){return{getToken:e=>Pg(n,e),addTokenListener:e=>function Og(n,e,t,r){const{app:i}=n,a=Pr(i),u={next:t,error:r,type:e};if(Ps(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,u]})),a.token&&nh(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),Wy(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>Wy(n))}(n,"INTERNAL",e),removeTokenListener:e=>Gy(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Bn.registerVersion)("@firebase/app-check","0.5.3")}();class If{constructor(){return(0,At.vb)("app-check")}}"undefined"!=typeof window&&window;var Vg=F(127);const jg=new y.OlP("angularfire2.auth.use-emulator"),Hg=new y.OlP("angularfire2.auth.settings"),$g=new y.OlP("angularfire2.auth.tenant-id"),qg=new y.OlP("angularfire2.auth.langugage-code"),Gg=new y.OlP("angularfire2.auth.use-device-language"),Wg=new y.OlP("angularfire.auth.persistence"),zg=(n,e,t,r,i,a,u,h)=>(0,Cn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),u)for(const[E,C]of Object.entries(u))m.settings[E]=C;return h&&m.setPersistence(h),m},[t,r,i,a,u,h]);let bf=(()=>{class n{constructor(t,r,i,a,u,h,m,E,C,S,k,B){const j=new x0.x,ne=lr(void 0).pipe((0,Cg.Q)(u.outsideAngular),Ir(()=>a.runOutsideAngular(()=>Promise.resolve().then(F.bind(F,8999)))),(0,Bt.U)(()=>(0,Cn.on)(t,a,r)),(0,Bt.U)(we=>zg(we,a,h,E,C,S,m,k)),Dg({bufferSize:1,refCount:!1}));if(Er(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=lr(null);else{ne.pipe(function Dx(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Sg((i,a)=>n(i,a,r)):Zl.y,(0,iC.q)(1),t?Cx(e):sC(()=>new N0))}()).subscribe();const Qe=ne.pipe(Ir(Ze=>Ze.getRedirectResult().then(qt=>qt,()=>null)),At.iC,Dg({bufferSize:1,refCount:!1})),Je=ne.pipe(Ir(Ze=>new ws.y(qt=>({unsubscribe:a.runOutsideAngular(()=>Ze.onAuthStateChanged(bn=>qt.next(bn),bn=>qt.error(bn),()=>qt.complete()))})))),pt=ne.pipe(Ir(Ze=>new ws.y(qt=>({unsubscribe:a.runOutsideAngular(()=>Ze.onIdTokenChanged(bn=>qt.next(bn),bn=>qt.error(bn),()=>qt.complete()))}))));this.authState=Qe.pipe(Tc(Je),(0,Ay.R)(u.outsideAngular),(0,Cg.Q)(u.insideAngular)),this.user=Qe.pipe(Tc(pt),(0,Ay.R)(u.outsideAngular),(0,Cg.Q)(u.insideAngular)),this.idToken=this.user.pipe(Ir(Ze=>Ze?(0,Pn.D)(Ze.getIdToken()):lr(null))),this.idTokenResult=this.user.pipe(Ir(Ze=>Ze?(0,Pn.D)(Ze.getIdTokenResult()):lr(null))),this.credential=(0,Ea.T)(Qe,j,this.authState.pipe(Sg(Ze=>!Ze))).pipe((0,Bt.U)(Ze=>(null==Ze?void 0:Ze.user)?Ze:null),(0,Ay.R)(u.outsideAngular),(0,Cg.Q)(u.insideAngular))}return(0,Cn.pX)(this,ne,a,{spy:{apply:(we,Qe,Je)=>{(we.startsWith("signIn")||we.startsWith("createUser"))&&Je.then(pt=>j.next(pt))}}})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Cn.Dh),y.LFG(Cn.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(At.HU),y.LFG(jg,8),y.LFG(Hg,8),y.LFG($g,8),y.LFG(qg,8),y.LFG(Gg,8),y.LFG(Wg,8),y.LFG(If,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),aw=(()=>{class n{constructor(){Vg.Z.registerVersion("angularfire",At.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[bf]}),n})();function bu(n){return null==n}function cw(n){return"function"==typeof n.set}function dw(n,e){return cw(e)?e:n.ref(e)}function Dc(n,e){if(function lw(n){return"string"==typeof n}(n))return e.stringCase();if(cw(n))return e.firebaseCase();if(function uw(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Kg(n,e,t="on",r=kh.z){return new ws.y(i=>{let a=null;return a=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,Bt.U)(i=>{const{snapshot:a,prevKey:u}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:u,key:h}}),(0,Kl.B)())}function NC(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function fw(n,e){const{payload:t,prevKey:r,key:i}=e,a=NC(n,i),u=function hw(n,e){if(bu(e))return 0;{const t=NC(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const E={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function kC(n){return(bu(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function yt(n,e,t){return function nv(n,e,t){return Kg(n,"value","once",t).pipe(Ir(r=>{const i=[lr(r)];return e.forEach(a=>i.push(Kg(n,a,"on",t))),(0,Ea.T)(...i).pipe(wa(fw,[]))}),Yl())}(n,e=kC(e),t)}function pw(n,e,t){const r=(e=kC(e)).map(i=>Kg(n,i,"on",t));return(0,Ea.T)(...r)}function gw(n,e){return function(r,i){return Dc(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Yg(n){return function(t){return t?Dc(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function $n(n,e){return function(){return Kg(n,"value","on",e)}}const mw=new y.OlP("angularfire2.realtimeDatabaseURL"),FC=new y.OlP("angularfire2.database.use-emulator");let rv,_w=(()=>{class n{constructor(t,r,i,a,u,h,m,E,C,S,k,B,j,ne,we){this.schedulers=h;const Qe=m,Je=(0,Cn.on)(t,u,r);E&&zg(Je,u,C,k,B,j,S,ne),this.database=(0,Cn.cc)(`${Je.name}.database.${i}`,"AngularFireDatabase",Je.name,()=>{const pt=u.runOutsideAngular(()=>Je.database(i||void 0));return Qe&&pt.useEmulator(...Qe),pt},[Qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>dw(this.database,t));let a=i;return r&&(a=r(i)),function Qg(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:gw(r,"update"),set:gw(r,"set"),push:i=>r.push(i),remove:Yg(r),snapshotChanges:i=>yt(n,i,t).pipe(At.iC),stateChanges:i=>pw(n,i,t).pipe(At.iC),auditTrail:i=>function PC(n,e,t){return function Zg(n,e,t){return function OC(n,e){return Kg(n,"value","on",e).pipe((0,Bt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function io(...n){const e=(0,Un.jO)(n);return(0,wr.e)((t,r)=>{const i=n.length,a=new Array(i);let u=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,on.Xf)(n[m]).subscribe(new Rn.Q(r,E=>{a[m]=E,!h&&!u[m]&&(u[m]=!0,(h=u.every(Zl.y))&&(u=null))},Ql.Z));t.subscribe(new Rn.Q(r,m=>{if(h){const E=[m,...a];r.next(e?e(...E):E)}}))})}(e),(0,Bt.U)(([i,a])=>{const u=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:u,loadedKeys:h}}),function Po(n){return(0,wr.e)((e,t)=>{let r=!1,i=0;e.subscribe(new Rn.Q(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Bt.U)(i=>i.actions))}(n,pw(n,e).pipe(wa((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(At.iC),valueChanges:(i,a)=>yt(n,i,t).pipe((0,Bt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),At.iC)}}(a,this)}object(t){return function $x(n,e){return{query:n,snapshotChanges:()=>$n(n,e.schedulers.outsideAngular)().pipe(At.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>$n(n,e.schedulers.outsideAngular)().pipe(At.iC,(0,Bt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>dw(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Cn.Dh),y.LFG(Cn.xv,8),y.LFG(mw,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(At.HU),y.LFG(FC,8),y.LFG(bf,8),y.LFG(jg,8),y.LFG(Hg,8),y.LFG($g,8),y.LFG(qg,8),y.LFG(Gg,8),y.LFG(Wg,8),y.LFG(If,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yw=(()=>{class n{constructor(){Vg.Z.registerVersion("angularfire",At.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[_w]}),n})(),rh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();try{rv="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){rv=!1}let Iw=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function pr(n){return n===Qc}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!rv)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.Lbi))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const SD="cdk-high-contrast-black-on-white",ih="cdk-high-contrast-white-on-black",fv="cdk-high-contrast-active";let pv=(()=>{class n{constructor(t,r){this._platform=t,this._document=r}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,a=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),a){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(fv),t.remove(SD),t.remove(ih),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?(t.add(fv),t.add(SD)):2===r&&(t.add(fv),t.add(ih))}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Iw),y.LFG(ie))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zw=new y.OlP("mat-sanity-checks",{providedIn:"root",factory:function Dk(){return!0}});let sh=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function jC(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(pv),y.LFG(zw,8),y.LFG(ie))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[[rh],rh]}),n})();function lm(n,e){return class extends n{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}}}const zD=["*",[["mat-toolbar-row"]]],eI=["*","mat-toolbar-row"],KD=lm(class{constructor(n){this._elementRef=n}});let Hk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=y.lG2({type:n,selectors:[["mat-toolbar-row"]],hostAttrs:[1,"mat-toolbar-row"],exportAs:["matToolbarRow"]}),n})(),ZD=(()=>{class n extends KD{constructor(t,r,i){super(t),this._platform=r,this._document=i}ngAfterViewInit(){this._platform.isBrowser&&(this._checkToolbarMixedModes(),this._toolbarRows.changes.subscribe(()=>this._checkToolbarMixedModes()))}_checkToolbarMixedModes(){}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.SBq),y.Y36(Iw),y.Y36(ie))},n.\u0275cmp=y.Xpm({type:n,selectors:[["mat-toolbar"]],contentQueries:function(t,r,i){if(1&t&&y.Suo(i,Hk,5),2&t){let a;y.iGM(a=y.CRH())&&(r._toolbarRows=a)}},hostAttrs:[1,"mat-toolbar"],hostVars:4,hostBindings:function(t,r){2&t&&y.ekj("mat-toolbar-multiple-rows",r._toolbarRows.length>0)("mat-toolbar-single-row",0===r._toolbarRows.length)},inputs:{color:"color"},exportAs:["matToolbar"],features:[y.qOj],ngContentSelectors:eI,decls:2,vars:0,template:function(t,r){1&t&&(y.F$t(zD),y.Hsn(0),y.Hsn(1,1))},styles:[".cdk-high-contrast-active .mat-toolbar{outline:solid 1px}.mat-toolbar-row,.mat-toolbar-single-row{display:flex;box-sizing:border-box;padding:0 16px;width:100%;flex-direction:row;align-items:center;white-space:nowrap}.mat-toolbar-multiple-rows{display:flex;box-sizing:border-box;flex-direction:column;width:100%}\n"],encapsulation:2,changeDetection:0}),n})(),YD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[[sh],sh]}),n})();const{isArray:XD}=Array,{getPrototypeOf:iI,prototype:sI,keys:JD}=Object;const{isArray:Xo}=Array;function nS(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var zk=F(727),Iv=F(8505);function bv(n){return(0,wr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe(new Rn.Q(t,void 0,void 0,u=>{a=(0,on.Xf)(n(u,bv(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var iS=F(5577);class lI{}class Cu{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),u=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(u):this.headers.set(a,[u])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Cu?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Cu;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Cu?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let u=this.headers.get(t);if(!u)return;u=u.filter(h=>-1===a.indexOf(h)),0===u.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,u)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class uI{encodeKey(e){return dI(e)}encodeValue(e){return dI(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Tv=/%(\d[a-f0-9])/gi,cI={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function dI(n){return encodeURIComponent(n).replace(Tv,(e,t)=>{var r;return null!==(r=cI[t])&&void 0!==r?r:e})}function Cv(n){return`${n}`}class Nl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new uI,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function um(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[u,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(u)||[];m.push(h),t.set(u,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Nl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(Cv(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(Cv(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class sS{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function oS(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function Dv(n){return"undefined"!=typeof Blob&&n instanceof Blob}function hI(n){return"undefined"!=typeof FormData&&n instanceof FormData}class kf{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Yk(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new Cu),this.context||(this.context=new sS),this.params){const u=this.params.toString();if(0===u.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+u}}else this.params=new Nl,this.urlWithParams=t}serializeBody(){return null===this.body?null:oS(this.body)||Dv(this.body)||hI(this.body)||function aS(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Nl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||hI(this.body)?null:Dv(this.body)?this.body.type||null:oS(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Nl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let E=e.headers||this.headers,C=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(E=Object.keys(e.setHeaders).reduce((k,B)=>k.set(B,e.setHeaders[B]),E)),e.setParams&&(C=Object.keys(e.setParams).reduce((k,B)=>k.set(B,e.setParams[B]),C)),new kf(r,i,u,{params:C,headers:E,context:S,reportProgress:m,responseType:a,withCredentials:h})}}var _i=(()=>((_i=_i||{})[_i.Sent=0]="Sent",_i[_i.UploadProgress=1]="UploadProgress",_i[_i.ResponseHeader=2]="ResponseHeader",_i[_i.DownloadProgress=3]="DownloadProgress",_i[_i.Response=4]="Response",_i[_i.User=5]="User",_i))();class fI extends class Qk{constructor(e,t=200,r="OK"){this.headers=e.headers||new Cu,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}{constructor(e={}){super(e),this.type=_i.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new fI({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function Sv(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Pf=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof kf)a=t;else{let m,E;m=i.headers instanceof Cu?i.headers:new Cu(i.headers),i.params&&(E=i.params instanceof Nl?i.params:new Nl({fromObject:i.params})),a=new kf(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:E,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const u=lr(a).pipe(function aI(n,e){return(0,Sy.m)(e)?(0,iS.z)(n,e,1):(0,iS.z)(n,1)}(m=>this.handler.handle(m)));if(t instanceof kf||"events"===i.observe)return u;const h=u.pipe(Sg(m=>m instanceof fI));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,Bt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,Bt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,Bt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,Bt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Nl).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,Sv(i,r))}post(t,r,i={}){return this.request("POST",t,Sv(i,r))}put(t,r,i={}){return this.request("PUT",t,Sv(i,r))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(lI))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const yI=["*"];let Of;function Ff(n){var e;return(null===(e=function mS(){if(void 0===Of&&(Of=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(Of=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return Of}())||void 0===e?void 0:e.createHTML(n))||n}function Av(n){return Error(`Unable to find icon with the name "${n}"`)}function _S(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function Mv(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class La{constructor(e,t,r){this.url=e,this.svgText=t,this.options=r}}let dm=(()=>{class n{constructor(t,r,i,a){this._httpClient=t,this._sanitizer=r,this._errorHandler=a,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=i}addSvgIcon(t,r,i){return this.addSvgIconInNamespace("",t,r,i)}addSvgIconLiteral(t,r,i){return this.addSvgIconLiteralInNamespace("",t,r,i)}addSvgIconInNamespace(t,r,i,a){return this._addSvgIconConfig(t,r,new La(i,null,a))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,i,a){const u=this._sanitizer.sanitize(y.q3G.HTML,i);if(!u)throw Mv(i);const h=Ff(u);return this._addSvgIconConfig(t,r,new La("",h,a))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,i){return this._addSvgIconSetConfig(t,new La(r,null,i))}addSvgIconSetLiteralInNamespace(t,r,i){const a=this._sanitizer.sanitize(y.q3G.HTML,r);if(!a)throw Mv(r);const u=Ff(a);return this._addSvgIconSetConfig(t,new La("",u,i))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(y.q3G.RESOURCE_URL,t);if(!r)throw _S(t);const i=this._cachedIconsByUrl.get(r);return i?lr(hm(i)):this._loadSvgIconFromConfig(new La(t,null)).pipe((0,Iv.b)(a=>this._cachedIconsByUrl.set(r,a)),(0,Bt.U)(a=>hm(a)))}getNamedSvgIcon(t,r=""){const i=vS(r,t);let a=this._svgIconConfigs.get(i);if(a)return this._getSvgFromConfig(a);if(a=this._getIconConfigFromResolvers(r,t),a)return this._svgIconConfigs.set(i,a),this._getSvgFromConfig(a);const u=this._iconSetConfigs.get(r);return u?this._getSvgFromIconSetConfigs(t,u):function rI(n,e){const t=(0,Sy.m)(n)?n:()=>n,r=i=>i.error(t());return new ws.y(e?i=>e.schedule(r,0,i):r)}(Av(i))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?lr(hm(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Bt.U)(r=>hm(r)))}_getSvgFromIconSetConfigs(t,r){const i=this._extractIconWithNameFromAnySet(t,r);return i?lr(i):function oI(...n){const e=(0,Un.jO)(n),{args:t,keys:r}=function eS(n){if(1===n.length){const e=n[0];if(XD(e))return{args:e,keys:null};if(function wv(n){return n&&"object"==typeof n&&iI(n)===sI}(e)){const t=JD(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n),i=new ws.y(a=>{const{length:u}=t;if(!u)return void a.complete();const h=new Array(u);let m=u,E=u;for(let C=0;C<u;C++){let S=!1;(0,on.Xf)(t[C]).subscribe(new Rn.Q(a,k=>{S||(S=!0,E--),h[C]=k},()=>m--,void 0,()=>{(!m||!S)&&(E||a.next(r?nS(r,h):h),a.complete())}))}});return e?i.pipe(function Wk(n){return(0,Bt.U)(e=>function tS(n,e){return Xo(e)?n(...e):n(e)}(n,e))}(e)):i}(r.filter(u=>!u.svgText).map(u=>this._loadSvgIconSetFromConfig(u).pipe(bv(h=>{const E=`Loading icon set URL: ${this._sanitizer.sanitize(y.q3G.RESOURCE_URL,u.url)} failed: ${h.message}`;return this._errorHandler.handleError(new Error(E)),lr(null)})))).pipe((0,Bt.U)(()=>{const u=this._extractIconWithNameFromAnySet(t,r);if(!u)throw Av(t);return u}))}_extractIconWithNameFromAnySet(t,r){for(let i=r.length-1;i>=0;i--){const a=r[i];if(a.svgText&&a.svgText.toString().indexOf(t)>-1){const u=this._svgElementFromConfig(a),h=this._extractSvgIconFromSet(u,t,a.options);if(h)return h}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,Iv.b)(r=>t.svgText=r),(0,Bt.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?lr(null):this._fetchIcon(t).pipe((0,Iv.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,i){const a=t.querySelector(`[id="${r}"]`);if(!a)return null;const u=a.cloneNode(!0);if(u.removeAttribute("id"),"svg"===u.nodeName.toLowerCase())return this._setSvgAttributes(u,i);if("symbol"===u.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(u),i);const h=this._svgElementFromString(Ff("<svg></svg>"));return h.appendChild(u),this._setSvgAttributes(h,i)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const i=r.querySelector("svg");if(!i)throw Error("<svg> tag not found");return i}_toSvgElement(t){const r=this._svgElementFromString(Ff("<svg></svg>")),i=t.attributes;for(let a=0;a<i.length;a++){const{name:u,value:h}=i[a];"id"!==u&&r.setAttribute(u,h)}for(let a=0;a<t.childNodes.length;a++)t.childNodes[a].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[a].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){var r;const{url:i,options:a}=t,u=null!==(r=null==a?void 0:a.withCredentials)&&void 0!==r&&r;if(!this._httpClient)throw function cm(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==i)throw Error(`Cannot fetch icon from URL "${i}".`);const h=this._sanitizer.sanitize(y.q3G.RESOURCE_URL,i);if(!h)throw _S(i);const m=this._inProgressUrlFetches.get(h);if(m)return m;const E=this._httpClient.get(h,{responseType:"text",withCredentials:u}).pipe((0,Bt.U)(C=>Ff(C)),function rS(n){return(0,wr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>this._inProgressUrlFetches.delete(h)),(0,Kl.B)());return this._inProgressUrlFetches.set(h,E),E}_addSvgIconConfig(t,r,i){return this._svgIconConfigs.set(vS(t,r),i),this}_addSvgIconSetConfig(t,r){const i=this._iconSetConfigs.get(t);return i?i.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let i=0;i<this._resolvers.length;i++){const a=this._resolvers[i](r,t);if(a)return ES(a)?new La(a.url,null,a.options):new La(a,null)}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Pf,8),y.LFG(ro),y.LFG(ie,8),y.LFG(y.qLn))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hm(n){return n.cloneNode(!0)}function vS(n,e){return n+":"+e}function ES(n){return!(!n.url||!n.options)}const wS=lm(class{constructor(n){this._elementRef=n}}),IS=new y.OlP("mat-icon-location",{providedIn:"root",factory:function bS(){const n=(0,y.f3M)(ie),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),vI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],TS=vI.map(n=>`[${n}]`).join(", "),CS=/^url\(['"]?#(.*?)['"]?\)$/;let DS=(()=>{class n extends wS{constructor(t,r,i,a,u){super(t),this._iconRegistry=r,this._location=a,this._errorHandler=u,this._inline=!1,this._currentIconFetch=zk.w0.EMPTY,i||t.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(t){this._inline=function Os(n){return null!=n&&"false"!=`${n}`}(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=t.querySelectorAll("style");for(let a=0;a<r.length;a++)r[a].textContent+=" ";const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const i=t.childNodes[r];(1!==i.nodeType||"svg"===i.nodeName.toLowerCase())&&i.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();r!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),r&&t.classList.add(r),this._previousFontSetClass=r),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((i,a)=>{i.forEach(u=>{a.setAttribute(u.name,`url('${t}#${u.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(TS),i=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let a=0;a<r.length;a++)vI.forEach(u=>{const h=r[a],m=h.getAttribute(u),E=m?m.match(CS):null;if(E){let C=i.get(h);C||(C=[],i.set(h,C)),C.push({name:u,value:E[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,i]=this._splitIconName(t);r&&(this._svgNamespace=r),i&&(this._svgName=i),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(i,r).pipe((0,iC.q)(1)).subscribe(a=>this._setSvgElement(a),a=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${i}! ${a.message}`))})}}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.SBq),y.Y36(dm),y.$8M("aria-hidden"),y.Y36(IS),y.Y36(y.qLn))},n.\u0275cmp=y.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(t,r){2&t&&(y.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet),y.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[y.qOj],ngContentSelectors:yI,decls:1,vars:0,template:function(t,r){1&t&&(y.F$t(),y.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;-moz-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),sP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[[sh],sh]}),n})();class SS{}const Du="*";function AS(n,e=null){return{type:2,steps:n,options:e}}function MS(n){return{type:6,styles:n,offset:null}}function I(n){Promise.resolve(null).then(n)}class b{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){I(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class M{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const a=this.players.length;0==a?I(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==a&&this._onFinish()}),u.onDestroy(()=>{++r==a&&this._onDestroy()}),u.onStart(()=>{++i==a&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function U(){return"undefined"!=typeof window&&void 0!==window.document}function q(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function Q(n){switch(n.length){case 0:return new b;case 1:return n[0];default:return new M(n)}}function Ie(n,e,t,r,i={},a={}){const u=[],h=[];let m=-1,E=null;if(r.forEach(C=>{const S=C.offset,k=S==m,B=k&&E||{};Object.keys(C).forEach(j=>{let ne=j,we=C[j];if("offset"!==j)switch(ne=e.normalizePropertyName(ne,u),we){case"!":we=i[j];break;case Du:we=a[j];break;default:we=e.normalizeStyleValue(j,ne,we,u)}B[ne]=we}),k||h.push(B),E=B,m=S}),u.length){const C="\n - ";throw new Error(`Unable to animate due to the following errors:${C}${u.join(C)}`)}return h}function Ue(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&$e(t,"start",n)));break;case"done":n.onDone(()=>r(t&&$e(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&$e(t,"destroy",n)))}}function $e(n,e,t){const r=t.totalTime,a=Xe(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==r?n.totalTime:r,!!t.disabled),u=n._data;return null!=u&&(a._data=u),a}function Xe(n,e,t,r,i="",a=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:a,disabled:!!u}}function Te(n,e,t){let r;return n instanceof Map?(r=n.get(e),r||n.set(e,r=t)):(r=n[e],r||(r=n[e]=t)),r}function ht(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let jt=(n,e)=>!1,an=(n,e,t)=>[];(q()||"undefined"!=typeof Element)&&(jt=U()?(n,e)=>{for(;e&&e!==document.documentElement;){if(e===n)return!0;e=e.parentNode||e.host}return!1}:(n,e)=>n.contains(e),an=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let kl=null,fm=!1;function Lf(n){kl||(kl=function Rv(){return"undefined"!=typeof document?document.body:null}()||{},fm=!!kl.style&&"WebkitAppearance"in kl.style);let e=!0;return kl.style&&!function Rc(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in kl.style,!e&&fm&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in kl.style)),e}const Uf=jt,Bf=an;function pm(n){const e={};return Object.keys(n).forEach(t=>{const r=t.replace(/([a-z])([A-Z])/g,"$1-$2");e[r]=n[t]}),e}let gm=(()=>{class n{validateStyleProperty(t){return Lf(t)}matchesElement(t,r){return!1}containsElement(t,r){return Uf(t,r)}query(t,r,i){return Bf(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,a,u,h=[],m){return new b(i,a)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Vf=(()=>{class n{}return n.NOOP=new gm,n})();const RS="ng-enter",EI="ng-leave",wI="ng-trigger",II=".ng-trigger",uP="ng-animating",xS=".ng-animating";function jf(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:NS(parseFloat(e[1]),e[2])}function NS(n,e){return"s"===e?1e3*n:n}function bI(n,e,t){return n.hasOwnProperty("duration")?n:function OB(n,e,t){let i,a=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(`The provided timing value "${n}" is invalid.`),{duration:0,delay:0,easing:""};i=NS(parseFloat(h[1]),h[2]);const m=h[3];null!=m&&(a=NS(parseFloat(m),h[4]));const E=h[5];E&&(u=E)}else i=n;if(!t){let h=!1,m=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),h=!0),a<0&&(e.push("Delay values below 0 are not allowed for this animation step."),h=!0),h&&e.splice(m,0,`The provided timing value "${n}" is invalid.`)}return{duration:i,delay:a,easing:u}}(n,e,t)}function mm(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function ah(n,e,t={}){if(e)for(let r in n)t[r]=n[r];else mm(n,t);return t}function dP(n,e,t){return t?e+":"+t+";":""}function hP(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=dP(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=dP(0,UB(t),n.style[t]));n.setAttribute("style",e)}function Su(n,e,t){n.style&&(Object.keys(e).forEach(r=>{const i=PS(r);t&&!t.hasOwnProperty(r)&&(t[r]=n.style[i]),n.style[i]=e[r]}),q()&&hP(n))}function Hf(n,e){n.style&&(Object.keys(e).forEach(t=>{const r=PS(t);n.style[r]=""}),q()&&hP(n))}function xv(n){return Array.isArray(n)?1==n.length?n[0]:AS(n):n}const kS=new RegExp("{{\\s*(.+?)\\s*}}","g");function fP(n){let e=[];if("string"==typeof n){let t;for(;t=kS.exec(n);)e.push(t[1]);kS.lastIndex=0}return e}function TI(n,e,t){const r=n.toString(),i=r.replace(kS,(a,u)=>{let h=e[u];return e.hasOwnProperty(u)||(t.push(`Please provide a value for the animation param ${u}`),h=""),h.toString()});return i==r?n:i}function CI(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const LB=/-+([a-z0-9])/g;function PS(n){return n.replace(LB,(...e)=>e[1].toUpperCase())}function UB(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function pP(n,e){return 0===n||0===e}function gP(n,e,t){const r=Object.keys(t);if(r.length&&e.length){let a=e[0],u=[];if(r.forEach(h=>{a.hasOwnProperty(h)||u.push(h),a[h]=t[h]}),u.length)for(var i=1;i<e.length;i++){let h=e[i];u.forEach(function(m){h[m]=OS(n,m)})}}return e}function Jo(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function OS(n,e){return window.getComputedStyle(n)[e]}function BB(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function VB(n,e,t){if(":"==n[0]){const m=function jB(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(`The transition alias value "${n}" is not supported`),"* => *"}}(n,t);if("function"==typeof m)return void e.push(m);n=m}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(`The provided transition expression "${n}" is not supported`),e;const i=r[1],a=r[2],u=r[3];e.push(mP(i,u));"<"==a[0]&&!("*"==i&&"*"==u)&&e.push(mP(u,i))}(r,t,e)):t.push(n),t}const SI=new Set(["true","1"]),AI=new Set(["false","0"]);function mP(n,e){const t=SI.has(n)||AI.has(n),r=SI.has(e)||AI.has(e);return(i,a)=>{let u="*"==n||n==i,h="*"==e||e==a;return!u&&t&&"boolean"==typeof i&&(u=i?SI.has(n):AI.has(n)),!h&&r&&"boolean"==typeof a&&(h=a?SI.has(e):AI.has(e)),u&&h}}const HB=new RegExp("s*:selfs*,?","g");function FS(n,e,t){return new $B(n).build(e,t)}class $B{constructor(e){this._driver=e}build(e,t){const r=new WB(t);return this._resetContextStyleTimingState(r),Jo(this,xv(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const a=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const m=h,E=m.name;E.toString().split(/\s*,\s*/).forEach(C=>{m.name=C,a.push(this.visitState(m,t))}),m.name=E}else if(1==h.type){const m=this.visitTransition(h,t);r+=m.queryCount,i+=m.depCount,u.push(m)}else t.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:e.name,states:a,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const a=new Set,u=i||{};if(r.styles.forEach(h=>{if(MI(h)){const m=h;Object.keys(m).forEach(E=>{fP(m[E]).forEach(C=>{u.hasOwnProperty(C)||a.add(C)})})}}),a.size){const h=CI(a.values());t.errors.push(`state("${e.name}", ...) must define default values for all the following style substitutions: ${h.join(", ")}`)}}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Jo(this,xv(e.animation),t);return{type:1,matchers:BB(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:$f(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Jo(this,r,t)),options:$f(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const a=e.steps.map(u=>{t.currentTime=r;const h=Jo(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:a,options:$f(e.options)}}visitAnimate(e,t){const r=function KB(n,e){let t=null;if(n.hasOwnProperty("duration"))t=n;else if("number"==typeof n)return LS(bI(n,e).duration,0,"");const r=n;if(r.split(/\s+/).some(a=>"{"==a.charAt(0)&&"{"==a.charAt(1))){const a=LS(0,0,"");return a.dynamic=!0,a.strValue=r,a}return t=t||bI(r,e),LS(t.duration,t.delay,t.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,a=e.styles?e.styles:MS({});if(5==a.type)i=this.visitKeyframes(a,t);else{let u=e.styles,h=!1;if(!u){h=!0;const E={};r.easing&&(E.easing=r.easing),u=MS(E)}t.currentTime+=r.duration+r.delay;const m=this.visitStyle(u,t);m.isEmptyStep=h,i=m}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[];Array.isArray(e.styles)?e.styles.forEach(u=>{"string"==typeof u?u==Du?r.push(u):t.errors.push(`The provided style string value ${u} is not allowed.`):r.push(u)}):r.push(e.styles);let i=!1,a=null;return r.forEach(u=>{if(MI(u)){const h=u,m=h.easing;if(m&&(a=m,delete h.easing),!i)for(let E in h)if(h[E].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:r,easing:a,offset:e.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,a=t.currentTime;r&&a>0&&(a-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&Object.keys(u).forEach(h=>{if(!this._driver.validateStyleProperty(h))return void t.errors.push(`The provided animation property "${h}" is not a supported CSS property for animations`);const m=t.collectedStyles[t.currentQuerySelector],E=m[h];let C=!0;E&&(a!=i&&a>=E.startTime&&i<=E.endTime&&(t.errors.push(`The CSS property "${h}" that exists between the times of "${E.startTime}ms" and "${E.endTime}ms" is also being animated in a parallel animation between the times of "${a}ms" and "${i}ms"`),C=!1),a=E.startTime),C&&(m[h]={startTime:a,endTime:i}),t.options&&function FB(n,e,t){const r=e.params||{},i=fP(n);i.length&&i.forEach(a=>{r.hasOwnProperty(a)||t.push(`Unable to resolve the local animation param ${a} in the given list of values`)})}(u[h],t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push("keyframes() must be placed inside of a call to animate()"),r;let a=0;const u=[];let h=!1,m=!1,E=0;const C=e.steps.map(Qe=>{const Je=this._makeStyleAst(Qe,t);let pt=null!=Je.offset?Je.offset:function zB(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(MI(t)&&t.hasOwnProperty("offset")){const r=t;e=parseFloat(r.offset),delete r.offset}});else if(MI(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Je.styles),Ze=0;return null!=pt&&(a++,Ze=Je.offset=pt),m=m||Ze<0||Ze>1,h=h||Ze<E,E=Ze,u.push(Ze),Je});m&&t.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),h&&t.errors.push("Please ensure that all keyframe offsets are in order");const S=e.steps.length;let k=0;a>0&&a<S?t.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==a&&(k=1/(S-1));const B=S-1,j=t.currentTime,ne=t.currentAnimateTimings,we=ne.duration;return C.forEach((Qe,Je)=>{const pt=k>0?Je==B?1:k*Je:u[Je],Ze=pt*we;t.currentTime=j+ne.delay+Ze,ne.duration=Ze,this._validateStyleAst(Qe,t),Qe.offset=pt,r.styles.push(Qe)}),r}visitReference(e,t){return{type:8,animation:Jo(this,xv(e.animation),t),options:$f(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:$f(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:$f(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[a,u]=function qB(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(HB,"")),n=n.replace(/@\*/g,II).replace(/@\w+/g,t=>II+"-"+t.substr(1)).replace(/:animating/g,xS),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+a:a,Te(t.collectedStyles,t.currentQuerySelector,{});const h=Jo(this,xv(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:a,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:$f(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push("stagger() can only be used inside of query()");const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:bI(e.timings,t.errors,!0);return{type:12,animation:Jo(this,xv(e.animation),t),timings:r,options:null}}}class WB{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function MI(n){return!Array.isArray(n)&&"object"==typeof n}function $f(n){return n?(n=mm(n)).params&&(n.params=function GB(n){return n?mm(n):null}(n.params)):n={},n}function LS(n,e,t){return{duration:n,delay:e,easing:t}}function US(n,e,t,r,i,a,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:a,totalTime:i+a,easing:u,subTimeline:h}}class RI{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const QB=new RegExp(":enter","g"),JB=new RegExp(":leave","g");function BS(n,e,t,r,i,a={},u={},h,m,E=[]){return(new e2).buildKeyframes(n,e,t,r,i,a,u,h,m,E)}class e2{buildKeyframes(e,t,r,i,a,u,h,m,E,C=[]){E=E||new RI;const S=new VS(e,t,E,i,a,C,[]);S.options=m,S.currentTimeline.setStyles([u],null,S.errors,m),Jo(this,r,S);const k=S.timelines.filter(B=>B.containsAnimation());if(Object.keys(h).length){let B;for(let j=k.length-1;j>=0;j--){const ne=k[j];if(ne.element===t){B=ne;break}}B&&!B.allowOnlyTimelineStyles()&&B.setStyles([h],null,S.errors,m)}return k.length?k.map(B=>B.buildKeyframes()):[US(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),a=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);a!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,r){let a=t.currentTimeline.currentTime;const u=null!=r.duration?jf(r.duration):null,h=null!=r.delay?jf(r.delay):null;return 0!==u&&e.forEach(m=>{const E=t.appendInstructionToTimeline(m,u,h);a=Math.max(a,E.duration+E.delay)}),a}visitReference(e,t){t.updateOptions(e.options,!0),Jo(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const a=e.options;if(a&&(a.params||a.delay)&&(i=t.createSubContext(a),i.transformIntoNewTimeline(),null!=a.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=xI);const u=jf(a.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Jo(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const a=e.options&&e.options.delay?jf(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);a&&h.delayNextStep(a),Jo(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return bI(t.params?TI(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const a=e.style;5==a.type?this.visitKeyframes(a,t):(t.incrementTime(r.duration),this.visitStyle(a,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.getCurrentStyleProperties().length&&r.forwardFrame();const a=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(a):r.setStyles(e.styles,a,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,a=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(m=>{h.forwardTime((m.offset||0)*a),h.setStyles(m.styles,m.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+a),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},a=i.delay?jf(i.delay):0;a&&(6===t.previousNode.type||0==r&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=xI);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let m=null;h.forEach((E,C)=>{t.currentQueryIndex=C;const S=t.createSubContext(e.options,E);a&&S.delayNextStep(a),E===t.element&&(m=S.currentTimeline),Jo(this,e.animation,S),S.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,S.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),m&&(t.currentTimeline.mergeTimelineCollectedStyles(m),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,a=e.timings,u=Math.abs(a.duration),h=u*(t.currentQueryTotal-1);let m=u*t.currentQueryIndex;switch(a.duration<0?"reverse":a.easing){case"reverse":m=h-m;break;case"full":m=r.currentStaggerTime}const C=t.currentTimeline;m&&C.delayNextStep(m);const S=C.currentTime;Jo(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-S+(i.startTime-r.currentTimeline.startTime)}}const xI={};class VS{constructor(e,t,r,i,a,u,h,m){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=a,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=xI,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new NI(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=jf(r.duration)),null!=r.delay&&(i.delay=jf(r.delay));const a=r.params;if(a){let u=i.params;u||(u=this.options.params={}),Object.keys(a).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=TI(a[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,a=new VS(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return a.previousNode=this.previousNode,a.currentAnimateTimings=this.currentAnimateTimings,a.options=this._copyOptions(),a.updateOptions(e),a.currentQueryIndex=this.currentQueryIndex,a.currentQueryTotal=this.currentQueryTotal,a.parentContext=this,this.subContextCount++,a}transformIntoNewTimeline(e){return this.previousNode=xI,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=r?r:0)+e.delay,easing:""},a=new t2(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(a),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,a,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(QB,"."+this._enterClassName)).replace(JB,"."+this._leaveClassName);let E=this._driver.query(this.element,e,1!=r);0!==r&&(E=r<0?E.slice(E.length+r,E.length):E.slice(0,r)),h.push(...E)}return!a&&0==h.length&&u.push(`\`query("${t}")\` returned zero elements. (Use \`query("${t}", { optional: true })\` if you wish to allow this.)`),h}}class NI{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new NI(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Du,this._currentKeyframe[t]=Du}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&(this._previousKeyframe.easing=t);const a=i&&i.params||{},u=function n2(n,e){const t={};let r;return n.forEach(i=>{"*"===i?(r=r||Object.keys(e),r.forEach(a=>{t[a]=Du})):ah(i,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(u).forEach(h=>{const m=TI(u[h],a,r);this._pendingStyles[h]=m,this._localTimelineStyles.hasOwnProperty(h)||(this._backFill[h]=this._globalTimelineStyles.hasOwnProperty(h)?this._globalTimelineStyles[h]:Du),this._updateStyle(h,m)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(r=>{this._currentKeyframe[r]=e[r]}),Object.keys(this._localTimelineStyles).forEach(r=>{this._currentKeyframe.hasOwnProperty(r)||(this._currentKeyframe[r]=this._localTimelineStyles[r])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const r=this._styleSummary[t],i=e._styleSummary[t];(!r||i.time>r.time)&&this._updateStyle(t,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,m)=>{const E=ah(h,!0);Object.keys(E).forEach(C=>{const S=E[C];"!"==S?e.add(C):S==Du&&t.add(C)}),r||(E.offset=m/this.duration),i.push(E)});const a=e.size?CI(e.values()):[],u=t.size?CI(t.values()):[];if(r){const h=i[0],m=mm(h);h.offset=0,m.offset=1,i=[h,m]}return US(this.element,i,a,u,this.duration,this.startTime,this.easing,!1)}}class t2 extends NI{constructor(e,t,r,i,a,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=a,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const a=[],u=r+t,h=t/u,m=ah(e[0],!1);m.offset=0,a.push(m);const E=ah(e[0],!1);E.offset=vP(h),a.push(E);const C=e.length-1;for(let S=1;S<=C;S++){let k=ah(e[S],!1);k.offset=vP((t+k.offset*r)/u),a.push(k)}r=u,t=0,i="",e=a}return US(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function vP(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class jS{}class r2 extends jS{normalizePropertyName(e,t){return PS(e)}normalizeStyleValue(e,t,r,i){let a="";const u=r.toString().trim();if(i2[t]&&0!==r&&"0"!==r)if("number"==typeof r)a="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(`Please provide a CSS unit value for ${e}:${r}`)}return u+a}}const i2=(()=>function s2(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function EP(n,e,t,r,i,a,u,h,m,E,C,S,k){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:a,toState:r,toStyles:u,timelines:h,queriedElements:m,preStyleProps:E,postStyleProps:C,totalTime:S,errors:k}}const HS={};class wP{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function o2(n,e,t,r,i){return n.some(a=>a(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){const i=this._stateStyles["*"],a=this._stateStyles[e],u=i?i.buildStyles(t,r):{};return a?a.buildStyles(t,r):u}build(e,t,r,i,a,u,h,m,E,C){const S=[],k=this.ast.options&&this.ast.options.params||HS,j=this.buildStyles(r,h&&h.params||HS,S),ne=m&&m.params||HS,we=this.buildStyles(i,ne,S),Qe=new Set,Je=new Map,pt=new Map,Ze="void"===i,qt={params:Object.assign(Object.assign({},k),ne)},bn=C?[]:BS(e,t,this.ast.animation,a,u,j,we,qt,E,S);let rr=0;if(bn.forEach(sa=>{rr=Math.max(sa.duration+sa.delay,rr)}),S.length)return EP(t,this._triggerName,r,i,Ze,j,we,[],[],Je,pt,rr,S);bn.forEach(sa=>{const Hc=sa.element,XU=Te(Je,Hc,{});sa.preStyleProps.forEach(pp=>XU[pp]=!0);const kE=Te(pt,Hc,{});sa.postStyleProps.forEach(pp=>kE[pp]=!0),Hc!==t&&Qe.add(Hc)});const qs=CI(Qe.values());return EP(t,this._triggerName,r,i,Ze,j,we,bn,qs,Je,pt,rr)}}class a2{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r={},i=mm(this.defaultParams);return Object.keys(e).forEach(a=>{const u=e[a];null!=u&&(i[a]=u)}),this.styles.styles.forEach(a=>{if("string"!=typeof a){const u=a;Object.keys(u).forEach(h=>{let m=u[h];m.length>1&&(m=TI(m,i,t));const E=this.normalizer.normalizePropertyName(h,t);m=this.normalizer.normalizeStyleValue(h,E,m,t),r[E]=m})}}),r}}class u2{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states={},t.states.forEach(i=>{this.states[i.name]=new a2(i.style,i.options&&i.options.params||{},r)}),IP(this.states,"true","1"),IP(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new wP(e,i,this.states))}),this.fallbackTransition=function c2(n,e,t){return new wP(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function IP(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const d2=new RI;class h2{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations={},this._playersById={},this.players=[]}register(e,t){const r=[],i=FS(this._driver,t,r);if(r.length)throw new Error(`Unable to build the animation due to the following errors: ${r.join("\n")}`);this._animations[e]=i}_buildPlayer(e,t,r){const i=e.element,a=Ie(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,a,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],a=this._animations[e];let u;const h=new Map;if(a?(u=BS(this._driver,t,a,RS,EI,{},{},r,d2,i),u.forEach(C=>{const S=Te(h,C.element,{});C.postStyleProps.forEach(k=>S[k]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),u=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);h.forEach((C,S)=>{Object.keys(C).forEach(k=>{C[k]=this._driver.computeStyle(S,k,Du)})});const E=Q(u.map(C=>{const S=h.get(C.element);return this._buildPlayer(C,{},S)}));return this._playersById[e]=E,E.onDestroy(()=>this.destroy(e)),this.players.push(E),E}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw new Error(`Unable to find the timeline player referenced by ${e}`);return t}listen(e,t,r,i){const a=Xe(t,"","","");return Ue(this._getPlayer(e),r,a,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const a=this._getPlayer(e);switch(r){case"play":a.play();break;case"pause":a.pause();break;case"reset":a.reset();break;case"restart":a.restart();break;case"finish":a.finish();break;case"init":a.init();break;case"setPosition":a.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const bP="ng-animate-queued",$S="ng-animate-disabled",_2=[],TP={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},y2={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ua="__ng_removed";class qS{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function I2(n){return null!=n?n:null}(r?e.value:e),r){const a=mm(e);delete a.value,this.options=a}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Nv="void",GS=new qS(Nv);class v2{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Ba(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.hasOwnProperty(t))throw new Error(`Unable to listen on the animation trigger event "${r}" because the animation trigger "${t}" doesn't exist!`);if(null==r||0==r.length)throw new Error(`Unable to listen on the animation trigger "${t}" because the provided event is undefined!`);if(!function b2(n){return"start"==n||"done"==n}(r))throw new Error(`The provided animation trigger event "${r}" for the animation trigger "${t}" is not supported!`);const a=Te(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};a.push(u);const h=Te(this._engine.statesByElement,e,{});return h.hasOwnProperty(t)||(Ba(e,wI),Ba(e,wI+"-"+t),h[t]=GS),()=>{this._engine.afterFlush(()=>{const m=a.indexOf(u);m>=0&&a.splice(m,1),this._triggers[t]||delete h[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw new Error(`The provided animation trigger "${e}" has not been registered!`);return t}trigger(e,t,r,i=!0){const a=this._getTrigger(t),u=new WS(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(Ba(e,wI),Ba(e,wI+"-"+t),this._engine.statesByElement.set(e,h={}));let m=h[t];const E=new qS(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&m&&E.absorbOptions(m.options),h[t]=E,m||(m=GS),E.value!==Nv&&m.value===E.value){if(!function D2(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const a=t[i];if(!e.hasOwnProperty(a)||n[a]!==e[a])return!1}return!0}(m.params,E.params)){const ne=[],we=a.matchStyles(m.value,m.params,ne),Qe=a.matchStyles(E.value,E.params,ne);ne.length?this._engine.reportError(ne):this._engine.afterFlush(()=>{Hf(e,we),Su(e,Qe)})}return}const k=Te(this._engine.playersByElement,e,[]);k.forEach(ne=>{ne.namespaceId==this.id&&ne.triggerName==t&&ne.queued&&ne.destroy()});let B=a.matchTransition(m.value,E.value,e,E.params),j=!1;if(!B){if(!i)return;B=a.fallbackTransition,j=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:B,fromState:m,toState:E,player:u,isFallbackTransition:j}),j||(Ba(e,bP),u.onStart(()=>{_m(e,bP)})),u.onDone(()=>{let ne=this.players.indexOf(u);ne>=0&&this.players.splice(ne,1);const we=this._engine.playersByElement.get(e);if(we){let Qe=we.indexOf(u);Qe>=0&&we.splice(Qe,1)}}),this.players.push(u),k.push(u),u}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,r)=>{delete t[e]}),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,II,!0);r.forEach(i=>{if(i[Ua])return;const a=this._engine.fetchNamespacesByElement(i);a.size?a.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const a=this._engine.statesByElement.get(e),u=new Map;if(a){const h=[];if(Object.keys(a).forEach(m=>{if(u.set(m,a[m].value),this._triggers[m]){const E=this.trigger(e,m,Nv,i);E&&h.push(E)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Q(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(a=>{const u=a.name;if(i.has(u))return;i.add(u);const m=this._triggers[u].fallbackTransition,E=r[u]||GS,C=new qS(Nv),S=new WS(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:m,fromState:E,toState:C,player:S,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const a=r.players.length?r.playersByQueriedElement.get(e):[];if(a&&a.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const a=e[Ua];(!a||a===TP)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){Ba(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const a=r.element,u=this._elementListeners.get(a);u&&u.forEach(h=>{if(h.name==r.triggerName){const m=Xe(a,r.triggerName,r.fromState.value,r.toState.value);m._data=e,Ue(r.player,h.phase,m,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const a=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==a||0==u?a-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class E2{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,a)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new v2(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList.length-1;if(r>=0){let i=!1;for(let a=r;a>=0;a--)if(this.driver.containsElement(this._namespaceList[a].hostElement,t)){this._namespaceList.splice(a+1,0,e),i=!0;break}i||this._namespaceList.splice(0,0,e)}else this._namespaceList.push(e);return this.namespacesByHostElement.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r){const i=Object.keys(r);for(let a=0;a<i.length;a++){const u=r[i[a]].namespaceId;if(u){const h=this._fetchNamespace(u);h&&t.add(h)}}}return t}trigger(e,t,r,i){if(kI(t)){const a=this._fetchNamespace(e);if(a)return a.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!kI(t))return;const a=t[Ua];if(a&&a.setForRemoval){a.setForRemoval=!1,a.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Ba(e,$S)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),_m(e,$S))}removeNode(e,t,r,i){if(kI(t)){const a=e?this._fetchNamespace(e):null;if(a?a.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,a){this.collectedLeaveElements.push(t),t[Ua]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:a}}listen(e,t,r,i,a){return kI(t)?this._fetchNamespace(e).listen(t,r,i,a):()=>{}}_buildInstruction(e,t,r,i,a){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,a)}destroyInnerAnimations(e){let t=this.driver.query(e,II,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,xS,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Q(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const r=e[Ua];if(r&&r.setForRemoval){if(e[Ua]=TP,r.namespaceId){this.destroyInnerAnimations(e);const i=this._fetchNamespace(r.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,r.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains($S))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)Ba(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Q(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${e.join("\n")}`)}_flushAnimations(e,t){const r=new RI,i=[],a=new Map,u=[],h=new Map,m=new Map,E=new Map,C=new Set;this.disabledNodes.forEach(st=>{C.add(st);const vt=this.driver.query(st,".ng-animate-queued",!0);for(let bt=0;bt<vt.length;bt++)C.add(vt[bt])});const S=this.bodyNode,k=Array.from(this.statesByElement.keys()),B=SP(k,this.collectedEnterElements),j=new Map;let ne=0;B.forEach((st,vt)=>{const bt=RS+ne++;j.set(vt,bt),st.forEach(ln=>Ba(ln,bt))});const we=[],Qe=new Set,Je=new Set;for(let st=0;st<this.collectedLeaveElements.length;st++){const vt=this.collectedLeaveElements[st],bt=vt[Ua];bt&&bt.setForRemoval&&(we.push(vt),Qe.add(vt),bt.hasAnimation?this.driver.query(vt,".ng-star-inserted",!0).forEach(ln=>Qe.add(ln)):Je.add(vt))}const pt=new Map,Ze=SP(k,Array.from(Qe));Ze.forEach((st,vt)=>{const bt=EI+ne++;pt.set(vt,bt),st.forEach(ln=>Ba(ln,bt))}),e.push(()=>{B.forEach((st,vt)=>{const bt=j.get(vt);st.forEach(ln=>_m(ln,bt))}),Ze.forEach((st,vt)=>{const bt=pt.get(vt);st.forEach(ln=>_m(ln,bt))}),we.forEach(st=>{this.processLeaveNode(st)})});const qt=[],bn=[];for(let st=this._namespaceList.length-1;st>=0;st--)this._namespaceList[st].drainQueuedTransitions(t).forEach(bt=>{const ln=bt.player,bi=bt.element;if(qt.push(ln),this.collectedEnterElements.length){const Gs=bi[Ua];if(Gs&&Gs.setForMove){if(Gs.previousTriggersValues&&Gs.previousTriggersValues.has(bt.triggerName)){const gp=Gs.previousTriggersValues.get(bt.triggerName),Ch=this.statesByElement.get(bt.element);Ch&&Ch[bt.triggerName]&&(Ch[bt.triggerName].value=gp)}return void ln.destroy()}}const Fu=!S||!this.driver.containsElement(S,bi),oa=pt.get(bi),Th=j.get(bi),ur=this._buildInstruction(bt,r,Th,oa,Fu);if(ur.errors&&ur.errors.length)return void bn.push(ur);if(Fu)return ln.onStart(()=>Hf(bi,ur.fromStyles)),ln.onDestroy(()=>Su(bi,ur.toStyles)),void i.push(ln);if(bt.isFallbackTransition)return ln.onStart(()=>Hf(bi,ur.fromStyles)),ln.onDestroy(()=>Su(bi,ur.toStyles)),void i.push(ln);const tB=[];ur.timelines.forEach(Gs=>{Gs.stretchStartingKeyframe=!0,this.disabledNodes.has(Gs.element)||tB.push(Gs)}),ur.timelines=tB,r.append(bi,ur.timelines),u.push({instruction:ur,player:ln,element:bi}),ur.queriedElements.forEach(Gs=>Te(h,Gs,[]).push(ln)),ur.preStyleProps.forEach((Gs,gp)=>{const Ch=Object.keys(Gs);if(Ch.length){let mp=m.get(gp);mp||m.set(gp,mp=new Set),Ch.forEach(ux=>mp.add(ux))}}),ur.postStyleProps.forEach((Gs,gp)=>{const Ch=Object.keys(Gs);let mp=E.get(gp);mp||E.set(gp,mp=new Set),Ch.forEach(ux=>mp.add(ux))})});if(bn.length){const st=[];bn.forEach(vt=>{st.push(`@${vt.triggerName} has failed due to:\n`),vt.errors.forEach(bt=>st.push(`- ${bt}\n`))}),qt.forEach(vt=>vt.destroy()),this.reportError(st)}const rr=new Map,qs=new Map;u.forEach(st=>{const vt=st.element;r.has(vt)&&(qs.set(vt,vt),this._beforeAnimationBuild(st.player.namespaceId,st.instruction,rr))}),i.forEach(st=>{const vt=st.element;this._getPreviousPlayers(vt,!1,st.namespaceId,st.triggerName,null).forEach(ln=>{Te(rr,vt,[]).push(ln),ln.destroy()})});const sa=we.filter(st=>MP(st,m,E)),Hc=new Map;DP(Hc,this.driver,Je,E,Du).forEach(st=>{MP(st,m,E)&&sa.push(st)});const kE=new Map;B.forEach((st,vt)=>{DP(kE,this.driver,new Set(st),m,"!")}),sa.forEach(st=>{const vt=Hc.get(st),bt=kE.get(st);Hc.set(st,Object.assign(Object.assign({},vt),bt))});const pp=[],JU=[],eB={};u.forEach(st=>{const{element:vt,player:bt,instruction:ln}=st;if(r.has(vt)){if(C.has(vt))return bt.onDestroy(()=>Su(vt,ln.toStyles)),bt.disabled=!0,bt.overrideTotalTime(ln.totalTime),void i.push(bt);let bi=eB;if(qs.size>1){let oa=vt;const Th=[];for(;oa=oa.parentNode;){const ur=qs.get(oa);if(ur){bi=ur;break}Th.push(oa)}Th.forEach(ur=>qs.set(ur,bi))}const Fu=this._buildAnimation(bt.namespaceId,ln,rr,a,kE,Hc);if(bt.setRealPlayer(Fu),bi===eB)pp.push(bt);else{const oa=this.playersByElement.get(bi);oa&&oa.length&&(bt.parentPlayer=Q(oa)),i.push(bt)}}else Hf(vt,ln.fromStyles),bt.onDestroy(()=>Su(vt,ln.toStyles)),JU.push(bt),C.has(vt)&&i.push(bt)}),JU.forEach(st=>{const vt=a.get(st.element);if(vt&&vt.length){const bt=Q(vt);st.setRealPlayer(bt)}}),i.forEach(st=>{st.parentPlayer?st.syncPlayerEvents(st.parentPlayer):st.destroy()});for(let st=0;st<we.length;st++){const vt=we[st],bt=vt[Ua];if(_m(vt,EI),bt&&bt.hasAnimation)continue;let ln=[];if(h.size){let Fu=h.get(vt);Fu&&Fu.length&&ln.push(...Fu);let oa=this.driver.query(vt,xS,!0);for(let Th=0;Th<oa.length;Th++){let ur=h.get(oa[Th]);ur&&ur.length&&ln.push(...ur)}}const bi=ln.filter(Fu=>!Fu.destroyed);bi.length?T2(this,vt,bi):this.processLeaveNode(vt)}return we.length=0,pp.forEach(st=>{this.players.push(st),st.onDone(()=>{st.destroy();const vt=this.players.indexOf(st);this.players.splice(vt,1)}),st.play()}),pp}elementContainsData(e,t){let r=!1;const i=t[Ua];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,a){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const m=!a||a==Nv;h.forEach(E=>{E.queued||!m&&E.triggerName!=i||u.push(E)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const a=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const m of t.timelines){const E=m.element,C=E!==a,S=Te(r,E,[]);this._getPreviousPlayers(E,C,u,h,t.toState).forEach(B=>{const j=B.getRealPlayer();j.beforeDestroy&&j.beforeDestroy(),B.destroy(),S.push(B)})}Hf(a,t.fromStyles)}_buildAnimation(e,t,r,i,a,u){const h=t.triggerName,m=t.element,E=[],C=new Set,S=new Set,k=t.timelines.map(j=>{const ne=j.element;C.add(ne);const we=ne[Ua];if(we&&we.removedBeforeQueried)return new b(j.duration,j.delay);const Qe=ne!==m,Je=function C2(n){const e=[];return AP(n,e),e}((r.get(ne)||_2).map(rr=>rr.getRealPlayer())).filter(rr=>!!rr.element&&rr.element===ne),pt=a.get(ne),Ze=u.get(ne),qt=Ie(0,this._normalizer,0,j.keyframes,pt,Ze),bn=this._buildPlayer(j,qt,Je);if(j.subTimeline&&i&&S.add(ne),Qe){const rr=new WS(e,h,ne);rr.setRealPlayer(bn),E.push(rr)}return bn});E.forEach(j=>{Te(this.playersByQueriedElement,j.element,[]).push(j),j.onDone(()=>function w2(n,e,t){let r;if(n instanceof Map){if(r=n.get(e),r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}}else if(r=n[e],r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&delete n[e]}return r}(this.playersByQueriedElement,j.element,j))}),C.forEach(j=>Ba(j,uP));const B=Q(k);return B.onDestroy(()=>{C.forEach(j=>_m(j,uP)),Su(m,t.toStyles)}),S.forEach(j=>{Te(i,j,[]).push(B)}),B}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new b(e.duration,e.delay)}}class WS{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new b,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(r=>Ue(e,t,void 0,r))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Te(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function kI(n){return n&&1===n.nodeType}function CP(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function DP(n,e,t,r,i){const a=[];t.forEach(m=>a.push(CP(m)));const u=[];r.forEach((m,E)=>{const C={};m.forEach(S=>{const k=C[S]=e.computeStyle(E,S,i);(!k||0==k.length)&&(E[Ua]=y2,u.push(E))}),n.set(E,C)});let h=0;return t.forEach(m=>CP(m,a[h++])),u}function SP(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),a=new Map;function u(h){if(!h)return 1;let m=a.get(h);if(m)return m;const E=h.parentNode;return m=t.has(E)?E:i.has(E)?1:u(E),a.set(h,m),m}return e.forEach(h=>{const m=u(h);1!==m&&t.get(m).push(h)}),t}function Ba(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function _m(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function T2(n,e,t){Q(t).onDone(()=>n.processLeaveNode(e))}function AP(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof M?AP(r.players,e):e.push(r)}}function MP(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(a=>i.add(a)):e.set(n,r),t.delete(n),!0}class PI{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,a)=>{},this._transitionEngine=new E2(e,t,r),this._timelineEngine=new h2(e,t,r),this._transitionEngine.onRemovalComplete=(i,a)=>this.onRemovalComplete(i,a)}registerTrigger(e,t,r,i,a){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const m=[],E=FS(this._driver,a,m);if(m.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${m.join("\n - ")}`);h=function l2(n,e,t){return new u2(n,e,t)}(i,E,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[a,u]=ht(r);this._timelineEngine.command(a,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,a){if("@"==r.charAt(0)){const[u,h]=ht(r);return this._timelineEngine.listen(u,t,h,a)}return this._transitionEngine.listen(e,t,r,i,a)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function RP(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=zS(e[0]),e.length>1&&(r=zS(e[e.length-1]))):e&&(t=zS(e)),t||r?new S2(n,t,r):null}let S2=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let a=n.initialStylesByElement.get(t);a||n.initialStylesByElement.set(t,a={}),this._initialStyles=a}start(){this._state<1&&(this._startStyles&&Su(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Su(this._element,this._initialStyles),this._endStyles&&(Su(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Hf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Hf(this._element,this._endStyles),this._endStyles=null),Su(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function zS(n){let e=null;const t=Object.keys(n);for(let r=0;r<t.length;r++){const i=t[r];A2(i)&&(e=e||{},e[i]=n[i])}return e}function A2(n){return"display"===n||"position"===n}const xP="animation",NP="animationend";class x2{constructor(e,t,r,i,a,u,h){this._element=e,this._name=t,this._duration=r,this._delay=i,this._easing=a,this._fillMode=u,this._onDoneFn=h,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=m=>this._handleCallback(m)}apply(){(function N2(n,e){const t=ZS(n,"").trim();let r=0;t.length&&(r=function P2(n,e){let t=0;for(let r=0;r<n.length;r++)n.charAt(r)===e&&t++;return t}(t,",")+1,e=`${t}, ${e}`),OI(n,"",e)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),OP(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){kP(this._element,this._name,"paused")}resume(){kP(this._element,this._name,"running")}setPosition(e){const t=PP(this._element,this._name);this._position=e*this._duration,OI(this._element,"Delay",`-${this._position}ms`,t)}getPosition(){return this._position}_handleCallback(e){const t=e._ngTestManualTimestamp||Date.now(),r=1e3*parseFloat(e.elapsedTime.toFixed(3));e.animationName==this._name&&Math.max(t-this._startTime,0)>=this._delay&&r>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),OP(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function k2(n,e){const r=ZS(n,"").split(","),i=KS(r,e);i>=0&&(r.splice(i,1),OI(n,"",r.join(",")))}(this._element,this._name))}}function kP(n,e,t){OI(n,"PlayState",t,PP(n,e))}function PP(n,e){const t=ZS(n,"");return t.indexOf(",")>0?KS(t.split(","),e):KS([t],e)}function KS(n,e){for(let t=0;t<n.length;t++)if(n[t].indexOf(e)>=0)return t;return-1}function OP(n,e,t){t?n.removeEventListener(NP,e):n.addEventListener(NP,e)}function OI(n,e,t,r){const i=xP+e;if(null!=r){const a=n.style[i];if(a.length){const u=a.split(",");u[r]=t,t=u.join(",")}}n.style[i]=t}function ZS(n,e){return n.style[xP+e]||""}class FP{constructor(e,t,r,i,a,u,h,m){this.element=e,this.keyframes=t,this.animationName=r,this._duration=i,this._delay=a,this._finalStyles=h,this._specialStyles=m,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=u||"linear",this.totalTime=i+a,this._buildStyler()}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(e=>e()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(e){this._styler.setPosition(e)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new x2(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}beforeDestroy(){this.init();const e={};if(this.hasStarted()){const t=this._state>=3;Object.keys(this._finalStyles).forEach(r=>{"offset"!=r&&(e[r]=t?this._finalStyles[r]:OS(this.element,r))})}this.currentSnapshot=e}}class L2 extends b{constructor(e,t){super(),this.element=e,this._startingStyles={},this.__initialized=!1,this._styles=pm(t)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(e=>{this._startingStyles[e]=this.element.style[e]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(e=>this.element.style.setProperty(e,this._styles[e])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(e=>{const t=this._startingStyles[e];t?this.element.style.setProperty(e,t):this.element.style.removeProperty(e)}),this._startingStyles=null,super.destroy())}}class UP{constructor(){this._count=0}validateStyleProperty(e){return Lf(e)}matchesElement(e,t){return!1}containsElement(e,t){return Uf(e,t)}query(e,t,r){return Bf(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}buildKeyframeElement(e,t,r){r=r.map(h=>pm(h));let i=`@keyframes ${t} {\n`,a="";r.forEach(h=>{a=" ";const m=parseFloat(h.offset);i+=`${a}${100*m}% {\n`,a+=" ",Object.keys(h).forEach(E=>{const C=h[E];switch(E){case"offset":return;case"easing":return void(C&&(i+=`${a}animation-timing-function: ${C};\n`));default:return void(i+=`${a}${E}: ${C};\n`)}}),i+=`${a}}\n`}),i+="}\n";const u=document.createElement("style");return u.textContent=i,u}animate(e,t,r,i,a,u=[],h){const m=u.filter(we=>we instanceof FP),E={};pP(r,i)&&m.forEach(we=>{let Qe=we.currentSnapshot;Object.keys(Qe).forEach(Je=>E[Je]=Qe[Je])});const C=function V2(n){let e={};return n&&(Array.isArray(n)?n:[n]).forEach(r=>{Object.keys(r).forEach(i=>{"offset"==i||"easing"==i||(e[i]=r[i])})}),e}(t=gP(e,t,E));if(0==r)return new L2(e,C);const S="gen_css_kf_"+this._count++,k=this.buildKeyframeElement(e,S,t);(function B2(n){var e;const t=null===(e=n.getRootNode)||void 0===e?void 0:e.call(n);return"undefined"!=typeof ShadowRoot&&t instanceof ShadowRoot?t:document.head})(e).appendChild(k);const j=RP(e,t),ne=new FP(e,t,S,r,i,a,C,j);return ne.onDestroy(()=>function j2(n){n.parentNode.removeChild(n)}(k)),ne}}class VP{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,r){return e.animate(t,r)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(r=>{"offset"!=r&&(e[r]=this._finished?t[r]:OS(this.element,r))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class H2{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(jP().toString()),this._cssKeyframesDriver=new UP}validateStyleProperty(e){return Lf(e)}matchesElement(e,t){return!1}containsElement(e,t){return Uf(e,t)}query(e,t,r){return Bf(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}overrideWebAnimationsSupport(e){this._isNativeImpl=e}animate(e,t,r,i,a,u=[],h){if(!h&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(e,t,r,i,a,u);const C={duration:r,delay:i,fill:0==i?"both":"forwards"};a&&(C.easing=a);const S={},k=u.filter(j=>j instanceof VP);pP(r,i)&&k.forEach(j=>{let ne=j.currentSnapshot;Object.keys(ne).forEach(we=>S[we]=ne[we])});const B=RP(e,t=gP(e,t=t.map(j=>ah(j,!1)),S));return new VP(e,t,C,B)}}function jP(){return U()&&Element.prototype.animate||{}}let q2=(()=>{class n extends SS{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:y.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?AS(t):t;return HP(this._renderer,null,r,"register",[i]),new G2(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.FYo),y.LFG(ie))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class G2 extends class oP{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new W2(this._id,e,t||{},this._renderer)}}class W2{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return HP(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function HP(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const $P="@.disabled";let z2=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(a,u)=>{const h=null==u?void 0:u.parentNode(a);h&&u.removeChild(h,a)}}createRenderer(t,r){const a=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let C=this._rendererCache.get(a);return C||(C=new qP("",a,this.engine),this._rendererCache.set(a,C)),C}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const m=C=>{Array.isArray(C)?C.forEach(m):this.engine.registerTrigger(u,h,t,C.name,C)};return r.data.animation.forEach(m),new K2(this,h,a,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(a=>{const[u,h]=a;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.FYo),y.LFG(PI),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class qP{constructor(e,t,r){this.namespaceId=e,this.delegate=t,this.engine=r,this.destroyNode=this.delegate.destroyNode?i=>t.destroyNode(i):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==$P?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class K2 extends qP{constructor(e,t,r,i){super(t,r,i),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==$P?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.substr(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Z2(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let a=t.substr(1),u="";return"@"!=a.charAt(0)&&([a,u]=function Y2(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(a)),this.engine.listen(this.namespaceId,i,a,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let Q2=(()=>{class n extends PI{constructor(t,r,i){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ie),y.LFG(Vf),y.LFG(jS))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const YS=new y.OlP("AnimationModuleType"),GP=[{provide:SS,useClass:q2},{provide:jS,useFactory:function J2(){return new r2}},{provide:PI,useClass:Q2},{provide:y.FYo,useFactory:function eV(n,e,t){return new z2(n,e,t)},deps:[Tn,PI,y.R0b]}],WP=[{provide:Vf,useFactory:function X2(){return function $2(){return"function"==typeof jP()}()?new H2:new UP}},{provide:YS,useValue:"BrowserAnimations"},...GP],tV=[{provide:Vf,useClass:gm},{provide:YS,useValue:"NoopAnimations"},...GP];let nV=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?tV:WP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:WP,imports:[Gl]}),n})();const rV=["*",[["mat-card-footer"]]],iV=["*","mat-card-footer"],sV=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],oV=["[mat-card-avatar], [matCardAvatar]","mat-card-title, mat-card-subtitle,\n      [mat-card-title], [mat-card-subtitle],\n      [matCardTitle], [matCardSubtitle]","*"];let aV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=y.lG2({type:n,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-card-title"]}),n})(),lV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=y.lG2({type:n,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-card-subtitle"]}),n})(),uV=(()=>{class n{constructor(){this.align="start"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=y.lG2({type:n,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-card-actions"],hostVars:2,hostBindings:function(t,r){2&t&&y.ekj("mat-card-actions-align-end","end"===r.align)},inputs:{align:"align"},exportAs:["matCardActions"]}),n})(),cV=(()=>{class n{constructor(t){this._animationMode=t}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(YS,8))},n.\u0275cmp=y.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(t,r){2&t&&y.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)},exportAs:["matCard"],ngContentSelectors:iV,decls:2,vars:0,template:function(t,r){1&t&&(y.F$t(rV),y.Hsn(0),y.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),dV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-card-header"],ngContentSelectors:oV,decls:4,vars:0,consts:[[1,"mat-card-header-text"]],template:function(t,r){1&t&&(y.F$t(sV),y.Hsn(0),y.TgZ(1,"div",0),y.Hsn(2,1),y.qZA(),y.Hsn(3,2))},encapsulation:2,changeDetection:0}),n})(),hV=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[[sh],sh]}),n})(),fV=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-helplineitem"]],inputs:{senderName:"senderName",senderEmail:"senderEmail",mode:"mode",operator:"operator",ooperatorEmail:"ooperatorEmail",issueType:"issueType",message:"message",timestamp:"timestamp",key:"key"},decls:33,vars:6,consts:[[1,"custom"],[1,"mat-card-header"],[1,"horizontal"],[1,"label"],["mat-button",""]],template:function(t,r){1&t&&(y.TgZ(0,"mat-card",0),y.TgZ(1,"mat-card-header",1),y.TgZ(2,"mat-card-title"),y._uU(3),y.qZA(),y.TgZ(4,"mat-card-subtitle"),y._uU(5),y.qZA(),y.qZA(),y.TgZ(6,"div"),y.TgZ(7,"div",2),y.TgZ(8,"p",3),y._uU(9,"Sender: "),y.qZA(),y.TgZ(10,"p"),y._uU(11),y.qZA(),y.qZA(),y.TgZ(12,"div",2),y.TgZ(13,"p",3),y._uU(14,"Email: "),y.qZA(),y.TgZ(15,"p"),y._uU(16),y.qZA(),y.qZA(),y.TgZ(17,"div",2),y.TgZ(18,"p",3),y._uU(19,"Time: "),y.qZA(),y.TgZ(20,"p"),y._uU(21),y.qZA(),y.qZA(),y.TgZ(22,"div",2),y.TgZ(23,"p",3),y._uU(24,"Content: "),y.qZA(),y.TgZ(25,"p"),y._uU(26),y.qZA(),y.qZA(),y.qZA(),y.TgZ(27,"mat-card-actions"),y.TgZ(28,"button",4),y._uU(29,"Mark as resolved"),y.qZA(),y.TgZ(30,"button",4),y._uU(31,"Delete"),y.qZA(),y.qZA(),y.qZA(),y._UZ(32,"br")),2&t&&(y.xp6(3),y.Oqu(r.issueType),y.xp6(2),y.Oqu(r.mode),y.xp6(6),y.hij(" ",r.senderName,""),y.xp6(5),y.hij(" ",r.senderEmail,""),y.xp6(5),y.hij(" ",r.timestamp,""),y.xp6(5),y.hij(" ",r.message,""))},directives:[cV,dV,aV,lV,uV],styles:[".custom.mat-card[_ngcontent-%COMP%]{margin:20px 20px 0}.horizontal[_ngcontent-%COMP%]{display:flex}.label[_ngcontent-%COMP%]{margin-left:30px;margin-right:5px;font-style:bold}.mat-card-header[_ngcontent-%COMP%]{background-color:#006a4e;padding-top:20px}"]}),n})();function pV(n,e){if(1&n&&(y.TgZ(0,"li",2),y.TgZ(1,"div",3),y._UZ(2,"app-helplineitem",4),y.qZA(),y.qZA()),2&n){const t=e.$implicit;y.xp6(2),y.s9C("senderName",t.senderName),y.s9C("senderEmail",t.senderEmail),y.s9C("mode",t.mode),y.s9C("issueType",t.issueType),y.s9C("operator",t.operator),y.s9C("ooperatorEmail",t.ooperatorEmail),y.s9C("message",t.message),y.s9C("timestamp",t.timestamp)}}let gV=(()=>{class n{constructor(t){this.title="helpline",this.items=t.list("Helpline/received").valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(_w))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:3,consts:[["color","green"],["class","text",4,"ngFor","ngForOf"],[1,"text"],[1,""],[3,"senderName","senderEmail","mode","issueType","operator","ooperatorEmail","message","timestamp"]],template:function(t,r){1&t&&(y.TgZ(0,"mat-toolbar",0),y.TgZ(1,"mat-icon"),y._uU(2,"local_fire_department"),y.qZA(),y.TgZ(3,"span"),y._uU(4,"Atlas User Helpline"),y.qZA(),y.qZA(),y.YNc(5,pV,3,8,"li",1),y.ALo(6,"async")),2&t&&(y.xp6(5),y.Q6J("ngForOf",y.lcZ(6,1,r.items)))},directives:[ZD,DS,Fn,fV],pipes:[Lu],encapsulation:2}),n})();var mV=F(8189);function zP(...n){return function _V(){return(0,mV.J)(1)}()((0,Pn.D)(n,(0,Un.yG)(n)))}function QS(...n){const e=(0,Un.yG)(n);return(0,wr.e)((t,r)=>{(e?zP(n,t,e):zP(n,t)).subscribe(r)})}function XS(){return(0,wr.e)((n,e)=>{let t,r=!1;n.subscribe(new Rn.Q(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}var rt,yV="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xc={},JS=JS||{},Mt=yV||self;function LI(){}function eA(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function kv(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var tA="closure_uid_"+(1e9*Math.random()>>>0),EV=0;function wV(n,e,t){return n.call.apply(n.bind,arguments)}function IV(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function ki(n,e,t){return(ki=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wV:IV).apply(null,arguments)}function UI(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pi(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function lh(){this.s=this.s,this.o=this.o}var TV={};lh.prototype.s=!1,lh.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function vV(n){return Object.prototype.hasOwnProperty.call(n,tA)&&n[tA]||(n[tA]=++EV)}(this);delete TV[n]}},lh.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const KP=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},ZP=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function YP(n){return Array.prototype.concat.apply([],arguments)}function nA(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function BI(n){return/^[\s\xa0]*$/.test(n)}var Ls,QP=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Fs(n,e){return-1!=n.indexOf(e)}function rA(n,e){return n<e?-1:n>e?1:0}e:{var XP=Mt.navigator;if(XP){var JP=XP.userAgent;if(JP){Ls=JP;break e}}Ls=""}function iA(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function eO(n){const e={};for(const t in n)e[t]=n[t];return e}var tO="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function nO(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<tO.length;a++)t=tO[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function sA(n){return sA[" "](n),n}sA[" "]=LI;var VI,n,SV=Fs(Ls,"Opera"),ym=Fs(Ls,"Trident")||Fs(Ls,"MSIE"),rO=Fs(Ls,"Edge"),oA=rO||ym,iO=Fs(Ls,"Gecko")&&!(Fs(Ls.toLowerCase(),"webkit")&&!Fs(Ls,"Edge"))&&!(Fs(Ls,"Trident")||Fs(Ls,"MSIE"))&&!Fs(Ls,"Edge"),AV=Fs(Ls.toLowerCase(),"webkit")&&!Fs(Ls,"Edge");function sO(){var n=Mt.document;return n?n.documentMode:void 0}e:{var aA="",lA=(n=Ls,iO?/rv:([^\);]+)(\)|;)/.exec(n):rO?/Edge\/([\d\.]+)/.exec(n):ym?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):AV?/WebKit\/(\S+)/.exec(n):SV?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(lA&&(aA=lA?lA[1]:""),ym){var uA=sO();if(null!=uA&&uA>parseFloat(aA)){VI=String(uA);break e}}VI=aA}var MV={};var xV=Mt.document&&ym&&(sO()||parseInt(VI,10))||void 0,NV=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",LI,e),Mt.removeEventListener("test",LI,e)}catch(t){}return n}();function rs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function Pv(n,e){if(rs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(iO){e:{try{sA(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kV[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pv.Z.h.call(this)}}rs.prototype.h=function(){this.defaultPrevented=!0},Pi(Pv,rs);var kV={2:"touch",3:"pen",4:"mouse"};Pv.prototype.h=function(){Pv.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ov="closure_listenable_"+(1e6*Math.random()|0),PV=0;function OV(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++PV,this.ca=this.fa=!1}function jI(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function HI(n){this.src=n,this.g={},this.h=0}function dA(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=KP(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(jI(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function hA(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}HI.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var u=hA(n,e,r,i);return-1<u?(e=n[u],t||(e.fa=!1)):((e=new OV(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var fA="closure_lm_"+(1e6*Math.random()|0),pA={};function aO(n,e,t,r,i){if(r&&r.once)return uO(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)aO(n,e[a],t,r,i);return null}return t=yA(t),n&&n[Ov]?n.N(e,t,kv(r)?!!r.capture:!!r,i):lO(n,e,t,!1,r,i)}function lO(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var u=kv(i)?!!i.capture:!!i,h=mA(n);if(h||(n[fA]=h=new HI(n)),(t=h.add(e,t,r,u,a)).proxy)return t;if(r=function FV(){var e=LV;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)NV||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(dO(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function uO(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)uO(n,e[a],t,r,i);return null}return t=yA(t),n&&n[Ov]?n.O(e,t,kv(r)?!!r.capture:!!r,i):lO(n,e,t,!0,r,i)}function cO(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)cO(n,e[a],t,r,i);else r=kv(r)?!!r.capture:!!r,t=yA(t),n&&n[Ov]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=hA(a=n.g[e],t,r,i))&&(jI(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=mA(n))&&(e=n.g[e.toString()],n=-1,e&&(n=hA(e,t,r,i)),(t=-1<n?e[n]:null)&&gA(t))}function gA(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ov])dA(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(dO(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=mA(e))?(dA(t,n),0==t.h&&(t.src=null,e[fA]=null)):jI(n)}}}function dO(n){return n in pA?pA[n]:pA[n]="on"+n}function LV(n,e){if(n.ca)n=!0;else{e=new Pv(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&gA(n),n=t.call(r,e)}return n}function mA(n){return(n=n[fA])instanceof HI?n:null}var _A="__closure_events_fn_"+(1e9*Math.random()>>>0);function yA(n){return"function"==typeof n?n:(n[_A]||(n[_A]=function(e){return n.handleEvent(e)}),n[_A])}function yi(){lh.call(this),this.i=new HI(this),this.P=this,this.I=null}function Oi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new rs(e,n);else if(e instanceof rs)e.target=e.target||n;else{var i=e;nO(e=new rs(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var u=e.g=t[a];i=$I(u,r,!0,e)&&i}if(i=$I(u=e.g=n,r,!0,e)&&i,i=$I(u,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=$I(u=e.g=t[a],r,!1,e)&&i}function $I(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var u=e[a];if(u&&!u.ca&&u.capture==t){var h=u.listener,m=u.ia||u.src;u.fa&&dA(n.i,u),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Pi(yi,lh),yi.prototype[Ov]=!0,yi.prototype.removeEventListener=function(n,e,t,r){cO(this,n,e,t,r)},yi.prototype.M=function(){if(yi.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jI(t[r]);delete n.g[e],n.h--}}this.I=null},yi.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vA=Mt.JSON.stringify;function UV(){var n=fO;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var wA,hO=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new VV,n=>n.reset());class VV{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function jV(n){Mt.setTimeout(()=>{throw n},0)}function EA(n,e){wA||function HV(){var n=Mt.Promise.resolve(void 0);wA=function(){n.then($V)}}(),IA||(wA(),IA=!0),fO.add(n,e)}var IA=!1,fO=new class BV{constructor(){this.h=this.g=null}add(e,t){const r=hO.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function $V(){for(var n;n=UV();){try{n.h.call(n.g)}catch(t){jV(t)}var e=hO;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}IA=!1}function qI(n,e){yi.call(this),this.h=n||1,this.g=e||Mt,this.j=ki(this.kb,this),this.l=Date.now()}function bA(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function TA(n,e,t){if("function"==typeof n)t&&(n=ki(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=ki(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function pO(n){n.g=TA(()=>{n.g=null,n.i&&(n.i=!1,pO(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Pi(qI,yi),(rt=qI.prototype).da=!1,rt.S=null,rt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Oi(this,"tick"),this.da&&(bA(this),this.start()))}},rt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},rt.M=function(){qI.Z.M.call(this),bA(this),delete this.g};class qV extends lh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pO(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fv(n){lh.call(this),this.h=n,this.g={}}Pi(Fv,lh);var gO=[];function mO(n,e,t,r){Array.isArray(t)||(t&&(gO[0]=t.toString()),t=gO);for(var i=0;i<t.length;i++){var a=aO(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function _O(n){iA(n.g,function(e,t){this.g.hasOwnProperty(t)&&gA(e)},n),n.g={}}function GI(){this.g=!0}function vm(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function KV(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var u=1;u<i.length;u++)i[u]=""}}}return vA(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Fv.prototype.M=function(){Fv.Z.M.call(this),_O(this)},Fv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},GI.prototype.Aa=function(){this.g=!1},GI.prototype.info=function(){};var qf={},yO=null;function WI(){return yO=yO||new yi}function vO(n){rs.call(this,qf.Ma,n)}function Lv(n){const e=WI();Oi(e,new vO(e,n))}function EO(n,e){rs.call(this,qf.STAT_EVENT,n),this.stat=e}function Us(n){const e=WI();Oi(e,new EO(e,n))}function wO(n,e){rs.call(this,qf.Na,n),this.size=e}function Uv(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}qf.Ma="serverreachability",Pi(vO,rs),qf.STAT_EVENT="statevent",Pi(EO,rs),qf.Na="timingevent",Pi(wO,rs);var zI={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},IO={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function CA(){}function TO(){}CA.prototype.h=null;var AA,Bv={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function DA(){rs.call(this,"d")}function SA(){rs.call(this,"c")}function KI(){}function Vv(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Fv(this),this.P=ZV,this.W=new qI(n=oA?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new CO}function CO(){this.i=null,this.g="",this.h=!1}Pi(DA,rs),Pi(SA,rs),Pi(KI,CA),KI.prototype.g=function(){return new XMLHttpRequest},KI.prototype.i=function(){return{}},AA=new KI;var ZV=45e3,MA={},ZI={};function RA(n,e,t){n.K=1,n.v=eb(Nc(e)),n.s=t,n.U=!0,DO(n,null)}function DO(n,e){n.F=Date.now(),jv(n),n.A=Nc(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),OO(t.h,"t",r),n.C=0,t=n.l.H,n.h=new CO,n.g=s1(n.l,t?e:null,!n.s),0<n.O&&(n.L=new qV(ki(n.Ia,n,n.g),n.O)),mO(n.V,n.g,"readystatechange",n.gb),e=n.H?eO(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Lv(1),function GV(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var u="",h=a.split("&"),m=0;m<h.length;m++){var E=h[m].split("=");if(1<E.length){var C=E[0];E=E[1];var S=C.split("_");u=2<=S.length&&"type"==S[1]?u+(C+"=")+E+"&":u+(C+"=redacted&")}}else u=null;else u=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.X,n.s)}function SO(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function AO(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=YV(n,t),i==ZI){4==e&&(n.o=4,Us(14),r=!1),vm(n.j,n.m,null,"[Incomplete Response]");break}if(i==MA){n.o=4,Us(15),vm(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}vm(n.j,n.m,i,null),xA(n,i)}SO(n)&&i!=ZI&&i!=MA&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Us(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),HA(e),e.L=!0,Us(11))):(vm(n.j,n.m,t,"[Invalid Chunked Response]"),Gf(n),Hv(n))}function YV(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?ZI:(t=Number(e.substring(t,r)),isNaN(t)?MA:(r+=1)+t>e.length?ZI:(e=e.substr(r,t),n.C=r+t,e))}function jv(n){n.Y=Date.now()+n.P,MO(n,n.P)}function MO(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Uv(ki(n.eb,n),e)}function YI(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function Hv(n){0==n.l.G||n.I||e1(n.l,n)}function Gf(n){YI(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bA(n.W),_O(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function xA(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||PA(t.i,n)))if(t.I=n.N,!n.J&&PA(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=Uv(ki(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ob(t),ib(t)}jA(t),Us(18)}if(1>=UO(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else Kf(t,11)}else if((n.J||t.g==n)&&ob(t),!BI(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const C=E[3];null!=C&&(t.ma=C,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const k=E[5];null!=k&&"number"==typeof k&&0<k&&(t.K=r=1.5*k,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const B=n.g;if(B){const j=B.g?B.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.i;!a.g&&(Fs(j,"spdy")||Fs(j,"quic")||Fs(j,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(OA(a,a.h),a.h=null))}if(r.D){const ne=B.g?B.g.getResponseHeader("X-HTTP-Session-Id"):null;ne&&(r.sa=ne,er(r.F,r.D,ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var u=n;if((r=t).oa=r1(r,r.H?r.la:null,r.W),u.J){BO(r.i,u);var h=u,m=r.K;m&&h.setTimeout(m),h.B&&(YI(h),jv(h)),r.g=u}else XO(r);0<t.l.length&&sb(t)}else"stop"!=E[0]&&"close"!=E[0]||Kf(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?Kf(t,7):BA(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}Lv(4)}catch(E){}}function NA(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(eA(n)||"string"==typeof n)ZP(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(eA(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function QV(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(eA(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Em(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Em)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function kA(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Wf(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Wf(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Wf(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(rt=Vv.prototype).setTimeout=function(n){this.P=n},rt.gb=function(n){n=n.target;const e=this.L;e&&3==kc(n)?e.l():this.Ia(n)},rt.Ia=function(n){try{if(n==this.g)e:{const C=kc(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>C)&&(3!=C||oA||this.g&&(this.h.h||this.g.ga()||zO(this.g)))){this.I||4!=C||7==e||Lv(8==e||0>=S?3:2),YI(this);var t=this.g.ba();this.N=t;t:if(SO(this)){var r=zO(this.g);n="";var i=r.length,a=4==kc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Gf(this),Hv(this);var u="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==t,function WV(n,e,t,r,i,a,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+u})}(this.j,this.u,this.A,this.m,this.X,C,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!BI(h)){var E=h;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Us(12),Gf(this),Hv(this);break e}vm(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,xA(this,t)}this.U?(AO(this,C,u),oA&&this.i&&3==C&&(mO(this.V,this.W,"tick",this.fb),this.W.start())):(vm(this.j,this.m,u,null),xA(this,u)),4==C&&Gf(this),this.i&&!this.I&&(4==C?e1(this.l,this):(this.i=!1,jv(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Us(12)):(this.o=0,Us(13)),Gf(this),Hv(this)}}}catch(C){}},rt.fb=function(){if(this.g){var n=kc(this.g),e=this.g.ga();this.C<e.length&&(YI(this),AO(this,n,e),this.i&&4!=n&&jv(this))}},rt.cancel=function(){this.I=!0,Gf(this)},rt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function zV(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Lv(3),Us(17)),Gf(this),this.o=2,Hv(this)):MO(this,this.Y-n)},(rt=Em.prototype).R=function(){kA(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},rt.T=function(){return kA(this),this.g.concat()},rt.get=function(n,e){return Wf(this.h,n)?this.h[n]:e},rt.set=function(n,e){Wf(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},rt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var RO=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zf(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof zf){this.g=void 0!==e?e:n.g,QI(this,n.j),this.s=n.s,XI(this,n.i),JI(this,n.m),this.l=n.l,e=n.h;var t=new Gv;t.i=e.i,e.g&&(t.g=new Em(e.g),t.h=e.h),xO(this,t),this.o=n.o}else n&&(t=String(n).match(RO))?(this.g=!!e,QI(this,t[1]||"",!0),this.s=$v(t[2]||""),XI(this,t[3]||"",!0),JI(this,t[4]),this.l=$v(t[5]||"",!0),xO(this,t[6]||"",!0),this.o=$v(t[7]||"")):(this.g=!!e,this.h=new Gv(null,this.g))}function Nc(n){return new zf(n)}function QI(n,e,t){n.j=t?$v(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function XI(n,e,t){n.i=t?$v(e,!0):e}function JI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function xO(n,e,t){e instanceof Gv?(n.h=e,function oj(n,e){e&&!n.j&&(uh(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(kO(this,r),OO(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=qv(e,ij)),n.h=new Gv(e,n.g))}function er(n,e,t){n.h.set(e,t)}function eb(n){return er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $v(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qv(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,tj),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function tj(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zf.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qv(e,NO,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qv(e,NO,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(qv(t,"/"==t.charAt(0)?rj:nj,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qv(t,sj)),n.join("")};var NO=/[#\/\?@]/g,nj=/[#\?:]/g,rj=/[#\?]/g,ij=/[#\?@]/g,sj=/#/g;function Gv(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function uh(n){n.g||(n.g=new Em,n.h=0,n.i&&function XV(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function kO(n,e){uh(n),e=wm(n,e),Wf(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Wf((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&kA(n)))}function PO(n,e){return uh(n),e=wm(n,e),Wf(n.g.h,e)}function OO(n,e,t){kO(n,e),0<t.length&&(n.i=null,n.g.set(wm(n,e),nA(t)),n.h+=t.length)}function wm(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function FO(n){this.l=n||lj,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ea&&Mt.g.Ea()&&Mt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(rt=Gv.prototype).add=function(n,e){uh(this),this.i=null,n=wm(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},rt.forEach=function(n,e){uh(this),this.g.forEach(function(t,r){ZP(t,function(i){n.call(e,i,r,this)},this)},this)},rt.T=function(){uh(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},rt.R=function(n){uh(this);var e=[];if("string"==typeof n)PO(this,n)&&(e=YP(e,this.g.get(wm(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=YP(e,n[t])}return e},rt.set=function(n,e){return uh(this),this.i=null,PO(this,n=wm(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},rt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},rt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var u=i;""!==r[a]&&(u+="="+encodeURIComponent(String(r[a]))),n.push(u)}}return this.i=n.join("&")};var lj=10;function LO(n){return!!n.h||!!n.g&&n.g.size>=n.j}function UO(n){return n.h?1:n.g?n.g.size:0}function PA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function OA(n,e){n.g?n.g.add(e):n.h=e}function BO(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function VO(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return nA(n.i)}function FA(){}function uj(){this.g=new FA}function cj(n,e,t){const r=t||"";try{NA(n,function(i,a){let u=i;kv(i)&&(u=vA(i)),e.push(r+a+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function tb(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function Wv(n){this.l=n.$b||null,this.j=n.ib||!1}function nb(n,e){yi.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=LA,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}FO.prototype.cancel=function(){if(this.i=VO(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},FA.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},FA.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},Pi(Wv,CA),Wv.prototype.g=function(){return new nb(this.l,this.j)},Wv.prototype.i=function(n){return function(){return n}}({}),Pi(nb,yi);var LA=0;function jO(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function zv(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Kv(n)}function Kv(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(rt=nb.prototype).open=function(n,e){if(this.readyState!=LA)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Kv(this)},rt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},rt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zv(this)),this.readyState=LA},rt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Kv(this)),this.g&&(this.readyState=3,Kv(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Mt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;jO(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},rt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?zv(this):Kv(this),3==this.readyState&&jO(this)}},rt.Ua=function(n){this.g&&(this.response=this.responseText=n,zv(this))},rt.Ta=function(n){this.g&&(this.response=n,zv(this))},rt.ha=function(){this.g&&zv(this)},rt.setRequestHeader=function(n,e){this.v.append(n,e)},rt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},rt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(nb.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var hj=Mt.JSON.parse;function Or(n){yi.call(this),this.headers=new Em,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=HO,this.K=this.L=!1}Pi(Or,yi);var HO="",fj=/^https?$/i,pj=["POST","PUT"];function mj(n){return"content-type"==n.toLowerCase()}function $O(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qO(n),rb(n)}function qO(n){n.D||(n.D=!0,Oi(n,"complete"),Oi(n,"error"))}function GO(n){if(n.h&&void 0!==JS&&(!n.C[1]||4!=kc(n)||2!=n.ba()))if(n.v&&4==kc(n))TA(n.Fa,0,n);else if(Oi(n,"readystatechange"),4==kc(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(RO)[1]||null;if(!i&&Mt.self&&Mt.self.location){var a=Mt.self.location.protocol;i=a.substr(0,a.length-1)}r=!fj.test(i?i.toLowerCase():"")}t=r}if(t)Oi(n,"complete"),Oi(n,"success");else{n.m=6;try{var u=2<kc(n)?n.g.statusText:""}catch(m){u=""}n.j=u+" ["+n.ba()+"]",qO(n)}}finally{rb(n)}}}function rb(n,e){if(n.g){WO(n);const t=n.g,r=n.C[0]?LI:null;n.g=null,n.C=null,e||Oi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function WO(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function kc(n){return n.g?n.g.readyState:0}function zO(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case HO:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function UA(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function _j(n){let e="";return iA(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):er(n,e,t))}function Zv(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function KO(n){this.za=0,this.l=[],this.h=new GI,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Zv("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Zv("baseRetryDelayMs",5e3,n),this.$a=Zv("retryDelaySeedMs",1e4,n),this.Ya=Zv("forwardChannelMaxRetries",2,n),this.ra=Zv("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new FO(n&&n.concurrentRequestLimit),this.Ca=new uj,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function BA(n){if(ZO(n),3==n.G){var e=n.V++,t=Nc(n.F);er(t,"SID",n.J),er(t,"RID",e),er(t,"TYPE","terminate"),Yv(n,t),(e=new Vv(n,n.h,e,void 0)).K=2,e.v=eb(Nc(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=s1(e.l,null),e.g.ea(e.v)),e.F=Date.now(),jv(e)}n1(n)}function ib(n){n.g&&(HA(n),n.g.cancel(),n.g=null)}function ZO(n){ib(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),ob(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function VA(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&sb(n)}function sb(n){LO(n.i)||n.m||(n.m=!0,EA(n.Ha,n),n.C=0)}function YO(n,e){var t;t=e?e.m:n.V++;const r=Nc(n.F);er(r,"SID",n.J),er(r,"RID",t),er(r,"AID",n.U),Yv(n,r),n.o&&n.s&&UA(r,n.o,n.s),t=new Vv(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=QO(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),OA(n.i,t),RA(t,r,e)}function Yv(n,e){n.j&&NA({},function(t,r){er(e,r,t)})}function QO(n,e,t){t=Math.min(n.l.length,t);var r=n.j?ki(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const u=["count="+t];-1==a?0<t?(a=i[0].h,u.push("ofs="+a)):a=0:u.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let E=i[m].h;const C=i[m].g;if(E-=a,0>E)a=Math.max(0,i[m].h-100),h=!1;else try{cj(C,u,"req"+E+"_")}catch(S){r&&r(C)}}if(h){r=u.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function XO(n){n.g||n.u||(n.Y=1,EA(n.Ga,n),n.A=0)}function jA(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Uv(ki(n.Ga,n),t1(n,n.A)),n.A++,0))}function HA(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function JO(n){n.g=new Vv(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Nc(n.oa);er(e,"RID","rpc"),er(e,"SID",n.J),er(e,"CI",n.N?"0":"1"),er(e,"AID",n.U),Yv(n,e),er(e,"TYPE","xmlhttp"),n.o&&n.s&&UA(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=eb(Nc(e)),t.s=null,t.U=!0,DO(t,n)}function ob(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function e1(n,e){var t=null;if(n.g==e){ob(n),HA(n),n.g=null;var r=2}else{if(!PA(n.i,e))return;t=e.D,BO(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Oi(r=WI(),new wO(r,t,e,i)),sb(n)}else XO(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function yj(n,e){return!(UO(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Uv(ki(n.Ha,n,e),t1(n,n.C)),n.C++,0)))}(n,e)||2==r&&jA(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Kf(n,5);break;case 4:Kf(n,10);break;case 3:Kf(n,6);break;default:Kf(n,2)}}function t1(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Kf(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=ki(n.jb,n);t||(t=new zf("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||QI(t,"https"),eb(t)),function dj(n,e){const t=new GI;if(Mt.Image){const r=new Image;r.onload=UI(tb,t,r,"TestLoadImage: loaded",!0,e),r.onerror=UI(tb,t,r,"TestLoadImage: error",!1,e),r.onabort=UI(tb,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=UI(tb,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Us(2);n.G=0,n.j&&n.j.va(e),n1(n),ZO(n)}function n1(n){n.G=0,n.I=-1,n.j&&((0!=VO(n.i).length||0!=n.l.length)&&(n.i.i.length=0,nA(n.l),n.l.length=0),n.j.ua())}function r1(n,e,t){let r=function JV(n){return n instanceof zf?Nc(n):new zf(n,void 0)}(t);if(""!=r.i)e&&XI(r,e+"."+r.i),JI(r,r.m);else{const i=Mt.location;r=function ej(n,e,t,r){var i=new zf(null,void 0);return n&&QI(i,n),e&&XI(i,e),t&&JI(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&iA(n.aa,function(i,a){er(r,a,i)}),t=n.sa,(e=n.D)&&t&&er(r,e,t),er(r,"VER",n.ma),Yv(n,r),r}function s1(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(t&&n.Ba&&!n.qa?new Wv({ib:!0}):n.qa)).L=n.H,e}function o1(){}function ab(){if(ym&&!(10<=Number(xV)))throw Error("Environmental error: no available transport.")}function ea(n,e){yi.call(this),this.g=new KO(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!BI(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!BI(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Im(this)}function a1(n){DA.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function l1(){SA.call(this),this.status=1}function Im(n){this.g=n}(rt=Or.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():AA.g(),this.C=function bO(n){return n.h||(n.h=n.i())}(this.u?this.u:AA),this.g.onreadystatechange=ki(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void $O(this,a)}n=t||"";const i=new Em(this.headers);r&&NA(r,function(a,u){i.set(u,a)}),r=function CV(n){e:{var e=mj;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Mt.FormData&&n instanceof Mt.FormData,!(0<=KP(pj,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,u){this.g.setRequestHeader(u,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{WO(this),0<this.B&&((this.K=function gj(n){return ym&&function RV(){return function DV(n){var e=MV;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=QP(String(VI)).split("."),t=QP("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",a=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=rA(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||rA(0==i[2].length,0==a[2].length)||rA(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ki(this.pa,this)):this.A=TA(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){$O(this,a)}},rt.pa=function(){void 0!==JS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Oi(this,"timeout"),this.abort(8))},rt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Oi(this,"complete"),Oi(this,"abort"),rb(this))},rt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),rb(this,!0)),Or.Z.M.call(this)},rt.Fa=function(){this.s||(this.F||this.v||this.l?GO(this):this.cb())},rt.cb=function(){GO(this)},rt.ba=function(){try{return 2<kc(this)?this.g.status:-1}catch(n){return-1}},rt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},rt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),hj(e)}},rt.Da=function(){return this.m},rt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(rt=KO.prototype).ma=8,rt.G=1,rt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},rt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Vv(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=eO(a),nO(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=QO(this,i,e),er(t=Nc(this.F),"RID",n),er(t,"CVER",22),this.D&&er(t,"X-HTTP-Session-Id",this.D),Yv(this,t),this.o&&a&&UA(t,this.o,a),OA(this.i,i),this.Ra&&er(t,"TYPE","init"),this.ja?(er(t,"$req",e),er(t,"SID","null"),i.$=!0,RA(i,t,null)):RA(i,t,e),this.G=2}}else 3==this.G&&(n?YO(this,n):0==this.l.length||LO(this.i)||YO(this))},rt.Ga=function(){if(this.u=null,JO(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Uv(ki(this.bb,this),n)}},rt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Us(10),ib(this),JO(this))},rt.ab=function(){null!=this.v&&(this.v=null,ib(this),jA(this),Us(19))},rt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Us(2)):(this.h.info("Failed to ping google.com"),Us(1))},(rt=o1.prototype).xa=function(){},rt.wa=function(){},rt.va=function(){},rt.ua=function(){},rt.Oa=function(){},ab.prototype.g=function(n,e){return new ea(n,e)},Pi(ea,yi),ea.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),EA(ki(n.hb,n,e))),Us(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=r1(n,null,n.W),sb(n)},ea.prototype.close=function(){BA(this.g)},ea.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,VA(this.g,e)}else this.v?((e={}).__data__=vA(n),VA(this.g,e)):VA(this.g,n)},ea.prototype.M=function(){this.g.j=null,delete this.j,BA(this.g),delete this.g,ea.Z.M.call(this)},Pi(a1,DA),Pi(l1,SA),Pi(Im,o1),Im.prototype.xa=function(){Oi(this.g,"a")},Im.prototype.wa=function(n){Oi(this.g,new a1(n))},Im.prototype.va=function(n){Oi(this.g,new l1(n))},Im.prototype.ua=function(){Oi(this.g,"b")},ab.prototype.createWebChannel=ab.prototype.g,ea.prototype.send=ea.prototype.u,ea.prototype.open=ea.prototype.m,ea.prototype.close=ea.prototype.close,zI.NO_ERROR=0,zI.TIMEOUT=8,zI.HTTP_ERROR=6,IO.COMPLETE="complete",TO.EventType=Bv,Bv.OPEN="a",Bv.CLOSE="b",Bv.ERROR="c",Bv.MESSAGE="d",yi.prototype.listen=yi.prototype.N,Or.prototype.listenOnce=Or.prototype.O,Or.prototype.getLastError=Or.prototype.La,Or.prototype.getLastErrorCode=Or.prototype.Da,Or.prototype.getStatus=Or.prototype.ba,Or.prototype.getResponseJson=Or.prototype.Qa,Or.prototype.getResponseText=Or.prototype.ga,Or.prototype.send=Or.prototype.ea;var vj=xc.createWebChannelTransport=function(){return new ab},Ej=xc.getStatEventTarget=function(){return WI()},$A=xc.ErrorCode=zI,wj=xc.EventType=IO,Ij=xc.Event=qf,u1=xc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},bj=xc.FetchXmlHttpFactory=Wv,lb=xc.WebChannel=TO,Tj=xc.XhrIo=Or;const c1="@firebase/firestore";class Fi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fi.UNAUTHENTICATED=new Fi(null),Fi.GOOGLE_CREDENTIALS=new Fi("google-credentials-uid"),Fi.FIRST_PARTY=new Fi("first-party-uid"),Fi.MOCK_USER=new Fi("mock-user");let bm="9.6.5";const ch=new Tr.Yd("@firebase/firestore");function qA(){return ch.logLevel}function Be(n,...e){if(ch.logLevel<=Tr.in.DEBUG){const t=e.map(GA);ch.debug(`Firestore (${bm}): ${n}`,...t)}}function Fr(n,...e){if(ch.logLevel<=Tr.in.ERROR){const t=e.map(GA);ch.error(`Firestore (${bm}): ${n}`,...t)}}function Qv(n,...e){if(ch.logLevel<=Tr.in.WARN){const t=e.map(GA);ch.warn(`Firestore (${bm}): ${n}`,...t)}}function GA(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ft(n="Unexpected state"){const e=`FIRESTORE (${bm}) INTERNAL ASSERTION FAILED: `+n;throw Fr(e),new Error(e)}function Tt(n,e){n||ft()}function Ge(n,e){return n}const _e={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ke extends O.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class d1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Sj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fi.UNAUTHENTICATED))}shutdown(){}}class Aj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Mj{constructor(e){this.t=e,this.currentUser=Fi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let u=new vi;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new vi,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const E=u;e.enqueueRetryable((0,me.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},m=E=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(E=>m(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?m(E):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new vi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new d1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new Fi(e)}}class Rj{constructor(e,t,r){this.type="FirstParty",this.user=Fi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class xj{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Rj(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Fi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class h1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Nj{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=i=>{e.enqueueRetryable(()=>{return null!=(a=i).error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`),t(a.token);var a})};const r=i=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.g.onInit(i=>r(i)),setTimeout(()=>{if(!this.appCheck){const i=this.g.getImmediate({optional:!0});i?r(i):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),new h1(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ta{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.p(r),this.T=r=>t.writeSequenceNumber(r))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function kj(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ta.I=-1;class f1{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=kj(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function Tm(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function p1(n){return n+"\0"}class Ei{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ke(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ke(_e.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new ke(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ke(_e.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ei.fromMillis(Date.now())}static fromDate(e){return Ei.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ei(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Ei(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function g1(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Zf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function m1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Xv{constructor(e,t,r){void 0===t?t=0:t>e.length&&ft(),void 0===r?r=e.length-t:r>e.length-t&&ft(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Xv.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xv?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),u=t.get(i);if(a<u)return-1;if(a>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gn extends Xv{construct(e,t,r){return new gn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new ke(_e.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new gn(t)}static emptyPath(){return new gn([])}}const Pj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Li extends Xv{construct(e,t,r){return new Li(e,t,r)}static isValidIdentifier(e){return Pj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Li.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Li(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new ke(_e.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new ke(_e.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new ke(_e.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(a(),i++)}if(a(),u)throw new ke(_e.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Li(t)}static emptyPath(){return new Li([])}}class Cm{constructor(e){this.fields=e,e.sort(Li.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tm(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class ii{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ii(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ii(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ii.EMPTY_BYTE_STRING=new ii("");const Fj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dh(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=Fj.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lr(n.seconds),nanos:Lr(n.nanos)}}function Lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Dm(n){return"string"==typeof n?ii.fromBase64String(n):ii.fromUint8Array(n)}function WA(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _1(n){const e=n.mapValue.fields.__previous_value__;return WA(e)?_1(e):e}function Jv(n){const e=dh(n.mapValue.fields.__local_write_time__.timestampValue);return new Ei(e.seconds,e.nanos)}function Yf(n){return null==n}function ub(n){return 0===n&&1/n==-1/0}function y1(n){return"number"==typeof n&&Number.isInteger(n)&&!ub(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(gn.fromString(e))}static fromName(e){return new lt(gn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new gn(e.slice()))}}function Qf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?WA(n)?4:10:ft()}function Au(n,e){if(n===e)return!0;const t=Qf(n);if(t!==Qf(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Jv(n).isEqual(Jv(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=dh(r.timestampValue),u=dh(i.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Dm(n.bytesValue).isEqual(Dm(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Lr(r.geoPointValue.latitude)===Lr(i.geoPointValue.latitude)&&Lr(r.geoPointValue.longitude)===Lr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Lr(r.integerValue)===Lr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Lr(r.doubleValue),u=Lr(i.doubleValue);return a===u?ub(a)===ub(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Tm(n.arrayValue.values||[],e.arrayValue.values||[],Au);case 10:return function(r,i){const a=r.mapValue.fields||{},u=i.mapValue.fields||{};if(g1(a)!==g1(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===u[h]||!Au(a[h],u[h])))return!1;return!0}(n,e);default:return ft()}var i}function eE(n,e){return void 0!==(n.values||[]).find(t=>Au(t,e))}function Sm(n,e){if(n===e)return 0;const t=Qf(n),r=Qf(e);if(t!==r)return Kt(t,r);switch(t){case 0:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const u=Lr(i.integerValue||i.doubleValue),h=Lr(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return v1(n.timestampValue,e.timestampValue);case 4:return v1(Jv(n),Jv(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(i,a){const u=Dm(i),h=Dm(a);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const u=i.split("/"),h=a.split("/");for(let m=0;m<u.length&&m<h.length;m++){const E=Kt(u[m],h[m]);if(0!==E)return E}return Kt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const u=Kt(Lr(i.latitude),Lr(a.latitude));return 0!==u?u:Kt(Lr(i.longitude),Lr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const u=i.values||[],h=a.values||[];for(let m=0;m<u.length&&m<h.length;++m){const E=Sm(u[m],h[m]);if(E)return E}return Kt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const u=i.fields||{},h=Object.keys(u),m=a.fields||{},E=Object.keys(m);h.sort(),E.sort();for(let C=0;C<h.length&&C<E.length;++C){const S=Kt(h[C],E[C]);if(0!==S)return S;const k=Sm(u[h[C]],m[E[C]]);if(0!==k)return k}return Kt(h.length,E.length)}(n.mapValue,e.mapValue);default:throw ft()}}function v1(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=dh(n),r=dh(e),i=Kt(t.seconds,r.seconds);return 0!==i?i:Kt(t.nanos,r.nanos)}function zA(n){return KA(n)}function KA(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=dh(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Dm(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const u of r.values||[])a?a=!1:i+=",",i+=KA(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",u=!0;for(const h of i)u?u=!1:a+=",",a+=`${h}:${KA(r.fields[h])}`;return a+"}"}(n.mapValue):ft();var e}function cb(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ZA(n){return!!n&&"integerValue"in n}function YA(n){return!!n&&"arrayValue"in n}function E1(n){return!!n&&"nullValue"in n}function w1(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function db(n){return!!n&&"mapValue"in n}function tE(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Zf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tE(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tE(n.arrayValue.values[t]);return e}return Object.assign({},n)}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!db(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tE(t)}setAll(e){let t=Li.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=tE(u):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());db(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Au(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];db(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Zf(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new is(tE(this.value))}}function I1(n){const e=[];return Zf(n.fields,(t,r)=>{const i=new Li([t]);if(db(r)){const a=I1(r.mapValue).fields;if(0===a.length)e.push(i);else for(const u of a)e.push(i.child(u))}else e.push(i)}),new Cm(e)}class tr{constructor(e,t,r,i,a){this.key=e,this.documentType=t,this.version=r,this.data=i,this.documentState=a}static newInvalidDocument(e){return new tr(e,0,Pt.min(),is.empty(),0)}static newFoundDocument(e,t,r){return new tr(e,1,t,r,0)}static newNoDocument(e,t){return new tr(e,2,t,is.empty(),0)}static newUnknownDocument(e,t){return new tr(e,3,t,is.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Lj{constructor(e,t=null,r=[],i=[],a=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=u,this.endAt=h,this.R=null}}function b1(n,e=null,t=[],r=[],i=null,a=null,u=null){return new Lj(n,e,t,r,i,a,u)}function nE(n){const e=Ge(n);if(null===e.R){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function Bj(n){return n.field.canonicalString()+n.op.toString()+zA(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Yf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=pb(e.startAt)),e.endAt&&(t+="|ub:",t+=pb(e.endAt)),e.R=t}return e.R}function hb(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!zj(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Au(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!D1(n.startAt,e.startAt)&&D1(n.endAt,e.endAt)}function fb(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Bs extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new Vj(e,t,r):"array-contains"===t?new $j(e,r):"in"===t?new qj(e,r):"not-in"===t?new Gj(e,r):"array-contains-any"===t?new Wj(e,r):new Bs(e,t,r)}static P(e,t,r){return"in"===t?new jj(e,r):new Hj(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Sm(t,this.value)):null!==t&&Qf(this.value)===Qf(t)&&this.v(Sm(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ft()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Vj extends Bs{constructor(e,t,r){super(e,t,r),this.key=lt.fromName(r.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.v(t)}}class jj extends Bs{constructor(e,t){super(e,"in",t),this.keys=T1(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Hj extends Bs{constructor(e,t){super(e,"not-in",t),this.keys=T1(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function T1(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>lt.fromName(r.referenceValue))}class $j extends Bs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return YA(t)&&eE(t.arrayValue,this.value)}}class qj extends Bs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&eE(this.value.arrayValue,t)}}class Gj extends Bs{constructor(e,t){super(e,"not-in",t)}matches(e){if(eE(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!eE(this.value.arrayValue,t)}}class Wj extends Bs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!YA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>eE(this.value.arrayValue,r))}}class rE{constructor(e,t){this.position=e,this.before=t}}function pb(n){return`${n.before?"b":"a"}:${n.position.map(e=>zA(e)).join(",")}`}class Am{constructor(e,t="asc"){this.field=e,this.dir=t}}function zj(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function C1(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],u=n.position[i];if(r=a.field.isKeyField()?lt.comparator(lt.fromName(u.referenceValue),t.key):Sm(u,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function D1(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Au(n.position[t],e.position[t]))return!1;return!0}class Pc{constructor(e,t=null,r=[],i=[],a=null,u="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=u,this.startAt=h,this.endAt=m,this.S=null,this.D=null}}function S1(n,e,t,r,i,a,u,h){return new Pc(n,e,t,r,i,a,u,h)}function Mm(n){return new Pc(n)}function gb(n){return!Yf(n.limit)&&"F"===n.limitType}function mb(n){return!Yf(n.limit)&&"L"===n.limitType}function QA(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function XA(n){for(const e of n.filters)if(e.V())return e.field;return null}function JA(n){return null!==n.collectionGroup}function Rm(n){const e=Ge(n);if(null===e.S){e.S=[];const t=XA(e),r=QA(e);if(null!==t&&null===r)t.isKeyField()||e.S.push(new Am(t)),e.S.push(new Am(Li.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.S.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Am(Li.keyField(),a))}}}return e.S}function Va(n){const e=Ge(n);if(!e.D)if("F"===e.limitType)e.D=b1(e.path,e.collectionGroup,Rm(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Rm(e))t.push(new Am(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new rE(e.endAt.position,!e.endAt.before):null,i=e.startAt?new rE(e.startAt.position,!e.startAt.before):null;e.D=b1(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.D}function A1(n,e,t){return new Pc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function iE(n,e){return hb(Va(n),Va(e))&&n.limitType===e.limitType}function M1(n){return`${nE(Va(n))}|lt:${n.limitType}`}function eM(n){return`Query(target=${function Uj(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${zA(r.value)}`;var r}).join(", ")}]`),Yf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+pb(n.startAt)),n.endAt&&(e+=", endAt: "+pb(n.endAt)),`Target(${e})`}(Va(n))}; limitType=${n.limitType})`}function sE(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):lt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!C1(t.startAt,Rm(t),r)||t.endAt&&C1(t.endAt,Rm(t),r)));var t,r}function R1(n){return(e,t)=>{let r=!1;for(const i of Rm(n)){const a=Kj(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function Kj(n,e,t){const r=n.field.isKeyField()?lt.comparator(e.key,t.key):function(i,a,u){const h=a.data.field(i),m=u.data.field(i);return null!==h&&null!==m?Sm(h,m):ft()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ft()}}function x1(n,e){if(n.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ub(e)?"-0":e}}function N1(n){return{integerValue:""+n}}function k1(n,e){return y1(e)?N1(e):x1(n,e)}class _b{constructor(){this._=void 0}}function Zj(n,e,t){return n instanceof xm?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Xf?O1(n,e):n instanceof Jf?F1(n,e):function(r,i){const a=P1(r,i),u=L1(a)+L1(r.N);return ZA(a)&&ZA(r.N)?N1(u):x1(r.k,u)}(n,e)}function Yj(n,e,t){return n instanceof Xf?O1(n,e):n instanceof Jf?F1(n,e):t}function P1(n,e){return n instanceof Nm?ZA(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class xm extends _b{}class Xf extends _b{constructor(e){super(),this.elements=e}}function O1(n,e){const t=U1(e);for(const r of n.elements)t.some(i=>Au(i,r))||t.push(r);return{arrayValue:{values:t}}}class Jf extends _b{constructor(e){super(),this.elements=e}}function F1(n,e){let t=U1(e);for(const r of n.elements)t=t.filter(i=>!Au(i,r));return{arrayValue:{values:t}}}class Nm extends _b{constructor(e,t){super(),this.k=e,this.N=t}}function L1(n){return Lr(n.integerValue||n.doubleValue)}function U1(n){return YA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class oE{constructor(e,t){this.field=e,this.transform=t}}class Xj{constructor(e,t){this.version=e,this.transformResults=t}}class Ur{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ur}static exists(e){return new Ur(void 0,e)}static updateTime(e){return new Ur(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yb(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class vb{}function Jj(n,e,t){n instanceof aE?function(r,i,a){const u=r.value.clone(),h=H1(r.fieldTransforms,i,a.transformResults);u.setAll(h),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof hh?function(r,i,a){if(!yb(r.precondition,i))return void i.convertToUnknownDocument(a.version);const u=H1(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(j1(r)),h.setAll(u),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function tM(n,e,t){var i;n instanceof aE?function(r,i,a){if(!yb(r.precondition,i))return;const u=r.value.clone(),h=$1(r.fieldTransforms,a,i);u.setAll(h),i.convertToFoundDocument(V1(i),u).setHasLocalMutations()}(n,e,t):n instanceof hh?function(r,i,a){if(!yb(r.precondition,i))return;const u=$1(r.fieldTransforms,a,i),h=i.data;h.setAll(j1(r)),h.setAll(u),i.convertToFoundDocument(V1(i),h).setHasLocalMutations()}(n,e,t):yb(n.precondition,i=e)&&i.convertToNoDocument(Pt.min())}function eH(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=P1(r.transform,i||null);null!=a&&(null==t&&(t=is.empty()),t.set(r.field,a))}return t||null}function B1(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Tm(t,r,(i,a)=>function Qj(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xf&&r instanceof Xf||t instanceof Jf&&r instanceof Jf?Tm(t.elements,r.elements,Au):t instanceof Nm&&r instanceof Nm?Au(t.N,r.N):t instanceof xm&&r instanceof xm);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function V1(n){return n.isFoundDocument()?n.version:Pt.min()}class aE extends vb{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class hh extends vb{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function j1(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function H1(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],u=a.transform,h=e.data.field(a.field);r.set(a.field,Yj(u,h,t[i]))}return r}function $1(n,e,t){const r=new Map;for(const i of n){const a=i.transform,u=t.data.field(i.field);r.set(i.field,Zj(a,u,e))}return r}class lE extends vb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class nM extends vb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class tH{constructor(e){this.count=e}}var Br,nn;function q1(n){switch(n){default:return ft();case _e.CANCELLED:case _e.UNKNOWN:case _e.DEADLINE_EXCEEDED:case _e.RESOURCE_EXHAUSTED:case _e.INTERNAL:case _e.UNAVAILABLE:case _e.UNAUTHENTICATED:return!1;case _e.INVALID_ARGUMENT:case _e.NOT_FOUND:case _e.ALREADY_EXISTS:case _e.PERMISSION_DENIED:case _e.FAILED_PRECONDITION:case _e.ABORTED:case _e.OUT_OF_RANGE:case _e.UNIMPLEMENTED:case _e.DATA_LOSS:return!0}}function G1(n){if(void 0===n)return Fr("GRPC error has no .code"),_e.UNKNOWN;switch(n){case Br.OK:return _e.OK;case Br.CANCELLED:return _e.CANCELLED;case Br.UNKNOWN:return _e.UNKNOWN;case Br.DEADLINE_EXCEEDED:return _e.DEADLINE_EXCEEDED;case Br.RESOURCE_EXHAUSTED:return _e.RESOURCE_EXHAUSTED;case Br.INTERNAL:return _e.INTERNAL;case Br.UNAVAILABLE:return _e.UNAVAILABLE;case Br.UNAUTHENTICATED:return _e.UNAUTHENTICATED;case Br.INVALID_ARGUMENT:return _e.INVALID_ARGUMENT;case Br.NOT_FOUND:return _e.NOT_FOUND;case Br.ALREADY_EXISTS:return _e.ALREADY_EXISTS;case Br.PERMISSION_DENIED:return _e.PERMISSION_DENIED;case Br.FAILED_PRECONDITION:return _e.FAILED_PRECONDITION;case Br.ABORTED:return _e.ABORTED;case Br.OUT_OF_RANGE:return _e.OUT_OF_RANGE;case Br.UNIMPLEMENTED:return _e.UNIMPLEMENTED;case Br.DATA_LOSS:return _e.DATA_LOSS;default:return ft()}}(nn=Br||(Br={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class si{constructor(e,t){this.comparator=e,this.root=t||Ui.EMPTY}insert(e,t){return new si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ui.BLACK,null,null))}remove(e){return new si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ui.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Eb(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Eb(this.root,e,this.comparator,!1)}getReverseIterator(){return new Eb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Eb(this.root,e,this.comparator,!0)}}class Eb{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ui{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:Ui.RED,this.left=null!=i?i:Ui.EMPTY,this.right=null!=a?a:Ui.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new Ui(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Ui.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Ui.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ui.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ui.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ft();const e=this.left.check();if(e!==this.right.check())throw ft();return e+(this.isRed()?0:1)}}Ui.EMPTY=null,Ui.RED=!0,Ui.BLACK=!1,Ui.EMPTY=new class{constructor(){this.size=0}get key(){throw ft()}get value(){throw ft()}get color(){throw ft()}get left(){throw ft()}get right(){throw ft()}copy(n,e,t,r,i){return this}insert(n,e,t){return new Ui(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _r{constructor(e){this.comparator=e,this.data=new si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new W1(this.data.getIterator())}getIteratorFrom(e){return new W1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof _r)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _r(this.comparator);return t.data=e,t}}class W1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const nH=new si(lt.comparator);function ja(){return nH}const rH=new si(lt.comparator);function rM(){return rH}const iH=new si(lt.comparator);function z1(){return iH}const sH=new _r(lt.comparator);function In(...n){let e=sH;for(const t of n)e=e.add(t);return e}const oH=new _r(Kt);function wb(){return oH}class uE{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,cE.createSynthesizedTargetChangeForCurrentChange(e,t)),new uE(Pt.min(),r,wb(),ja(),In())}}class cE{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new cE(ii.EMPTY_BYTE_STRING,t,In(),In(),In())}}class Ib{constructor(e,t,r,i){this.$=e,this.removedTargetIds=t,this.key=r,this.O=i}}class K1{constructor(e,t){this.targetId=e,this.M=t}}class Z1{constructor(e,t,r=ii.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Y1{constructor(){this.F=0,this.L=X1(),this.B=ii.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.F}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=In(),t=In(),r=In();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ft()}}),new cE(this.B,this.U,e,t,r)}H(){this.q=!1,this.L=X1()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.F+=1}Z(){this.F-=1}tt(){this.q=!0,this.U=!0}}class aH{constructor(e){this.et=e,this.nt=new Map,this.st=ja(),this.it=Q1(),this.rt=new _r(Kt)}ot(e){for(const t of e.$)e.O&&e.O.isFoundDocument()?this.ct(t,e.O):this.at(t,e.key,e.O);for(const t of e.removedTargetIds)this.at(t,e.key,e.O)}ut(e){this.forEachTarget(e,t=>{const r=this.ht(t);switch(e.state){case 0:this.lt(t)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||this.removeTarget(t);break;case 3:this.lt(t)&&(r.tt(),r.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),r.W(e.resumeToken));break;default:ft()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((r,i)=>{this.lt(i)&&t(i)})}dt(e){const t=e.targetId,r=e.M.count,i=this.wt(t);if(i){const a=i.target;if(fb(a))if(0===r){const u=new lt(a.path);this.at(t,u,tr.newNoDocument(u,Pt.min()))}else Tt(1===r);else this._t(t)!==r&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((a,u)=>{const h=this.wt(u);if(h){if(a.current&&fb(h.target)){const m=new lt(h.target.path);null!==this.st.get(m)||this.yt(u,m)||this.at(u,m,tr.newNoDocument(m,e))}a.j&&(t.set(u,a.G()),a.H())}});let r=In();this.it.forEach((a,u)=>{let h=!0;u.forEachWhile(m=>{const E=this.wt(m);return!E||2===E.purpose||(h=!1,!1)}),h&&(r=r.add(a))});const i=new uE(e,t,this.rt,this.st,r);return this.st=ja(),this.it=Q1(),this.rt=new _r(Kt),i}ct(e,t){if(!this.lt(e))return;const r=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,r),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}at(e,t,r){if(!this.lt(e))return;const i=this.ht(e);this.yt(e,t)?i.J(t,1):i.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),r&&(this.st=this.st.insert(t,r))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Y1,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new _r(Kt),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Y1),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function Q1(){return new si(lt.comparator)}function X1(){return new si(lt.comparator)}const lH={asc:"ASCENDING",desc:"DESCENDING"},uH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class cH{constructor(e,t){this.databaseId=e,this.C=t}}function dE(n,e){return n.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function J1(n,e){return n.C?e.toBase64():e.toUint8Array()}function dH(n,e){return dE(n,e.toTimestamp())}function wi(n){return Tt(!!n),Pt.fromTimestamp(function(e){const t=dh(e);return new Ei(t.seconds,t.nanos)}(n))}function iM(n,e){return(t=n,new gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function eF(n){const e=gn.fromString(n);return Tt(hF(e)),e}function hE(n,e){return iM(n.databaseId,e.path)}function Mu(n,e){const t=eF(e);if(t.get(1)!==n.databaseId.projectId)throw new ke(_e.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ke(_e.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new lt(nF(t))}function sM(n,e){return iM(n.databaseId,e)}function tF(n){const e=eF(n);return 4===e.length?gn.emptyPath():nF(e)}function fE(n){return new gn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nF(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function rF(n,e,t){return{name:hE(n,e),fields:t.value.mapValue.fields}}function iF(n,e,t){const r=Mu(n,e.name),i=wi(e.updateTime),a=new is({mapValue:{fields:e.fields}}),u=tr.newFoundDocument(r,i,a);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function bb(n,e){let t;if(e instanceof aE)t={update:rF(n,e.key,e.value)};else if(e instanceof lE)t={delete:hE(n,e.key)};else if(e instanceof hh)t={update:rF(n,e.key,e.data),updateMask:EH(e.fieldMask)};else{if(!(e instanceof nM))return ft();t={verify:hE(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const u=a.transform;if(u instanceof xm)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Xf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Jf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Nm)return{fieldPath:a.field.canonicalString(),increment:u.N};throw ft()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:dH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ft()),t;var i}function sF(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Ur.updateTime(wi(i.updateTime)):void 0!==i.exists?Ur.exists(i.exists):Ur.none():Ur.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,u){let h=null;"setToServerValue"in u?(Tt("REQUEST_TIME"===u.setToServerValue),h=new xm):"appendMissingElements"in u?h=new Xf(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new Jf(u.removeAllFromArray.values||[]):"increment"in u?h=new Nm(a,u.increment):ft();const m=Li.fromServerFormat(u.fieldPath);return new oE(m,h)}(n,i)):[];var i;if(e.update){const i=Mu(n,e.update.name),a=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Cm((e.updateMask.fieldPaths||[]).map(E=>Li.fromServerFormat(E)));return new hh(i,a,u,t,r)}return new aE(i,a,t,r)}if(e.delete){const i=Mu(n,e.delete);return new lE(i,t)}if(e.verify){const i=Mu(n,e.verify);return new nM(i,t)}return ft()}function oF(n,e){return{documents:[sM(n,e.path)]}}function aF(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=sM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=sM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(h){if(0===h.length)return;const m=h.map(E=>function(C){if("=="===C.op){if(w1(C.value))return{unaryFilter:{field:km(C.field),op:"IS_NAN"}};if(E1(C.value))return{unaryFilter:{field:km(C.field),op:"IS_NULL"}}}else if("!="===C.op){if(w1(C.value))return{unaryFilter:{field:km(C.field),op:"IS_NOT_NAN"}};if(E1(C.value))return{unaryFilter:{field:km(C.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:km(C.field),op:_H(C.op),value:C.value}}}(E));return 1===m.length?m[0]:{compositeFilter:{op:"AND",filters:m}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(h){if(0!==h.length)return h.map(m=>{return{field:km((E=m).field),direction:mH(E.dir)};var E})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const u=(m=e.limit,n.C||Yf(m)?m:{value:m});var m;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt=cF(e.startAt)),e.endAt&&(t.structuredQuery.endAt=cF(e.endAt)),t}function lF(n){let e=tF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const C=t.from[0];C.allDescendants?i=C.collectionId:e=e.child(C.collectionId)}let a=[];t.where&&(a=uF(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(C=>{return new Am(Pm((S=C).field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(C){let S;return S="object"==typeof C?C.value:C,Yf(S)?null:S}(t.limit));let m=null;t.startAt&&(m=dF(t.startAt));let E=null;return t.endAt&&(E=dF(t.endAt)),S1(e,i,u,a,h,"F",m,E)}function uF(n){return n?void 0!==n.unaryFilter?[vH(n)]:void 0!==n.fieldFilter?[yH(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>uF(e)).reduce((e,t)=>e.concat(t)):ft():[]}function cF(n){return{before:n.before,values:n.position}}function dF(n){return new rE(n.values||[],!!n.before)}function mH(n){return lH[n]}function _H(n){return uH[n]}function km(n){return{fieldPath:n.canonicalString()}}function Pm(n){return Li.fromServerFormat(n.fieldPath)}function yH(n){return Bs.create(Pm(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ft()}}(n.fieldFilter.op),n.fieldFilter.value)}function vH(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Pm(n.unaryFilter.field);return Bs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Pm(n.unaryFilter.field);return Bs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Pm(n.unaryFilter.field);return Bs.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Pm(n.unaryFilter.field);return Bs.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ft()}}function EH(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hF(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Pl(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=fF(e)),e=wH(n.get(t),e);return fF(e)}function wH(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function fF(n){return n+"\x01\x01"}function Oc(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),gn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const u=n.indexOf("\x01",a);switch((u<0||u>t)&&ft(),n.charAt(u+1)){case"\x01":const h=n.substring(a,u);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,u),i+="\0";break;case"\x11":i+=n.substring(a,u+1);break;default:ft()}a=u+2}return new gn(r)}class IH{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class na{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}na.store="owner",na.key="owner";class fh{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}fh.store="mutationQueues",fh.keyPath="userId";class qn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}qn.store="mutations",qn.keyPath="batchId",qn.userMutationsIndex="userMutationsIndex",qn.userMutationsKeyPath=["userId","batchId"];class ss{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Pl(t)]}static key(e,t,r){return[e,Pl(t),r]}}ss.store="documentMutations",ss.PLACEHOLDER=new ss;class bH{constructor(e,t){this.path=e,this.readTime=t}}class TH{constructor(e,t){this.path=e,this.version=t}}class yr{constructor(e,t,r,i,a,u){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=u}}yr.store="remoteDocuments",yr.readTimeIndex="readTimeIndex",yr.readTimeIndexPath="readTime",yr.collectionReadTimeIndex="collectionReadTimeIndex",yr.collectionReadTimeIndexPath=["parentPath","readTime"];class Ru{constructor(e){this.byteSize=e}}Ru.store="remoteDocumentGlobal",Ru.key="remoteDocumentGlobalKey";class Eo{constructor(e,t,r,i,a,u,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=u,this.query=h}}Eo.store="targets",Eo.keyPath="targetId",Eo.queryTargetsIndexName="queryTargetsIndex",Eo.queryTargetsKeyPath=["canonicalId","targetId"];class Bi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Bi.store="targetDocuments",Bi.keyPath=["targetId","path"],Bi.documentTargetsIndex="documentTargetsIndex",Bi.documentTargetsKeyPath=["path","targetId"];class ra{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}ra.key="targetGlobalKey",ra.store="targetGlobal";class ep{constructor(e,t){this.collectionId=e,this.parent=t}}ep.store="collectionParents",ep.keyPath=["collectionId","parent"];class Fc{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Fc.store="clientMetadata",Fc.keyPath="clientId";class Om{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Om.store="bundles",Om.keyPath="bundleId";class Fm{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Fm.store="namedQueries",Fm.keyPath="name";const CH=[fh.store,qn.store,ss.store,yr.store,Eo.store,na.store,ra.store,Bi.store,Fc.store,Ru.store,ep.store,Om.store,Fm.store],pF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ft(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(t){return Ne.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,r)=>{t(e)})}static reject(e){return new Ne((t,r)=>{r(e)})}static waitFor(e){return new Ne((t,r)=>{let i=0,a=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++a,u&&a===i&&t()},m=>r(m))}),u=!0,a===i&&t()})}static or(e){let t=Ne.resolve(!1);for(const r of e)t=t.next(i=>i?Ne.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class Tb{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new vi,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new pE(e,t.error)):this.It.resolve()},this.transaction.onerror=r=>{const i=oM(r.target.error);this.It.reject(new pE(e,i))}}static open(e,t,r,i){try{return new Tb(t,e.transaction(i,r))}catch(a){throw new pE(t,a)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new SH(t)}}class Ol{constructor(e,t,r){this.name=e,this.version=t,this.Rt=r,12.2===Ol.bt((0,O.z$)())&&Fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),np(window.indexedDB.deleteDatabase(e)).toPromise()}static Pt(){if(!(0,O.hl)())return!1;if(Ol.vt())return!0;const e=(0,O.z$)(),t=Ol.bt(e),r=0<t&&t<10,i=Ol.Vt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static bt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Ct(e){var t=this;return(0,me.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=u=>{r(u.target.result)},a.onblocked=()=>{i(new pE(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new ke(_e.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new ke(_e.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new pE(e,h))},a.onupgradeneeded=u=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.Rt.Nt(u.target.result,a.transaction,u.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=r=>t.kt(r)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,me.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Ct(e);const m=Tb.open(a.db,e,u?"readonly":"readwrite",r),E=i(m).catch(C=>(m.abort(C),Ne.reject(C))).toPromise();return E.catch(()=>{}),yield m.At,E}catch(m){const E="FirebaseError"!==m.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",m.message,"Retrying:",E),a.close(),!E)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class DH{constructor(e){this.$t=e,this.Ot=!1,this.Mt=null}get isDone(){return this.Ot}get Ft(){return this.Mt}set cursor(e){this.$t=e}done(){this.Ot=!0}Lt(e){this.Mt=e}delete(){return np(this.$t.delete())}}class pE extends ke{constructor(e,t){super(_e.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function tp(n){return"IndexedDbTransactionError"===n.name}class SH{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),np(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),np(this.store.add(e))}get(e){return np(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),np(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),np(this.store.count())}Bt(e,t){const r=this.cursor(this.options(e,t)),i=[];return this.Ut(r,(a,u)=>{i.push(u)}).next(()=>i)}qt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Kt=!1;const i=this.cursor(r);return this.Ut(i,(a,u,h)=>h.delete())}jt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Ut(i,t)}Qt(e){const t=this.cursor({});return new Ne((r,i)=>{t.onerror=a=>{const u=oM(a.target.error);i(u)},t.onsuccess=a=>{const u=a.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}Ut(e,t){const r=[];return new Ne((i,a)=>{e.onerror=u=>{a(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const m=new DH(h),E=t(h.primaryKey,h.value,m);if(E instanceof Ne){const C=E.catch(S=>(m.done(),Ne.reject(S)));r.push(C)}m.isDone?i():null===m.Ft?h.continue():h.continue(m.Ft)}}).next(()=>Ne.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Kt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function np(n){return new Ne((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=oM(r.target.error);t(i)}})}let mF=!1;function oM(n){const e=Ol.bt((0,O.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new ke("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return mF||(mF=!0,setTimeout(()=>{throw r},0)),r}}return n}class _F extends gF{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function wo(n,e){const t=Ge(n);return Ol.Dt(t.Wt,e)}class aM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Jj(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&tM(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&tM(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Pt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),In())}isEqual(e){return this.batchId===e.batchId&&Tm(this.mutations,e.mutations,(t,r)=>B1(t,r))&&Tm(this.baseMutations,e.baseMutations,(t,r)=>B1(t,r))}}class lM{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=z1();const a=e.mutations;for(let u=0;u<a.length;u++)i=i.insert(a[u].key,r[u].version);return new lM(e,t,r,i)}}class ph{constructor(e,t,r,i,a=Pt.min(),u=Pt.min(),h=ii.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new ph(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ph(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class yF{constructor(e){this.Gt=e}}function uM(n,e){if(e.document)return iF(n.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=lt.fromSegments(e.noDocument.path),r=Um(e.noDocument.readTime),i=tr.newNoDocument(t,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){const t=lt.fromSegments(e.unknownDocument.path),r=Um(e.unknownDocument.version);return tr.newUnknownDocument(t,r)}return ft()}function vF(n,e,t){const r=cM(t),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){const a={name:hE(h=n.Gt,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:dE(h,m.version.toTimestamp())};return new yr(null,null,a,e.hasCommittedMutations,r,i)}var h,m;if(e.isNoDocument()){const a=e.key.path.toArray(),u=Lm(e.version),h=e.hasCommittedMutations;return new yr(null,new bH(a,u),null,h,r,i)}if(e.isUnknownDocument()){const a=e.key.path.toArray(),u=Lm(e.version);return new yr(new TH(a,u),null,null,!0,r,i)}return ft()}function cM(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function EF(n){const e=new Ei(n[0],n[1]);return Pt.fromTimestamp(e)}function Lm(n){const e=n.toTimestamp();return new IH(e.seconds,e.nanoseconds)}function Um(n){const e=new Ei(n.seconds,n.nanoseconds);return Pt.fromTimestamp(e)}function Bm(n,e){const t=(e.baseMutations||[]).map(a=>sF(n.Gt,a));for(let a=0;a<e.mutations.length-1;++a){const u=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(u.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>sF(n.Gt,a)),i=Ei.fromMillis(e.localWriteTimeMs);return new aM(e.batchId,i,t,r)}function gE(n){const e=Um(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Um(n.lastLimboFreeSnapshotVersion):Pt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=Va(Mm(tF(i.documents[0])))):r=Va(lF(n.query)),new ph(r,n.targetId,0,n.lastListenSequenceNumber,e,t,ii.fromBase64String(n.resumeToken))}function wF(n,e){const t=Lm(e.snapshotVersion),r=Lm(e.lastLimboFreeSnapshotVersion);let i;i=fb(e.target)?oF(n.Gt,e.target):aF(n.Gt,e.target);const a=e.resumeToken.toBase64();return new Eo(e.targetId,nE(e.target),t,a,e.sequenceNumber,r,i)}function dM(n){const e=lF({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?A1(e,e.limit,"L"):e}class AH{getBundleMetadata(e,t){return IF(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Um(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return IF(e).put({bundleId:(r=t).id,createTime:Lm(wi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return bF(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:dM(i.bundledQuery),readTime:Um(i.readTime)};var i})}saveNamedQuery(e,t){return bF(e).put({name:(r=t).name,readTime:Lm(wi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function IF(n){return wo(n,Om.store)}function bF(n){return wo(n,Fm.store)}class MH{constructor(){this.zt=new hM}addToCollectionParentIndex(e,t){return this.zt.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.zt.getEntries(t))}}class hM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new _r(gn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new _r(gn.comparator)).toArray()}}class RH{constructor(){this.Ht=new hM}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const a={collectionId:r,parent:Pl(i)};return TF(e).put(a)}return Ne.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[p1(t),""],!1,!0);return TF(e).Bt(i).next(a=>{for(const u of a){if(u.collectionId!==t)break;r.push(Oc(u.parent))}return r})}}function TF(n){return wo(n,ep.store)}const CF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Io{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Io(e,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function DF(n,e,t){const r=n.store(qn.store),i=n.store(ss.store),a=[],u=IDBKeyRange.only(t.batchId);let h=0;const m=r.jt({range:u},(C,S,k)=>(h++,k.delete()));a.push(m.next(()=>{Tt(1===h)}));const E=[];for(const C of t.mutations){const S=ss.key(e,C.key.path,t.batchId);a.push(i.delete(S)),E.push(C.key)}return Ne.waitFor(a).next(()=>E)}function Cb(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ft();e=n.noDocument}return JSON.stringify(e).length}Io.DEFAULT_COLLECTION_PERCENTILE=10,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Io.DEFAULT=new Io(41943040,Io.DEFAULT_COLLECTION_PERCENTILE,Io.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Io.DISABLED=new Io(-1,0,0);class fM{constructor(e,t,r,i){this.userId=e,this.k=t,this.Jt=r,this.referenceDelegate=i,this.Yt={}}static Xt(e,t,r,i){Tt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new fM(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).jt({index:qn.userMutationsIndex,range:r},(i,a,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=Vm(e),u=gh(e);return u.add({}).next(h=>{Tt("number"==typeof h);const m=new aM(h,t,r,i),E=function(k,B,j){const ne=j.baseMutations.map(Qe=>bb(k.Gt,Qe)),we=j.mutations.map(Qe=>bb(k.Gt,Qe));return new qn(B,j.batchId,j.localWriteTime.toMillis(),ne,we)}(this.k,this.userId,m),C=[];let S=new _r((k,B)=>Kt(k.canonicalString(),B.canonicalString()));for(const k of i){const B=ss.key(this.userId,k.key.path,h);S=S.add(k.key.path.popLast()),C.push(u.put(E)),C.push(a.put(B,ss.PLACEHOLDER))}return S.forEach(k=>{C.push(this.Jt.addToCollectionParentIndex(e,k))}),e.addOnCommittedListener(()=>{this.Yt[h]=m.keys()}),Ne.waitFor(C).next(()=>m)})}lookupMutationBatch(e,t){return gh(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Bm(this.k,r)):null)}Zt(e,t){return this.Yt[t]?Ne.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Yt[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return gh(e).jt({index:qn.userMutationsIndex,range:i},(u,h,m)=>{h.userId===this.userId&&(Tt(h.batchId>=r),a=Bm(this.k,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return gh(e).jt({index:qn.userMutationsIndex,range:t,reverse:!0},(i,a,u)=>{r=a.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return gh(e).Bt(qn.userMutationsIndex,t).next(r=>r.map(i=>Bm(this.k,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=ss.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Vm(e).jt({range:i},(u,h,m)=>{const[E,C,S]=u,k=Oc(C);if(E===this.userId&&t.path.isEqual(k))return gh(e).get(S).next(B=>{if(!B)throw ft();Tt(B.userId===this.userId),a.push(Bm(this.k,B))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _r(Kt);const i=[];return t.forEach(a=>{const u=ss.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(u),m=Vm(e).jt({range:h},(E,C,S)=>{const[k,B,j]=E,ne=Oc(B);k===this.userId&&a.path.isEqual(ne)?r=r.add(j):S.done()});i.push(m)}),Ne.waitFor(i).next(()=>this.te(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=ss.prefixForPath(this.userId,r),u=IDBKeyRange.lowerBound(a);let h=new _r(Kt);return Vm(e).jt({range:u},(m,E,C)=>{const[S,k,B]=m,j=Oc(k);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(B)):C.done()}).next(()=>this.te(e,h))}te(e,t){const r=[],i=[];return t.forEach(a=>{i.push(gh(e).get(a).next(u=>{if(null===u)throw ft();Tt(u.userId===this.userId),r.push(Bm(this.k,u))}))}),Ne.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return DF(e.Wt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),Ne.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ne.resolve();const r=IDBKeyRange.lowerBound(ss.prefixForUser(this.userId)),i=[];return Vm(e).jt({range:r},(a,u,h)=>{if(a[0]===this.userId){const m=Oc(a[1]);i.push(m)}else h.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return SF(e,this.userId,t)}ne(e){return AF(e).get(this.userId).next(t=>t||new fh(this.userId,-1,""))}}function SF(n,e,t){const r=ss.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let u=!1;return Vm(n).jt({range:a,Kt:!0},(h,m,E)=>{const[C,S,k]=h;C===e&&S===i&&(u=!0),E.done()}).next(()=>u)}function gh(n){return wo(n,qn.store)}function Vm(n){return wo(n,ss.store)}function AF(n){return wo(n,fh.store)}class rp{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new rp(0)}static re(){return new rp(-1)}}class xH{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const r=new rp(t.highestTargetId);return t.highestTargetId=r.next(),this.ce(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(t=>Pt.fromTimestamp(new Ei(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.oe(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.ce(e,i)))}addTargetData(e,t){return this.ae(e,t).next(()=>this.oe(e).next(r=>(r.targetCount+=1,this.ue(t,r),this.ce(e,r))))}updateTargetData(e,t){return this.ae(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>jm(e).delete(t.targetId)).next(()=>this.oe(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.ce(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return jm(e).jt((u,h)=>{const m=gE(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>Ne.waitFor(a)).next(()=>i)}forEachTarget(e,t){return jm(e).jt((r,i)=>{const a=gE(i);t(a)})}oe(e){return MF(e).get(ra.key).next(t=>(Tt(null!==t),t))}ce(e,t){return MF(e).put(ra.key,t)}ae(e,t){return jm(e).put(wF(this.k,t))}ue(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.oe(e).next(t=>t.targetCount)}getTargetData(e,t){const r=nE(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return jm(e).jt({range:i,index:Eo.queryTargetsIndexName},(u,h,m)=>{const E=gE(h);hb(t,E.target)&&(a=E,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=mh(e);return t.forEach(u=>{const h=Pl(u.path);i.push(a.put(new Bi(r,h))),i.push(this.referenceDelegate.addReference(e,r,u))}),Ne.waitFor(i)}removeMatchingKeys(e,t,r){const i=mh(e);return Ne.forEach(t,a=>{const u=Pl(a.path);return Ne.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=mh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=mh(e);let a=In();return i.jt({range:r,Kt:!0},(u,h,m)=>{const E=Oc(u[1]),C=new lt(E);a=a.add(C)}).next(()=>a)}containsKey(e,t){const r=Pl(t.path),i=IDBKeyRange.bound([r],[p1(r)],!1,!0);let a=0;return mh(e).jt({index:Bi.documentTargetsIndex,Kt:!0,range:i},([u,h],m,E)=>{0!==u&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return jm(e).get(t).next(r=>r?gE(r):null)}}function jm(n){return wo(n,Eo.store)}function MF(n){return wo(n,ra.store)}function mh(n){return wo(n,Bi.store)}function ip(n){return pM.apply(this,arguments)}function pM(){return pM=(0,me.Z)(function*(n){if(n.code!==_e.FAILED_PRECONDITION||n.message!==pF)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),pM.apply(this,arguments)}function RF([n,e],[t,r]){const i=Kt(n,t);return 0===i?Kt(e,r):i}class NH{constructor(e){this.he=e,this.buffer=new _r(RF),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();RF(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kH{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const r=this.we?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,me.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){tp(i)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield ip(i)}yield t.me(e)}))}}class PH{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return Ne.resolve(ta.I);const r=new NH(t);return this.ge.forEachTarget(e,i=>r.de(i.sequenceNumber)).next(()=>this.ge.pe(e,i=>r.de(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.ge.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(CF)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CF):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let r,i,a,u,h,m,E;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,u=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),qA()<=Tr.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-C}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(E-m)+`ms\nTotal Duration: ${E-C}ms`),Ne.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class OH{constructor(e,t){this.db=e,this.garbageCollector=new PH(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Ee(e){let t=0;return this.pe(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(r,i)=>t(i))}addReference(e,t,r){return Db(e,r)}removeReference(e,t,r){return Db(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Db(e,t)}Ae(e,t){return function(r,i){let a=!1;return AF(r).Qt(u=>SF(r,u,i).next(h=>(h&&(a=!0),Ne.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Ie(e,(u,h)=>{if(h<=t){const m=this.Ae(e,u).next(E=>{if(!E)return a++,r.getEntry(e,u).next(()=>(r.removeEntry(u),mh(e).delete([0,Pl(u.path)])))});i.push(m)}}).next(()=>Ne.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Db(e,t)}Ie(e,t){const r=mh(e);let i,a=ta.I;return r.jt({index:Bi.documentTargetsIndex},([u,h],{path:m,sequenceNumber:E})=>{0===u?(a!==ta.I&&t(new lt(Oc(i)),a),a=E,i=m):a=ta.I}).next(()=>{a!==ta.I&&t(new lt(Oc(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Db(n,e){return mh(n).put((r=n.currentSequenceNumber,new Bi(0,Pl(e.path),r)));var r}class Hm{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){Zf(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return m1(this.inner)}}class xF{constructor(){this.changes=new Hm(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Pt.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:tr.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?Ne.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FH{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,r){return _h(e).put(Sb(t),r)}removeEntry(e,t){const r=_h(e),i=Sb(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Re(e,r)))}getEntry(e,t){return _h(e).get(Sb(t)).next(r=>this.be(t,r))}Pe(e,t){return _h(e).get(Sb(t)).next(r=>({document:this.be(t,r),size:Cb(r)}))}getEntries(e,t){let r=ja();return this.ve(e,t,(i,a)=>{const u=this.be(i,a);r=r.insert(i,u)}).next(()=>r)}Ve(e,t){let r=ja(),i=new si(lt.comparator);return this.ve(e,t,(a,u)=>{const h=this.be(a,u);r=r.insert(a,h),i=i.insert(a,Cb(u))}).next(()=>({documents:r,Se:i}))}ve(e,t,r){if(t.isEmpty())return Ne.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let u=a.getNext();return _h(e).jt({range:i},(h,m,E)=>{const C=lt.fromSegments(h);for(;u&&lt.comparator(u,C)<0;)r(u,null),u=a.getNext();u&&u.isEqual(C)&&(r(u,m),u=a.hasNext()?a.getNext():null),u?E.Lt(u.path.toArray()):E.done()}).next(()=>{for(;u;)r(u,null),u=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r){let i=ja();const a=t.path.length+1,u={};if(r.isEqual(Pt.min())){const h=t.path.toArray();u.range=IDBKeyRange.lowerBound(h)}else{const h=t.path.toArray(),m=cM(r);u.range=IDBKeyRange.lowerBound([h,m],!0),u.index=yr.collectionReadTimeIndex}return _h(e).jt(u,(h,m,E)=>{if(h.length!==a)return;const C=uM(this.k,m);t.path.isPrefixOf(C.key.path)?sE(t,C)&&(i=i.insert(C.key,C)):E.done()}).next(()=>i)}newChangeBuffer(e){return new LH(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return NF(e).get(Ru.key).next(t=>(Tt(!!t),t))}Re(e,t){return NF(e).put(Ru.key,t)}be(e,t){if(t){const r=uM(this.k,t);if(!r.isNoDocument()||!r.version.isEqual(Pt.min()))return r}return tr.newInvalidDocument(e)}}class LH extends xF{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Hm(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new _r((a,u)=>Kt(a.canonicalString(),u.canonicalString()));return this.changes.forEach((a,u)=>{const h=this.Ce.get(a);if(u.document.isValidDocument()){const m=vF(this.De.k,u.document,this.getReadTime(a));i=i.add(a.path.popLast()),r+=Cb(m)-h,t.push(this.De.addEntry(e,a,m))}else if(r-=h,this.trackRemovals){const m=vF(this.De.k,tr.newNoDocument(a,Pt.min()),this.getReadTime(a));t.push(this.De.addEntry(e,a,m))}else t.push(this.De.removeEntry(e,a))}),i.forEach(a=>{t.push(this.De.Jt.addToCollectionParentIndex(e,a))}),t.push(this.De.updateMetadata(e,r)),Ne.waitFor(t)}getFromCache(e,t){return this.De.Pe(e,t).next(r=>(this.Ce.set(t,r.size),r.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:r,Se:i})=>(i.forEach((a,u)=>{this.Ce.set(a,u)}),r))}}function NF(n){return wo(n,Ru.store)}function _h(n){return wo(n,yr.store)}function Sb(n){return n.path.toArray()}class UH{constructor(e){this.k=e}Nt(e,t,r,i){Tt(r<i&&r>=0&&i<=11);const a=new Tb("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(na.store),(h=e).createObjectStore(fh.store,{keyPath:fh.keyPath}),h.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0}),h.createObjectStore(ss.store),kF(e),function(h){h.createObjectStore(yr.store)}(e));let u=Ne.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(Bi.store),h.deleteObjectStore(Eo.store),h.deleteObjectStore(ra.store)}(e),kF(e)),u=u.next(()=>function(h){const m=h.store(ra.store),E=new ra(0,0,Pt.min().toTimestamp(),0);return m.put(ra.key,E)}(a))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,m){return m.store(qn.store).Bt().next(E=>{h.deleteObjectStore(qn.store),h.createObjectStore(qn.store,{keyPath:qn.keyPath,autoIncrement:!0}).createIndex(qn.userMutationsIndex,qn.userMutationsKeyPath,{unique:!0});const C=m.store(qn.store),S=E.map(k=>C.put(k));return Ne.waitFor(S)})}(e,a))),u=u.next(()=>{!function(h){h.createObjectStore(Fc.store,{keyPath:Fc.keyPath})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.Ne(a))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore(Ru.store)}(e),this.ke(a)))),r<7&&i>=7&&(u=u.next(()=>this.xe(a))),r<8&&i>=8&&(u=u.next(()=>this.$e(e,a))),r<9&&i>=9&&(u=u.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const m=h.objectStore(yr.store);m.createIndex(yr.readTimeIndex,yr.readTimeIndexPath,{unique:!1}),m.createIndex(yr.collectionReadTimeIndex,yr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(u=u.next(()=>this.Oe(a))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore(Om.store,{keyPath:Om.keyPath})})(e),function(h){h.createObjectStore(Fm.store,{keyPath:Fm.keyPath})}(e)})),u}ke(e){let t=0;return e.store(yr.store).jt((r,i)=>{t+=Cb(i)}).next(()=>{const r=new Ru(t);return e.store(Ru.store).put(Ru.key,r)})}Ne(e){const t=e.store(fh.store),r=e.store(qn.store);return t.Bt().next(i=>Ne.forEach(i,a=>{const u=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.Bt(qn.userMutationsIndex,u).next(h=>Ne.forEach(h,m=>{Tt(m.userId===a.userId);const E=Bm(this.k,m);return DF(e,a.userId,E).next(()=>{})}))}))}xe(e){const t=e.store(Bi.store),r=e.store(yr.store);return e.store(ra.store).get(ra.key).next(i=>{const a=[];return r.jt((u,h)=>{const m=new gn(u),E=[0,Pl(m)];a.push(t.get(E).next(C=>C?Ne.resolve():t.put(new Bi(0,Pl(m),i.highestListenSequenceNumber))))}).next(()=>Ne.waitFor(a))})}$e(e,t){e.createObjectStore(ep.store,{keyPath:ep.keyPath});const r=t.store(ep.store),i=new hM,a=u=>{if(i.add(u)){const h=u.lastSegment(),m=u.popLast();return r.put({collectionId:h,parent:Pl(m)})}};return t.store(yr.store).jt({Kt:!0},(u,h)=>{const m=new gn(u);return a(m.popLast())}).next(()=>t.store(ss.store).jt({Kt:!0},([u,h,m],E)=>{const C=Oc(h);return a(C.popLast())}))}Oe(e){const t=e.store(Eo.store);return t.jt((r,i)=>{const a=gE(i),u=wF(this.k,a);return t.put(u)})}}function kF(n){n.createObjectStore(Bi.store,{keyPath:Bi.keyPath}).createIndex(Bi.documentTargetsIndex,Bi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Eo.store,{keyPath:Eo.keyPath}).createIndex(Eo.queryTargetsIndexName,Eo.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(ra.store)}const gM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class mM{constructor(e,t,r,i,a,u,h,m,E,C){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Me=a,this.window=u,this.document=h,this.Fe=E,this.Le=C,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=S=>Promise.resolve(),!mM.Pt())throw new ke(_e.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new OH(this,i),this.Ge=t+"main",this.k=new yF(m),this.ze=new Ol(this.Ge,11,new UH(this.k)),this.He=new xH(this.referenceDelegate,this.k),this.Jt=new RH,this.Je=new FH(this.k,this.Jt),this.Ye=new AH,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===C&&Fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ke(_e.FAILED_PRECONDITION,gM);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new ta(e,this.Fe)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Me.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ab(e).put(new Fc(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(t=>{t||(this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.cn(e).next(()=>!1):!!t&&this.an(e).next(()=>!0))).catch(e=>{if(tp(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Me.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return mE(e).get(na.key).next(t=>Ne.resolve(this.un(t)))}hn(e){return Ab(e).delete(this.clientId)}ln(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=wo(r,Fc.store);return i.Bt().next(a=>{const u=e.dn(a,18e5),h=a.filter(m=>-1===u.indexOf(m));return Ne.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Xe)for(const r of t)e.Xe.removeItem(e.wn(r.clientId))}})()}nn(){this.je=this.Me.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Ne.resolve(!0):mE(e).get(na.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new ke(_e.FAILED_PRECONDITION,gM);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ab(e).Bt().next(r=>void 0===this.dn(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[na.store,Fc.store],t=>{const r=new _F(t,ta.I);return e.cn(r).next(()=>e.hn(r))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(r=>this.fn(r.updateTimeMs,t)&&!this._n(r.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>Ab(e).Bt().next(t=>this.dn(t,18e5).map(r=>r.clientId)))}get started(){return this.Ue}getMutationQueue(e){return fM.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,r){let a;return Be("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",CH,u=>(a=new _F(u,this.Be?this.Be.next():ta.I),"readwrite-primary"===t?this.rn(a).next(h=>!!h||this.on(a)).next(h=>{if(!h)throw Fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Me.enqueueRetryable(()=>this.We(!1)),new ke(_e.FAILED_PRECONDITION,pF);return r(a)}).next(h=>this.an(a).next(()=>h)):this.En(a).next(()=>r(a)))).then(u=>(a.raiseOnCommittedEvent(),u))}En(e){return mE(e).get(na.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)&&!this.un(t)&&!(this.Le||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ke(_e.FAILED_PRECONDITION,gM)})}an(e){const t=new na(this.clientId,this.allowTabSynchronization,Date.now());return mE(e).put(na.key,t)}static Pt(){return Ol.Pt()}cn(e){const t=mE(e);return t.get(na.key).next(r=>this.un(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete(na.key)):Ne.resolve())}fn(e,t){const r=Date.now();return!(e<r-t||e>r&&(Fr(`Detected an update time that is in the future: ${e} > ${r}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Me.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,O.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Me.enterRestrictedMode(!0),this.Me.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const r=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){Fr("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function mE(n){return wo(n,na.store)}function Ab(n){return wo(n,Fc.store)}function _M(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class BH{constructor(e,t){this.progress=e,this.In=t}}class PF{constructor(e,t,r){this.Je=e,this.An=t,this.Jt=r}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.bn(e,t,r))}bn(e,t,r){return this.Je.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Pn(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}vn(e,t){return this.Je.getEntries(e,t).next(r=>this.Vn(e,r).next(()=>r))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Pn(t,r))}getDocumentsMatchingQuery(e,t,r){return lt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Sn(e,t.path):JA(t)?this.Dn(e,t,r):this.Cn(e,t,r);var i}Sn(e,t){return this.Rn(e,new lt(t)).next(r=>{let i=rM();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Dn(e,t,r){const i=t.collectionGroup;let a=rM();return this.Jt.getCollectionParents(e,i).next(u=>Ne.forEach(u,h=>{const m=(E=t,C=h.child(i),new Pc(C,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,C;return this.Cn(e,m,r).next(E=>{E.forEach((C,S)=>{a=a.insert(C,S)})})}).next(()=>a))}Cn(e,t,r){let i,a;return this.Je.getDocumentsMatchingQuery(e,t,r).next(u=>(i=u,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(u=>(a=u,this.Nn(e,a,i).next(h=>{i=h;for(const m of a)for(const E of m.mutations){const C=E.key;let S=i.get(C);null==S&&(S=tr.newInvalidDocument(C),i=i.insert(C,S)),tM(E,S,m.localWriteTime),S.isFoundDocument()||(i=i.remove(C))}}))).next(()=>(i.forEach((u,h)=>{sE(t,h)||(i=i.remove(u))}),i))}Nn(e,t,r){let i=In();for(const u of t)for(const h of u.mutations)h instanceof hh&&null===r.get(h.key)&&(i=i.add(h.key));let a=r;return this.Je.getEntries(e,i).next(u=>(u.forEach((h,m)=>{m.isFoundDocument()&&(a=a.insert(h,m))}),a))}}class yM{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.kn=r,this.xn=i}static $n(e,t){let r=In(),i=In();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new yM(e,t.fromCache,r,i)}}class OF{On(e){this.Mn=e}getDocumentsMatchingQuery(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(Pt.min())?this.Fn(e,t):this.Mn.vn(e,i).next(a=>{const u=this.Ln(t,a);return(gb(t)||mb(t))&&this.Bn(t.limitType,u,i,r)?this.Fn(e,t):(qA()<=Tr.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),eM(t)),this.Mn.getDocumentsMatchingQuery(e,t,r).next(h=>(u.forEach(m=>{h=h.insert(m.key,m)}),h)))});var a}Ln(e,t){let r=new _r(R1(e));return t.forEach((i,a)=>{sE(e,a)&&(r=r.add(a))}),r}Bn(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Fn(e,t){return qA()<=Tr.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",eM(t)),this.Mn.getDocumentsMatchingQuery(e,t,Pt.min())}}class VH{constructor(e,t,r,i){this.persistence=e,this.Un=t,this.k=i,this.qn=new si(Kt),this.Kn=new Hm(a=>nE(a),hb),this.jn=Pt.min(),this.An=e.getMutationQueue(r),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new PF(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.On(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function FF(n,e,t,r){return new VH(n,e,t,r)}function LF(n,e){return vM.apply(this,arguments)}function vM(){return vM=(0,me.Z)(function*(n,e){const t=Ge(n);let r=t.An,i=t.Wn;const a=yield t.persistence.runTransaction("Handle user change","readonly",u=>{let h;return t.An.getAllMutationBatches(u).next(m=>(h=m,r=t.persistence.getMutationQueue(e),i=new PF(t.Qn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(u))).next(m=>{const E=[],C=[];let S=In();for(const k of h){E.push(k.batchId);for(const B of k.mutations)S=S.add(B.key)}for(const k of m){C.push(k.batchId);for(const B of k.mutations)S=S.add(B.key)}return i.vn(u,S).next(k=>({Gn:k,removedBatchIds:E,addedBatchIds:C}))})});return t.An=r,t.Wn=i,t.Un.On(t.Wn),a}),vM.apply(this,arguments)}function jH(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Qn.newChangeBuffer({trackRemovals:!0});return function(u,h,m,E){const C=m.batch,S=C.keys();let k=Ne.resolve();return S.forEach(B=>{k=k.next(()=>E.getEntry(h,B)).next(j=>{const ne=m.docVersions.get(B);Tt(null!==ne),j.version.compareTo(ne)<0&&(C.applyToRemoteDocument(j,m),j.isValidDocument()&&E.addEntry(j,m.commitVersion))})}),k.next(()=>u.An.removeMutationBatch(h,C))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.An.performConsistencyCheck(r)).next(()=>t.Wn.vn(r,i))})}function UF(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.He.getLastRemoteSnapshotVersion(t))}function HH(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.qn;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const u=t.Qn.newChangeBuffer({trackRemovals:!0});i=t.qn;const h=[];e.targetChanges.forEach((E,C)=>{const S=i.get(C);if(!S)return;h.push(t.He.removeMatchingKeys(a,E.removedDocuments,C).next(()=>t.He.addMatchingKeys(a,E.addedDocuments,C)));let k=S.withSequenceNumber(a.currentSequenceNumber);var B,j,ne;e.targetMismatches.has(C)?k=k.withResumeToken(ii.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):E.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(E.resumeToken,r)),i=i.insert(C,k),j=k,ne=E,(0===(B=S).resumeToken.approximateByteSize()||j.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8||ne.addedDocuments.size+ne.modifiedDocuments.size+ne.removedDocuments.size>0)&&h.push(t.He.updateTargetData(a,k))});let m=ja();if(e.documentUpdates.forEach((E,C)=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),h.push(BF(a,u,e.documentUpdates,r,void 0).next(E=>{m=E})),!r.isEqual(Pt.min())){const E=t.He.getLastRemoteSnapshotVersion(a).next(C=>t.He.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(E)}return Ne.waitFor(h).next(()=>u.apply(a)).next(()=>t.Wn.Vn(a,m)).next(()=>m)}).then(a=>(t.qn=i,a))}function BF(n,e,t,r,i){let a=In();return t.forEach(u=>a=a.add(u)),e.getEntries(n,a).next(u=>{let h=ja();return t.forEach((m,E)=>{const C=u.get(m),S=(null==i?void 0:i.get(m))||r;E.isNoDocument()&&E.version.isEqual(Pt.min())?(e.removeEntry(m,S),h=h.insert(m,E)):!C.isValidDocument()||E.version.compareTo(C.version)>0||0===E.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(E,S),h=h.insert(m,E)):Be("LocalStore","Ignoring outdated watch update for ",m,". Current version:",C.version," Watch version:",E.version)}),h})}function $H(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.An.getNextMutationBatchAfterBatchId(r,e)))}function $m(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.He.getTargetData(r,e).next(a=>a?(i=a,Ne.resolve(i)):t.He.allocateTargetId(r).next(u=>(i=new ph(e,u,0,r.currentSequenceNumber),t.He.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.qn.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.qn=t.qn.insert(r.targetId,r),t.Kn.set(e,r.targetId)),r})}function qm(n,e,t){return EM.apply(this,arguments)}function EM(){return EM=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=r.qn.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!tp(u))throw u;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.qn=r.qn.remove(e),r.Kn.delete(i.target)}),EM.apply(this,arguments)}function Mb(n,e,t){const r=Ge(n);let i=Pt.min(),a=In();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,m,E){const C=Ge(h),S=C.Kn.get(E);return void 0!==S?Ne.resolve(C.qn.get(S)):C.He.getTargetData(m,E)}(r,u,Va(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(u,h.targetId).next(m=>{a=m})}).next(()=>r.Un.getDocumentsMatchingQuery(u,e,t?i:Pt.min(),t?a:In())).next(h=>({documents:h,zn:a})))}function VF(n,e){const t=Ge(n),r=Ge(t.He),i=t.qn.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(u=>u?u.target:null))}function jF(n){const e=Ge(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const u=Ge(r);let h=ja(),m=cM(a);const E=_h(i),C=IDBKeyRange.lowerBound(m,!0);return E.jt({index:yr.readTimeIndex,range:C},(S,k)=>{const B=uM(u.k,k);h=h.insert(B.key,B),m=k.readTime}).next(()=>({In:h,readTime:EF(m)}))}(e.Qn,t,e.jn)).then(({In:t,readTime:r})=>(e.jn=r,t))}function wM(){return wM=(0,me.Z)(function*(n){const e=Ge(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=_h(r);let a=Pt.min();return i.jt({index:yr.readTimeIndex,reverse:!0},(u,h,m)=>{h.readTime&&(a=EF(h.readTime)),m.done()}).next(()=>a)}(t)).then(t=>{e.jn=t})}),wM.apply(this,arguments)}function IM(){return IM=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);let a=In(),u=ja(),h=z1();for(const C of t){const S=e.Hn(C.metadata.name);C.document&&(a=a.add(S)),u=u.insert(S,e.Jn(C)),h=h.insert(S,e.Yn(C.metadata.readTime))}const m=i.Qn.newChangeBuffer({trackRemovals:!0}),E=yield $m(i,(C=r,Va(Mm(gn.fromString(`__bundle__/docs/${C}`)))));var C;return i.persistence.runTransaction("Apply bundle documents","readwrite",C=>BF(C,m,u,Pt.min(),h).next(S=>(m.apply(C),S)).next(S=>i.He.removeMatchingKeysForTargetId(C,E.targetId).next(()=>i.He.addMatchingKeys(C,a,E.targetId)).next(()=>i.Wn.Vn(C,S)).next(()=>S)))}),IM.apply(this,arguments)}function WH(n,e){return bM.apply(this,arguments)}function bM(){return bM=(0,me.Z)(function*(n,e,t=In()){const r=yield $m(n,Va(dM(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const u=wi(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ye.saveNamedQuery(a,e);const h=r.withResumeToken(ii.EMPTY_BYTE_STRING,u);return i.qn=i.qn.insert(h.targetId,h),i.He.updateTargetData(a,h).next(()=>i.He.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.He.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ye.saveNamedQuery(a,e))})}),bM.apply(this,arguments)}class zH{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var r;return this.Xn.set(t.id,{id:(r=t).id,version:r.version,createTime:wi(r.createTime)}),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(r=t).name,query:dM(r.bundledQuery),readTime:wi(r.readTime)}),Ne.resolve();var r}}class TM{constructor(){this.ts=new _r(Ii.es),this.ns=new _r(Ii.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const r=new Ii(e,t);this.ts=this.ts.add(r),this.ns=this.ns.add(r)}rs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.os(new Ii(e,t))}cs(e,t){e.forEach(r=>this.removeReference(r,t))}us(e){const t=new lt(new gn([])),r=new Ii(t,e),i=new Ii(t,e+1),a=[];return this.ns.forEachInRange([r,i],u=>{this.os(u),a.push(u.key)}),a}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new lt(new gn([])),r=new Ii(t,e),i=new Ii(t,e+1);let a=In();return this.ns.forEachInRange([r,i],u=>{a=a.add(u.key)}),a}containsKey(e){const t=new Ii(e,0),r=this.ts.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Ii{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return lt.comparator(e.key,t.key)||Kt(e.fs,t.fs)}static ss(e,t){return Kt(e.fs,t.fs)||lt.comparator(e.key,t.key)}}class KH{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new _r(Ii.es)}checkEmpty(e){return Ne.resolve(0===this.An.length)}addMutationBatch(e,t,r,i){const a=this.ds;this.ds++;const u=new aM(a,t,r,i);this.An.push(u);for(const h of i)this.ws=this.ws.add(new Ii(h.key,a)),this.Jt.addToCollectionParentIndex(e,h.key.path.popLast());return Ne.resolve(u)}lookupMutationBatch(e,t){return Ne.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.gs(t+1),a=i<0?0:i;return Ne.resolve(this.An.length>a?this.An[a]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Ne.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ii(t,0),i=new Ii(t,Number.POSITIVE_INFINITY),a=[];return this.ws.forEachInRange([r,i],u=>{const h=this._s(u.fs);a.push(h)}),Ne.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new _r(Kt);return t.forEach(i=>{const a=new Ii(i,0),u=new Ii(i,Number.POSITIVE_INFINITY);this.ws.forEachInRange([a,u],h=>{r=r.add(h.fs)})}),Ne.resolve(this.ys(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;lt.isDocumentKey(a)||(a=a.child(""));const u=new Ii(new lt(a),0);let h=new _r(Kt);return this.ws.forEachWhile(m=>{const E=m.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(h=h.add(m.fs)),!0)},u),Ne.resolve(this.ys(h))}ys(e){const t=[];return e.forEach(r=>{const i=this._s(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.ps(t.batchId,"removed")),this.An.shift();let r=this.ws;return Ne.forEach(t.mutations,i=>{const a=new Ii(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ws=r})}ee(e){}containsKey(e,t){const r=new Ii(t,0),i=this.ws.firstAfterOrEqual(r);return Ne.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return Ne.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class ZH{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new si(lt.comparator),this.size=0}addEntry(e,t,r){const i=t.key,a=this.docs.get(i),u=a?a.size:0,h=this.Ts(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:h,readTime:r}),this.size+=h-u,this.Jt.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Ne.resolve(r?r.document.mutableCopy():tr.newInvalidDocument(t))}getEntries(e,t){let r=ja();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():tr.newInvalidDocument(i))}),Ne.resolve(r)}getDocumentsMatchingQuery(e,t,r){let i=ja();const a=new lt(t.path.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:h,value:{document:m,readTime:E}}=u.getNext();if(!t.path.isPrefixOf(h.path))break;E.compareTo(r)<=0||sE(t,m)&&(i=i.insert(m.key,m.mutableCopy()))}return Ne.resolve(i)}Es(e,t){return Ne.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YH(this)}getSize(e){return Ne.resolve(this.size)}}class YH extends xF{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.document.isValidDocument()?t.push(this.De.addEntry(e,i.document,this.getReadTime(r))):this.De.removeEntry(r)}),Ne.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class QH{constructor(e){this.persistence=e,this.Is=new Hm(t=>nE(t),hb),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.As=0,this.Rs=new TM,this.targetCount=0,this.bs=rp.ie()}forEachTarget(e,t){return this.Is.forEach((r,i)=>t(i)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.bs.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.As&&(this.As=t),Ne.resolve()}ae(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.bs=new rp(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ae(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.ae(t),Ne.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Is.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Is.delete(u),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),Ne.waitFor(a).next(()=>i)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const r=this.Is.get(t)||null;return Ne.resolve(r)}addMatchingKeys(e,t,r){return this.Rs.rs(t,r),Ne.resolve()}removeMatchingKeys(e,t,r){this.Rs.cs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(u=>{a.push(i.markPotentiallyOrphaned(e,u))}),Ne.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Rs.ls(t);return Ne.resolve(r)}containsKey(e,t){return Ne.resolve(this.Rs.containsKey(t))}}class XH{constructor(e,t){this.Ps={},this.Be=new ta(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new QH(this),this.Jt=new MH,this.Je=new ZH(this.Jt,r=>this.referenceDelegate.vs(r)),this.k=new yF(t),this.Ye=new zH(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.Ps[e.toKey()];return t||(t=new KH(this.Jt,this.referenceDelegate),this.Ps[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new JH(this.Be.next());return this.referenceDelegate.Vs(),r(i).next(a=>this.referenceDelegate.Ss(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ds(e,t){return Ne.or(Object.values(this.Ps).map(r=>()=>r.containsKey(e,t)))}}class JH extends gF{constructor(e){super(),this.currentSequenceNumber=e}}class CM{constructor(e){this.persistence=e,this.Cs=new TM,this.Ns=null}static ks(e){return new CM(e)}get xs(){if(this.Ns)return this.Ns;throw ft()}addReference(e,t,r){return this.Cs.addReference(r,t),this.xs.delete(r.toString()),Ne.resolve()}removeReference(e,t,r){return this.Cs.removeReference(r,t),this.xs.add(r.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(i=>this.xs.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.xs.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.xs,r=>{const i=lt.fromPath(r);return this.$s(e,i).next(a=>{a||t.removeEntry(i)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return Ne.or([()=>Ne.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function HF(n,e){return`firestore_clients_${n}_${e}`}function $F(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function DM(n,e){return`firestore_targets_${n}_${e}`}class Rb{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Os(e,t,r){const i=JSON.parse(r);let a,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(a=new ke(i.error.code,i.error.message))),u?new Rb(e,t,i.state,a):(Fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _E{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Os(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new ke(r.error.code,r.error.message))),a?new _E(e,r.state,i):(Fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Ms(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xb{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Os(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=wb();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=y1(r.activeTargetIds[u]),a=a.add(r.activeTargetIds[u]);return i?new xb(e,a):(Fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class SM{constructor(e,t){this.clientId=e,this.onlineState=t}static Os(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new SM(t.clientId,t.onlineState):(Fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class AM{constructor(){this.activeTargetIds=wb()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ms(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MM{constructor(e,t,r,i,a){this.window=e,this.Me=t,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new si(Kt),this.started=!1,this.js=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Qs=HF(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new AM),this.Gs=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static Pt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.Tn();for(const i of t){if(i===e.Bs)continue;const a=e.getItem(HF(e.persistenceKey,i));if(a){const u=xb.Os(i,a);u&&(e.Ks=e.Ks.insert(u.clientId,u))}}e.Xs();const r=e.storage.getItem(e.Js);if(r){const i=e.Zs(r);i&&e.ti(i)}for(const i of e.js)e.qs(i);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,r){this.ni(e,t,r),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(DM(this.persistenceKey,e));if(r){const i=_E.Os(e,r);i&&(t=i.state)}}return this.ii.Fs(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(DM(this.persistenceKey,e))}updateQueryState(e,t,r){this.ri(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.si(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ci()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Qs)return void Fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Me.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Gs.test(r.key)){if(null==r.newValue){const i=t.ai(r.key);return t.ui(i,null)}{const i=t.hi(r.key,r.newValue);if(i)return t.ui(i.clientId,i)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const i=t.li(r.key,r.newValue);if(i)return t.fi(i)}}else if(t.Hs.test(r.key)){if(null!==r.newValue){const i=t.di(r.key,r.newValue);if(i)return t.wi(i)}}else if(r.key===t.Js){if(null!==r.newValue){const i=t.Zs(r.newValue);if(i)return t.ti(i)}}else if(r.key===t.Ws){const i=function(a){let u=ta.I;if(null!=a)try{const h=JSON.parse(a);Tt("number"==typeof h),u=h}catch(h){Fr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==ta.I&&t.sequenceNumberHandler(i)}else if(r.key===t.Ys)return t.syncEngine._i()}else t.js.push(r)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Ms())}ni(e,t,r){const i=new Rb(this.currentUser,e,t,r),a=$F(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Ms())}si(e){const t=$F(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,r){const i=DM(this.persistenceKey,e),a=new _E(e,t,r);this.setItem(i,a.Ms())}ci(){this.setItem(this.Ys,"value-not-used")}ai(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const r=this.ai(e);return xb.Os(r,t)}li(e,t){const r=this.zs.exec(e),i=Number(r[1]);return Rb.Os(new Fi(void 0!==r[2]?r[2]:null),i,t)}di(e,t){const r=this.Hs.exec(e),i=Number(r[1]);return _E.Os(i,t)}Zs(e){return SM.Os(e)}fi(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),a=this.ei(r),u=[],h=[];return a.forEach(m=>{i.has(m)||u.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.yi(u,h).then(()=>{this.Ks=r})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=wb();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class qF{constructor(){this.pi=new AM,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.pi.Fs(e),this.Ti[e]||"not-current"}updateQueryState(e,t,r){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new AM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class e${Ei(e){}shutdown(){}}class GF{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.bi(),this.Pi=[],this.vi()}Ei(e){this.Pi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Pi)e(0)}bi(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Pi)e(1)}static Pt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const t$={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class n${constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Oi(e){this.ki(e)}Mi(e){this.xi(e)}}class r$ extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,r,i,a){const u=this.Ui(e,t);Be("RestConnection","Sending: ",u,r);const h={};return this.qi(h,i,a),this.Ki(e,u,h,r).then(m=>(Be("RestConnection","Received: ",m),m),m=>{throw Qv("RestConnection",`${e} failed with error: `,m,"url: ",u,"request:",r),m})}ji(e,t,r,i,a){return this.Bi(e,t,r,i,a)}qi(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+bm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}Ui(e,t){return`${this.Fi}/v1/${t}:${t$[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,r,i){return new Promise((a,u)=>{const h=new Tj;h.listenOnce(wj.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case $A.NO_ERROR:const E=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(E)),a(E);break;case $A.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),u(new ke(_e.DEADLINE_EXCEEDED,"Request time out"));break;case $A.HTTP_ERROR:const C=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',C,"response text:",h.getResponseText()),C>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const k=function(B){const j=B.toLowerCase().replace(/_/g,"-");return Object.values(_e).indexOf(j)>=0?j:_e.UNKNOWN}(S.status);u(new ke(k,S.message))}else u(new ke(_e.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new ke(_e.UNAVAILABLE,"Connection failed."));break;default:ft()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}Qi(e,t,r){const i=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=vj(),u=Ej(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new bj({})),this.qi(h.initMessageHeaders,t,r),(0,O.uI)()||(0,O.b$)()||(0,O.d)()||(0,O.w1)()||(0,O.Mn)()||(0,O.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Be("Connection","Creating WebChannel: "+m,h);const E=a.createWebChannel(m,h);let C=!1,S=!1;const k=new n$({Vi:j=>{S?Be("Connection","Not sending because WebChannel is closed:",j):(C||(Be("Connection","Opening WebChannel transport."),E.open(),C=!0),Be("Connection","WebChannel sending:",j),E.send(j))},Si:()=>E.close()}),B=(j,ne,we)=>{j.listen(ne,Qe=>{try{we(Qe)}catch(Je){setTimeout(()=>{throw Je},0)}})};return B(E,lb.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),B(E,lb.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),k.Oi())}),B(E,lb.EventType.ERROR,j=>{S||(S=!0,Qv("Connection","WebChannel transport errored:",j),k.Oi(new ke(_e.UNAVAILABLE,"The operation could not be completed")))}),B(E,lb.EventType.MESSAGE,j=>{var ne;if(!S){const we=j.data[0];Tt(!!we);const Qe=we,Je=Qe.error||(null===(ne=Qe[0])||void 0===ne?void 0:ne.error);if(Je){Be("Connection","WebChannel received error:",Je);const pt=Je.status;let Ze=function(bn){const rr=Br[bn];if(void 0!==rr)return G1(rr)}(pt),qt=Je.message;void 0===Ze&&(Ze=_e.INTERNAL,qt="Unknown error status: "+pt+" with message "+Je.message),S=!0,k.Oi(new ke(Ze,qt)),E.close()}else Be("Connection","WebChannel received:",we),k.Mi(we)}}),B(u,Ij.STAT_EVENT,j=>{j.stat===u1.PROXY?Be("Connection","Detected buffering proxy"):j.stat===u1.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{k.$i()},0),k}}function WF(){return"undefined"!=typeof window?window:null}function Nb(){return"undefined"!=typeof document?document:null}function yE(n){return new cH(n,!0)}class RM{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Me=e,this.timerId=t,this.Wi=r,this.Gi=i,this.zi=a,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Ji=this.Me.enqueueAfterDelay(this.timerId,i,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class zF{constructor(e,t,r,i,a,u,h,m){this.Me=e,this.nr=r,this.sr=i,this.ir=a,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.rr=0,this.cr=null,this.ar=null,this.stream=null,this.ur=new RM(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,me.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.cr&&(this.cr=this.Me.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,me.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}pr(){this.ar&&(this.ar.cancel(),this.ar=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.yr(),r.pr(),r.ur.cancel(),r.rr++,4!==e?r.ur.reset():t&&t.code===_e.RESOURCE_EXHAUSTED?(Fr(t.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),r.ur.Xi()):t&&t.code===_e.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Tr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.rr===t&&this.Ir(r,i)},r=>{e(()=>{const i=new ke(_e.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ar(i)})})}Ir(e,t){const r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{r(()=>(this.state=2,this.ar=this.Me.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(i=>{r(()=>this.Ar(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}dr(){var e=this;this.state=5,this.ur.Zi((0,me.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Me.enqueueAndForget(()=>this.rr===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i$ extends zF{constructor(e,t,r,i,a,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.k=a}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function fH(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ft(),i=e.targetChange.targetIds||[],a=function(m,E){return m.C?(Tt(void 0===E||"string"==typeof E),ii.fromBase64String(E||"")):(Tt(void 0===E||E instanceof Uint8Array),ii.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(m){const E=void 0===m.code?_e.UNKNOWN:G1(m.code);return new ke(E,m.message||"")}(u);t=new Z1(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Mu(n,r.document.name),a=wi(r.document.updateTime),u=new is({mapValue:{fields:r.document.fields}}),h=tr.newFoundDocument(i,a,u);t=new Ib(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Mu(n,r.document),a=r.readTime?wi(r.readTime):Pt.min(),u=tr.newNoDocument(i,a);t=new Ib([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=Mu(n,r.document);t=new Ib([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ft();{const r=e.filter,a=new tH(r.count||0);t=new K1(r.targetId,a)}}var m;return t}(this.k,e),r=function(i){if(!("targetChange"in i))return Pt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?wi(a.readTime):Pt.min()}(e);return this.listener.br(t,r)}Pr(e){const t={};t.database=fE(this.k),t.addTarget=function(i,a){let u;const h=a.target;return u=fb(h)?{documents:oF(i,h)}:{query:aF(i,h)},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?u.resumeToken=J1(i,a.resumeToken):a.snapshotVersion.compareTo(Pt.min())>0&&(u.readTime=dE(i,a.snapshotVersion.toTimestamp())),u}(this.k,e);const r=function gH(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ft()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.gr(t)}vr(e){const t={};t.database=fE(this.k),t.removeTarget=e,this.gr(t)}}class s$ extends zF{constructor(e,t,r,i,a,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.k=a,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function pH(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let a=wi(r.updateTime?r.updateTime:i);return a.isEqual(Pt.min())&&(a=wi(i)),new Xj(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=wi(e.commitTime);return this.listener.Cr(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=fE(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>bb(this.k,r))};this.gr(t)}}class o$ extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=r,this.k=i,this.$r=!1}Or(){if(this.$r)throw new ke(_e.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.Bi(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(_e.UNKNOWN,i.toString())})}ji(e,t,r){return this.Or(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.ir.ji(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===_e.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ke(_e.UNKNOWN,i.toString())})}terminate(){this.$r=!0}}class a${constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Mr=0,this.Fr=null,this.Lr=!0}Br(){0===this.Mr&&(this.Ur("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Mr++,this.Mr>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Mr=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(Fr(t),this.Lr=!1):Be("OnlineStateTracker",t)}jr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class l${constructor(e,t,r,i,a){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=a,this.Hr.Ei(h=>{r.enqueueAndForget((0,me.Z)(function*(){var m;yh(u)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,me.Z)(function*(E){const C=Ge(E);C.Gr.add(4),yield Gm(C),C.Jr.set("Unknown"),C.Gr.delete(4),yield vE(C)}),function(E){return m.apply(this,arguments)})(u))}))}),this.Jr=new a$(r,i)}}function vE(n){return xM.apply(this,arguments)}function xM(){return xM=(0,me.Z)(function*(n){if(yh(n))for(const e of n.zr)yield e(!0)}),xM.apply(this,arguments)}function Gm(n){return NM.apply(this,arguments)}function NM(){return NM=(0,me.Z)(function*(n){for(const e of n.zr)yield e(!1)}),NM.apply(this,arguments)}function kb(n,e){const t=Ge(n);t.Wr.has(e.targetId)||(t.Wr.set(e.targetId,e),OM(t)?PM(t):zm(t).lr()&&kM(t,e))}function EE(n,e){const t=Ge(n),r=zm(t);t.Wr.delete(e),r.lr()&&KF(t,e),0===t.Wr.size&&(r.lr()?r._r():yh(t)&&t.Jr.set("Unknown"))}function kM(n,e){n.Yr.X(e.targetId),zm(n).Pr(e)}function KF(n,e){n.Yr.X(e),zm(n).vr(e)}function PM(n){n.Yr=new aH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.Wr.get(e)||null}),zm(n).start(),n.Jr.Br()}function OM(n){return yh(n)&&!zm(n).hr()&&n.Wr.size>0}function yh(n){return 0===Ge(n).Gr.size}function ZF(n){n.Yr=void 0}function u$(n){return FM.apply(this,arguments)}function FM(){return FM=(0,me.Z)(function*(n){n.Wr.forEach((e,t)=>{kM(n,e)})}),FM.apply(this,arguments)}function c$(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,me.Z)(function*(n,e){ZF(n),OM(n)?(n.Jr.Kr(e),PM(n)):n.Jr.set("Unknown")}),LM.apply(this,arguments)}function d$(n,e,t){return UM.apply(this,arguments)}function UM(){return UM=(0,me.Z)(function*(n,e,t){if(n.Jr.set("Online"),e instanceof Z1&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,a){const u=a.cause;for(const h of a.targetIds)i.Wr.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.Wr.delete(h),i.Yr.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Pb(n,r)}else if(e instanceof Ib?n.Yr.ot(e):e instanceof K1?n.Yr.dt(e):n.Yr.ut(e),!t.isEqual(Pt.min()))try{const r=yield UF(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const u=i.Yr.gt(a);return u.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const E=i.Wr.get(m);E&&i.Wr.set(m,E.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach(h=>{const m=i.Wr.get(h);if(!m)return;i.Wr.set(h,m.withResumeToken(ii.EMPTY_BYTE_STRING,m.snapshotVersion)),KF(i,h);const E=new ph(m.target,h,1,m.sequenceNumber);kM(i,E)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield Pb(n,r)}var r}),UM.apply(this,arguments)}function Pb(n,e,t){return BM.apply(this,arguments)}function BM(){return BM=(0,me.Z)(function*(n,e,t){if(!tp(e))throw e;n.Gr.add(1),yield Gm(n),n.Jr.set("Offline"),t||(t=()=>UF(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.Gr.delete(1),yield vE(n)}))}),BM.apply(this,arguments)}function YF(n,e){return e().catch(t=>Pb(n,t,e))}function Wm(n){return VM.apply(this,arguments)}function VM(){return VM=(0,me.Z)(function*(n){const e=Ge(n),t=vh(e);let r=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;h$(e);)try{const i=yield $H(e.localStore,r);if(null===i){0===e.Qr.length&&t._r();break}r=i.batchId,f$(e,i)}catch(i){yield Pb(e,i)}QF(e)&&XF(e)}),VM.apply(this,arguments)}function h$(n){return yh(n)&&n.Qr.length<10}function f$(n,e){n.Qr.push(e);const t=vh(n);t.lr()&&t.Sr&&t.Dr(e.mutations)}function QF(n){return yh(n)&&!vh(n).hr()&&n.Qr.length>0}function XF(n){vh(n).start()}function p$(n){return jM.apply(this,arguments)}function jM(){return jM=(0,me.Z)(function*(n){vh(n).kr()}),jM.apply(this,arguments)}function g$(n){return HM.apply(this,arguments)}function HM(){return HM=(0,me.Z)(function*(n){const e=vh(n);for(const t of n.Qr)e.Dr(t.mutations)}),HM.apply(this,arguments)}function m$(n,e,t){return $M.apply(this,arguments)}function $M(){return $M=(0,me.Z)(function*(n,e,t){const r=n.Qr.shift(),i=lM.from(r,e,t);yield YF(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Wm(n)}),$M.apply(this,arguments)}function _$(n,e){return qM.apply(this,arguments)}function qM(){return qM=(0,me.Z)(function*(n,e){var t;e&&vh(n).Sr&&(yield(t=(0,me.Z)(function*(r,i){if(q1(a=i.code)&&a!==_e.ABORTED){const u=r.Qr.shift();vh(r).wr(),yield YF(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield Wm(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),QF(n)&&XF(n)}),qM.apply(this,arguments)}function JF(n,e){return GM.apply(this,arguments)}function GM(){return GM=(0,me.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=yh(t);t.Gr.add(3),yield Gm(t),r&&t.Jr.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Gr.delete(3),yield vE(t)}),GM.apply(this,arguments)}function WM(n,e){return zM.apply(this,arguments)}function zM(){return zM=(0,me.Z)(function*(n,e){const t=Ge(n);e?(t.Gr.delete(2),yield vE(t)):e||(t.Gr.add(2),yield Gm(t),t.Jr.set("Unknown"))}),zM.apply(this,arguments)}function zm(n){return n.Xr||(n.Xr=function(e,t,r){const i=Ge(e);return i.Or(),new i$(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:u$.bind(null,n),Ni:c$.bind(null,n),br:d$.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Xr.wr(),OM(n)?PM(n):n.Jr.set("Unknown")):(yield n.Xr.stop(),ZF(n))});return function(t){return e.apply(this,arguments)}}())),n.Xr}function vh(n){return n.Zr||(n.Zr=function(e,t,r){const i=Ge(e);return i.Or(),new s$(t,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)}(n.datastore,n.asyncQueue,{Di:p$.bind(null,n),Ni:_$.bind(null,n),Nr:g$.bind(null,n),Cr:m$.bind(null,n)}),n.zr.push(function(){var e=(0,me.Z)(function*(t){t?(n.Zr.wr(),yield Wm(n)):(yield n.Zr.stop(),n.Qr.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Qr.length} pending writes`),n.Qr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Zr}class KM{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,a){const u=Date.now()+r,h=new KM(e,t,u,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ke(_e.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(n,e){if(Fr("AsyncQueue",`${e}: ${n}`),tp(n))return new ke(_e.UNAVAILABLE,`${e}: ${n}`);throw n}class Zm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||lt.comparator(t.key,r.key):(t,r)=>lt.comparator(t.key,r.key),this.keyedMap=rM(),this.sortedSet=new si(this.comparator)}static emptySet(e){return new Zm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Zm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Zm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class eL{constructor(){this.eo=new si(lt.comparator)}track(e){const t=e.doc.key,r=this.eo.get(t);r?0!==e.type&&3===r.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==r.type?this.eo=this.eo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.eo=this.eo.remove(t):1===e.type&&2===r.type?this.eo=this.eo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):ft():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,r)=>{e.push(r)}),e}}class Ym{constructor(e,t,r,i,a,u,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(u=>{a.push({type:0,doc:u})}),new Ym(e,t,Zm.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iE(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class y${constructor(){this.so=void 0,this.listeners=[]}}class v${constructor(){this.queries=new Hm(e=>M1(e),iE),this.onlineState="Unknown",this.io=new Set}}function ZM(n,e){return YM.apply(this,arguments)}function YM(){return YM=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new y$),i)try{a.so=yield t.onListen(r)}catch(u){const h=Km(u,`Initialization of query '${eM(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.ro(t.onlineState),a.so&&e.oo(a.so)&&JM(t)}),YM.apply(this,arguments)}function QM(n,e){return XM.apply(this,arguments)}function XM(){return XM=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const u=a.listeners.indexOf(e);u>=0&&(a.listeners.splice(u,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),XM.apply(this,arguments)}function E$(n,e){const t=Ge(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.oo(i)&&(r=!0);u.so=i}}r&&JM(t)}function w$(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function JM(n){n.io.forEach(e=>{e.next()})}class eR{constructor(e,t,r){this.query=e,this.co=t,this.ao=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}oo(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Ym(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.ao?this.ho(e)&&(this.co.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.co.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.ao&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Ym.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.ao=!0,this.co.next(e)}}class I${constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class tL{constructor(e){this.k=e}Hn(e){return Mu(this.k,e)}Jn(e){return e.metadata.exists?iF(this.k,e.document,!1):tr.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return wi(e)}}class b${constructor(e,t,r){this.mo=e,this.localStore=t,this.k=r,this.queries=[],this.documents=[],this.progress=nL(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,r=new tL(this.k);for(const i of e)if(i.metadata.queries){const a=r.Hn(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||In()).add(a);t.set(u,h)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function GH(n,e,t,r){return IM.apply(this,arguments)}(e.localStore,new tL(e.k),e.documents,e.mo.id),r=e.po(e.documents);for(const i of e.queries)yield WH(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new BH(Object.assign({},e.progress),t)})()}}function nL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class rL{constructor(e){this.key=e}}class iL{constructor(e){this.key=e}}class sL{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=In(),this.mutatedKeys=In(),this.Ao=R1(e),this.Ro=new Zm(this.Ao)}get bo(){return this.To}Po(e,t){const r=t?t.vo:new eL,i=t?t.Ro:this.Ro;let a=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const m=gb(this.query)&&i.size===this.query.limit?i.last():null,E=mb(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((C,S)=>{const k=i.get(C),B=sE(this.query,S)?S:null,j=!!k&&this.mutatedKeys.has(k.key),ne=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let we=!1;k&&B?k.data.isEqual(B.data)?j!==ne&&(r.track({type:3,doc:B}),we=!0):this.Vo(k,B)||(r.track({type:2,doc:B}),we=!0,(m&&this.Ao(B,m)>0||E&&this.Ao(B,E)<0)&&(h=!0)):!k&&B?(r.track({type:0,doc:B}),we=!0):k&&!B&&(r.track({type:1,doc:k}),we=!0,(m||E)&&(h=!0)),we&&(B?(u=u.add(B),a=ne?a.add(C):a.delete(C)):(u=u.delete(C),a=a.delete(C)))}),gb(this.query)||mb(this.query))for(;u.size>this.query.limit;){const C=gb(this.query)?u.last():u.first();u=u.delete(C.key),a=a.delete(C.key),r.track({type:1,doc:C})}return{Ro:u,vo:r,Bn:h,mutatedKeys:a}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const a=e.vo.no();a.sort((E,C)=>function(S,k){const B=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft()}};return B(S)-B(k)}(E.type,C.type)||this.Ao(E.doc,C.doc)),this.So(r);const u=t?this.Do():[],h=0===this.Io.size&&this.current?1:0,m=h!==this.Eo;return this.Eo=h,0!==a.length||m?{snapshot:new Ym(this.query,e.Ro,i,a,e.mutatedKeys,0===h,m,!1),Co:u}:{Co:u}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new eL,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(t=>this.To=this.To.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.To=this.To.delete(t)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=In(),this.Ro.forEach(r=>{this.No(r.key)&&(this.Io=this.Io.add(r.key))});const t=[];return e.forEach(r=>{this.Io.has(r)||t.push(new iL(r))}),this.Io.forEach(r=>{e.has(r)||t.push(new rL(r))}),t}ko(e){this.To=e.zn,this.Io=In();const t=this.Po(e.documents);return this.applyChanges(t,!0)}xo(){return Ym.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class T${constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class C${constructor(e){this.key=e,this.$o=!1}}class D${constructor(e,t,r,i,a,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=u,this.Oo={},this.Mo=new Hm(h=>M1(h),iE),this.Fo=new Map,this.Lo=new Set,this.Bo=new si(lt.comparator),this.Uo=new Map,this.qo=new TM,this.Ko={},this.jo=new Map,this.Qo=rp.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function S$(n,e){return tR.apply(this,arguments)}function tR(){return tR=(0,me.Z)(function*(n,e){const t=TR(n);let r,i;const a=t.Mo.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.xo();else{const u=yield $m(t.localStore,Va(e)),h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield nR(t,e,r,"current"===h),t.isPrimaryClient&&kb(t.remoteStore,u)}return i}),tR.apply(this,arguments)}function nR(n,e,t,r){return rR.apply(this,arguments)}function rR(){return rR=(0,me.Z)(function*(n,e,t,r){n.Go=(C,S,k)=>{return(B=(0,me.Z)(function*(j,ne,we,Qe){let Je=ne.view.Po(we);Je.Bn&&(Je=yield Mb(j.localStore,ne.query,!1).then(({documents:qt})=>ne.view.Po(qt,Je)));const pt=Qe&&Qe.targetChanges.get(ne.targetId),Ze=ne.view.applyChanges(Je,j.isPrimaryClient,pt);return fR(j,ne.targetId,Ze.Co),Ze.snapshot}),function(j,ne,we,Qe){return B.apply(this,arguments)})(n,C,S,k);var B};const i=yield Mb(n.localStore,e,!0),a=new sL(e,i.zn),u=a.Po(i.documents),h=cE.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(u,n.isPrimaryClient,h);fR(n,t,m.Co);const E=new T$(e,t,a);return n.Mo.set(e,E),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),m.snapshot}),rR.apply(this,arguments)}function A$(n,e){return iR.apply(this,arguments)}function iR(){return iR=(0,me.Z)(function*(n,e){const t=Ge(n),r=t.Mo.get(e),i=t.Fo.get(r.targetId);if(i.length>1)return t.Fo.set(r.targetId,i.filter(a=>!iE(a,e))),void t.Mo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),EE(t.remoteStore,r.targetId),Qm(t,r.targetId)}).catch(ip))):(Qm(t,r.targetId),yield qm(t.localStore,r.targetId,!0))}),iR.apply(this,arguments)}function sR(){return sR=(0,me.Z)(function*(n,e,t){const r=CR(n);try{const i=yield function(a,u){const h=Ge(a),m=Ei.now(),E=u.reduce((S,k)=>S.add(k.key),In());let C;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.Wn.vn(S,E).next(k=>{C=k;const B=[];for(const j of u){const ne=eH(j,C.get(j.key));null!=ne&&B.push(new hh(j.key,ne,I1(ne.value.mapValue),Ur.exists(!0)))}return h.An.addMutationBatch(S,m,B,u)})).then(S=>(S.applyToLocalDocumentSet(C),{batchId:S.batchId,changes:C}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let m=a.Ko[a.currentUser.toKey()];m||(m=new si(Kt)),m=m.insert(u,h),a.Ko[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Lc(r,i.changes),yield Wm(r.remoteStore)}catch(i){const a=Km(i,"Failed to persist write");t.reject(a)}}),sR.apply(this,arguments)}function oL(n,e){return oR.apply(this,arguments)}function oR(){return oR=(0,me.Z)(function*(n,e){const t=Ge(n);try{const r=yield HH(t.localStore,e);e.targetChanges.forEach((i,a)=>{const u=t.Uo.get(a);u&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.$o=!0:i.modifiedDocuments.size>0?Tt(u.$o):i.removedDocuments.size>0&&(Tt(u.$o),u.$o=!1))}),yield Lc(t,r,e)}catch(r){yield ip(r)}}),oR.apply(this,arguments)}function aL(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Mo.forEach((a,u)=>{const h=u.view.ro(e);h.snapshot&&i.push(h.snapshot)}),function(a,u){const h=Ge(a);h.onlineState=u;let m=!1;h.queries.forEach((E,C)=>{for(const S of C.listeners)S.ro(u)&&(m=!0)}),m&&JM(h)}(r.eventManager,e),i.length&&r.Oo.br(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function R$(n,e,t){return aR.apply(this,arguments)}function aR(){return aR=(0,me.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Uo.get(e),a=i&&i.key;if(a){let u=new si(lt.comparator);u=u.insert(a,tr.newNoDocument(a,Pt.min()));const h=In().add(a),m=new uE(Pt.min(),new Map,new _r(Kt),u,h);yield oL(r,m),r.Bo=r.Bo.remove(a),r.Uo.delete(e),pR(r)}else yield qm(r.localStore,e,!1).then(()=>Qm(r,e,t)).catch(ip)}),aR.apply(this,arguments)}function x$(n,e){return lR.apply(this,arguments)}function lR(){return lR=(0,me.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield jH(t.localStore,e);hR(t,r,null),dR(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Lc(t,i)}catch(i){yield ip(i)}}),lR.apply(this,arguments)}function N$(n,e,t){return uR.apply(this,arguments)}function uR(){return uR=(0,me.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(a,u){const h=Ge(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let E;return h.An.lookupMutationBatch(m,u).next(C=>(Tt(null!==C),E=C.keys(),h.An.removeMutationBatch(m,C))).next(()=>h.An.performConsistencyCheck(m)).next(()=>h.Wn.vn(m,E))})}(r.localStore,e);hR(r,e,t),dR(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Lc(r,i)}catch(i){yield ip(i)}}),uR.apply(this,arguments)}function cR(){return cR=(0,me.Z)(function*(n,e){const t=Ge(n);yh(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const u=Ge(a);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.An.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.jo.get(r)||[];i.push(e),t.jo.set(r,i)}catch(r){const i=Km(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),cR.apply(this,arguments)}function dR(n,e){(n.jo.get(e)||[]).forEach(t=>{t.resolve()}),n.jo.delete(e)}function hR(n,e,t){const r=Ge(n);let i=r.Ko[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Ko[r.currentUser.toKey()]=i}}function Qm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Mo.delete(r),t&&n.Oo.zo(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.qo.us(e).forEach(r=>{n.qo.containsKey(r)||lL(n,r)})}function lL(n,e){n.Lo.delete(e.path.canonicalString());const t=n.Bo.get(e);null!==t&&(EE(n.remoteStore,t),n.Bo=n.Bo.remove(e),n.Uo.delete(t),pR(n))}function fR(n,e,t){for(const r of t)r instanceof rL?(n.qo.addReference(r.key,e),P$(n,r)):r instanceof iL?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.qo.removeReference(r.key,e),n.qo.containsKey(r.key)||lL(n,r.key)):ft()}function P$(n,e){const t=e.key,r=t.path.canonicalString();n.Bo.get(t)||n.Lo.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.Lo.add(r),pR(n))}function pR(n){for(;n.Lo.size>0&&n.Bo.size<n.maxConcurrentLimboResolutions;){const e=n.Lo.values().next().value;n.Lo.delete(e);const t=new lt(gn.fromString(e)),r=n.Qo.next();n.Uo.set(r,new C$(t)),n.Bo=n.Bo.insert(t,r),kb(n.remoteStore,new ph(Va(Mm(t.path)),r,2,ta.I))}}function Lc(n,e,t){return gR.apply(this,arguments)}function gR(){return gR=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[],u=[];var h;r.Mo.isEmpty()||(r.Mo.forEach((h,m)=>{u.push(r.Go(m,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,E.fromCache?"not-current":"current"),i.push(E);const C=yM.$n(m.targetId,E);a.push(C)}}))}),yield Promise.all(u),r.Oo.br(i),yield(h=(0,me.Z)(function*(m,E){const C=Ge(m);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Ne.forEach(E,k=>Ne.forEach(k.kn,B=>C.persistence.referenceDelegate.addReference(S,k.targetId,B)).next(()=>Ne.forEach(k.xn,B=>C.persistence.referenceDelegate.removeReference(S,k.targetId,B)))))}catch(S){if(!tp(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const k=S.targetId;if(!S.fromCache){const B=C.qn.get(k),ne=B.withLastLimboFreeSnapshotVersion(B.snapshotVersion);C.qn=C.qn.insert(k,ne)}}}),function(m,E){return h.apply(this,arguments)})(r.localStore,a))}),gR.apply(this,arguments)}function O$(n,e){return mR.apply(this,arguments)}function mR(){return mR=(0,me.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield LF(t.localStore,e);t.currentUser=e,(i=t).jo.forEach(u=>{u.forEach(h=>{h.reject(new ke(_e.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.jo.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Lc(t,r.Gn)}var i}),mR.apply(this,arguments)}function F$(n,e){const t=Ge(n),r=t.Uo.get(e);if(r&&r.$o)return In().add(r.key);{let i=In();const a=t.Fo.get(e);if(!a)return i;for(const u of a){const h=t.Mo.get(u);i=i.unionWith(h.view.bo)}return i}}function L$(n,e){return _R.apply(this,arguments)}function _R(){return _R=(0,me.Z)(function*(n,e){const t=Ge(n),r=yield Mb(t.localStore,e.query,!0),i=e.view.ko(r);return t.isPrimaryClient&&fR(t,e.targetId,i.Co),i}),_R.apply(this,arguments)}function U$(n){return yR.apply(this,arguments)}function yR(){return yR=(0,me.Z)(function*(n){const e=Ge(n);return jF(e.localStore).then(t=>Lc(e,t))}),yR.apply(this,arguments)}function B$(n,e,t,r){return vR.apply(this,arguments)}function vR(){return vR=(0,me.Z)(function*(n,e,t,r){const i=Ge(n),a=yield function(u,h){const m=Ge(u),E=Ge(m.An);return m.persistence.runTransaction("Lookup mutation documents","readonly",C=>E.Zt(C,h).next(S=>S?m.Wn.vn(C,S):Ne.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Wm(i.remoteStore):"acknowledged"===t||"rejected"===t?(hR(i,e,r||null),dR(i,e),h=e,Ge(Ge(i.localStore).An).ee(h)):ft(),yield Lc(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),vR.apply(this,arguments)}function ER(){return ER=(0,me.Z)(function*(n,e){const t=Ge(n);if(TR(t),CR(t),!0===e&&!0!==t.Wo){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield uL(t,r.toArray());t.Wo=!0,yield WM(t.remoteStore,!0);for(const a of i)kb(t.remoteStore,a)}else if(!1===e&&!1!==t.Wo){const r=[];let i=Promise.resolve();t.Fo.forEach((a,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(Qm(t,u),qm(t.localStore,u,!0))),EE(t.remoteStore,u)}),yield i,yield uL(t,r),function(a){const u=Ge(a);u.Uo.forEach((h,m)=>{EE(u.remoteStore,m)}),u.qo.hs(),u.Uo=new Map,u.Bo=new si(lt.comparator)}(t),t.Wo=!1,yield WM(t.remoteStore,!1)}}),ER.apply(this,arguments)}function uL(n,e,t){return wR.apply(this,arguments)}function wR(){return wR=(0,me.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[];for(const u of e){let h;const m=r.Fo.get(u);if(m&&0!==m.length){h=yield $m(r.localStore,Va(m[0]));for(const E of m){const C=r.Mo.get(E),S=yield L$(r,C);S.snapshot&&a.push(S.snapshot)}}else{const E=yield VF(r.localStore,u);h=yield $m(r.localStore,E),yield nR(r,cL(E),u,!1)}i.push(h)}return r.Oo.br(a),i}),wR.apply(this,arguments)}function cL(n){return S1(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function j$(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Tn()}function H$(n,e,t,r){return IR.apply(this,arguments)}function IR(){return IR=(0,me.Z)(function*(n,e,t,r){const i=Ge(n);if(i.Wo)Be("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(e))switch(t){case"current":case"not-current":{const a=yield jF(i.localStore),u=uE.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Lc(i,a,u);break}case"rejected":yield qm(i.localStore,e,!0),Qm(i,e,r);break;default:ft()}}),IR.apply(this,arguments)}function $$(n,e,t){return bR.apply(this,arguments)}function bR(){return bR=(0,me.Z)(function*(n,e,t){const r=TR(n);if(r.Wo){for(const i of e){if(r.Fo.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield VF(r.localStore,i),u=yield $m(r.localStore,a);yield nR(r,cL(a),u.targetId,!1),kb(r.remoteStore,u)}for(const i of t)r.Fo.has(i)&&(yield qm(r.localStore,i,!1).then(()=>{EE(r.remoteStore,i),Qm(r,i)}).catch(ip))}}),bR.apply(this,arguments)}function TR(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F$.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R$.bind(null,e),e.Oo.br=E$.bind(null,e.eventManager),e.Oo.zo=w$.bind(null,e.eventManager),e}function CR(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=x$.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N$.bind(null,e),e}class dL{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.k=yE(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return FF(this.persistence,new OF,e.initialUser,this.k)}Yo(e){return new XH(CM.ks,this.k)}Jo(e){return new qF}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hL extends dL{constructor(e,t,r){super(),this.tc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield function qH(n){return wM.apply(this,arguments)}(r.localStore),yield r.tc.initialize(r,e),yield CR(r.tc.syncEngine),yield Wm(r.tc.remoteStore),yield r.persistence.sn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Zo(e){return FF(this.persistence,new OF,e.initialUser,this.k)}Xo(e){return new kH(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=_M(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Io.withCacheSize(this.cacheSizeBytes):Io.DEFAULT;return new mM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,WF(),Nb(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new qF}}class G$ extends hL{constructor(e,t){super(e,t,!1),this.tc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.tc.syncEngine;r.sharedClientState instanceof MM&&(r.sharedClientState.syncEngine={mi:B$.bind(null,i),gi:H$.bind(null,i),yi:$$.bind(null,i),Tn:j$.bind(null,i),_i:U$.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.sn(function(){var a=(0,me.Z)(function*(u){yield function V$(n,e){return ER.apply(this,arguments)}(r.tc.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):u||r.gcScheduler.stop())});return function(u){return a.apply(this,arguments)}}())})()}Jo(e){const t=WF();if(!MM.Pt(t))throw new ke(_e.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=_M(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new MM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class DR{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>aL(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=O$.bind(null,r.syncEngine),yield WM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new v$}createDatastore(e){const t=yE(e.databaseInfo.databaseId),r=new r$(e.databaseInfo);return new o$(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>aL(this.syncEngine,h,0),u=GF.Pt()?new GF:new e$,new l$(t,r,i,a,u);var t,r,i,a,u}createSyncEngine(e,t){return function(r,i,a,u,h,m,E){const C=new D$(r,i,a,u,h,m);return E&&(C.Wo=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Ge(t);Be("RemoteStore","RemoteStore shutting down."),r.Gr.add(5),yield Gm(r),r.Hr.shutdown(),r.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fL(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ob{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ec(this.observer.next,e)}error(e){this.observer.error?this.ec(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}nc(){this.muted=!0}ec(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class W${constructor(e,t){this.sc=e,this.k=t,this.metadata=new vi,this.buffer=new Uint8Array,this.ic=new TextDecoder("utf-8"),this.rc().then(r=>{r&&r._o()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.sc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.rc()})()}rc(){var e=this;return(0,me.Z)(function*(){const t=yield e.oc();if(null===t)return null;const r=e.ic.decode(t),i=Number(r);isNaN(i)&&e.cc(`length string (${r}) is not valid number`);const a=yield e.ac(i);return new I$(JSON.parse(a),t.length+i)})()}uc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oc(){var e=this;return(0,me.Z)(function*(){for(;e.uc()<0&&!(yield e.hc()););if(0===e.buffer.length)return null;const t=e.uc();t<0&&e.cc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ac(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.hc())&&t.cc("Reached the end of bundle when more is expected.");const r=t.ic.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}cc(e){throw this.sc.cancel(),new Error(`Invalid bundle format: ${e}`)}hc(){var e=this;return(0,me.Z)(function*(){const t=yield e.sc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class z${constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new ke(_e.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(a,u){const h=Ge(a),m=fE(h.k)+"/documents",E={documents:u.map(B=>hE(h.k,B))},C=yield h.ji("BatchGetDocuments",m,E),S=new Map;C.forEach(B=>{const j=function hH(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=Mu(t,r.found.name),a=wi(r.found.updateTime),u=new is({mapValue:{fields:r.found.fields}});return tr.newFoundDocument(i,a,u)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=Mu(t,r.missing),a=wi(r.readTime);return tr.newNoDocument(i,a)}(n,e):ft()}(h.k,B);S.set(j.key.toString(),j)});const k=[];return u.forEach(B=>{const j=S.get(B.toString());Tt(!!j),k.push(j)}),k}),function(a,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new lE(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=lt.fromPath(i);e.mutations.push(new nM(a,e.precondition(a)))}),yield(r=(0,me.Z)(function*(i,a){const u=Ge(i),h=fE(u.k)+"/documents",m={writes:a.map(E=>bb(u.k,E))};yield u.Bi("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ft();t=Pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new ke(_e.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ur.updateTime(t):Ur.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new ke(_e.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ur.updateTime(t)}return Ur.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class K${constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.lc=5,this.ur=new RM(this.asyncQueue,"transaction_retry")}run(){this.lc-=1,this.fc()}fc(){var e=this;this.ur.Zi((0,me.Z)(function*(){const t=new z$(e.datastore),r=e.dc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.wc(a)}))}).catch(i=>{e.wc(i)})}))}dc(e){try{const t=this.updateFunction(e);return!Yf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wc(e){this.lc>0&&this._c(e)?(this.lc-=1,this.asyncQueue.enqueueAndForget(()=>(this.fc(),Promise.resolve()))):this.deferred.reject(e)}_c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!q1(t)}return!1}}class Z${constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fi.UNAUTHENTICATED,this.clientId=f1.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,me.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(Be("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ke(_e.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Km(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function pL(n,e){return SR.apply(this,arguments)}function SR(){return SR=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(a){r.isEqual(a)||(yield LF(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),SR.apply(this,arguments)}function gL(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield MR(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>JF(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>JF(e.remoteStore,a)),n.onlineComponents=e}),AR.apply(this,arguments)}function MR(n){return RR.apply(this,arguments)}function RR(){return RR=(0,me.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield pL(n,new dL)),n.offlineComponents}),RR.apply(this,arguments)}function Fb(n){return xR.apply(this,arguments)}function xR(){return xR=(0,me.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield gL(n,new DR)),n.onlineComponents}),xR.apply(this,arguments)}function mL(n){return MR(n).then(e=>e.persistence)}function NR(n){return MR(n).then(e=>e.localStore)}function _L(n){return Fb(n).then(e=>e.remoteStore)}function kR(n){return Fb(n).then(e=>e.syncEngine)}function Xm(n){return PR.apply(this,arguments)}function PR(){return PR=(0,me.Z)(function*(n){const e=yield Fb(n),t=e.eventManager;return t.onListen=S$.bind(null,e.syncEngine),t.onUnlisten=A$.bind(null,e.syncEngine),t}),PR.apply(this,arguments)}function yL(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,u,h,m){const E=new Ob({next:S=>{a.enqueueAndForget(()=>QM(i,C));const k=S.docs.has(u);!k&&S.fromCache?m.reject(new ke(_e.UNAVAILABLE,"Failed to get document because the client is offline.")):k&&S.fromCache&&h&&"server"===h.source?m.reject(new ke(_e.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new eR(Mm(u.path),E,{includeMetadataChanges:!0,wo:!0});return ZM(i,C)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}function vL(n,e,t={}){const r=new vi;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,u,h,m){const E=new Ob({next:S=>{a.enqueueAndForget(()=>QM(i,C)),S.fromCache&&"server"===h.source?m.reject(new ke(_e.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),C=new eR(u,E,{includeMetadataChanges:!0,wo:!0});return ZM(i,C)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}class iq{constructor(e,t,r,i,a,u,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class Jm{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Jm&&e.projectId===this.projectId&&e.database===this.database}}const EL=new Map;function OR(n,e,t){if(!t)throw new ke(_e.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wL(n,e,t,r){if(!0===e&&!0===r)throw new ke(_e.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function IL(n){if(!lt.isDocumentKey(n))throw new ke(_e.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bL(n){if(lt.isDocumentKey(n))throw new ke(_e.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Lb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ft()}function Xt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ke(_e.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Lb(n);throw new ke(_e.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function TL(n,e){if(e<=0)throw new ke(_e.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CL{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new ke(_e.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new ke(_e.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,wL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wE{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CL({}),this._settingsFrozen=!1,e instanceof Jm?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ke(_e.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Jm(i.options.projectId)}(e))}get app(){if(!this._app)throw new ke(_e.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new ke(_e.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CL(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Sj;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new xj(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new ke(_e.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=EL.get(e);t&&(Be("ComponentProvider","Removing Datastore"),EL.delete(e),t.terminate())}(this),Promise.resolve()}}class Gn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Gn(this.firestore,e,this._key)}}class os{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new os(this.firestore,e,this._query)}}class xu extends os{constructor(e,t,r){super(e,t,Mm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new lt(e))}withConverter(e){return new xu(this.firestore,e,this._path)}}function DL(n,e,...t){if(n=(0,O.m9)(n),OR("collection","path",e),n instanceof wE){const r=gn.fromString(e,...t);return bL(r),new xu(n,null,r)}{if(!(n instanceof Gn||n instanceof xu))throw new ke(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return bL(r),new xu(n.firestore,null,r)}}function Ub(n,e,...t){if(n=(0,O.m9)(n),1===arguments.length&&(e=f1.A()),OR("doc","path",e),n instanceof wE){const r=gn.fromString(e,...t);return IL(r),new Gn(n,null,new lt(r))}{if(!(n instanceof Gn||n instanceof xu))throw new ke(_e.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return IL(r),new Gn(n.firestore,n instanceof xu?n.converter:null,new lt(r))}}function SL(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),(n instanceof Gn||n instanceof xu)&&(e instanceof Gn||e instanceof xu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function AL(n,e){return n=(0,O.m9)(n),e=(0,O.m9)(e),n instanceof os&&e instanceof os&&n.firestore===e.firestore&&iE(n._query,e._query)&&n.converter===e.converter}class aq{constructor(){this.mc=Promise.resolve(),this.gc=[],this.yc=!1,this.Tc=[],this.Ec=null,this.Ic=!1,this.Ac=!1,this.Rc=[],this.ur=new RM(this,"async_queue_retry"),this.bc=()=>{const t=Nb();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ur.er()};const e=Nb();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}get isShuttingDown(){return this.yc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pc(),this.vc(e)}enterRestrictedMode(e){if(!this.yc){this.yc=!0,this.Ac=e||!1;const t=Nb();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}}enqueue(e){if(this.Pc(),this.yc)return new Promise(()=>{});const t=new vi;return this.vc(()=>this.yc&&this.Ac?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.gc.push(e),this.Vc()))}Vc(){var e=this;return(0,me.Z)(function*(){if(0!==e.gc.length){try{yield e.gc[0](),e.gc.shift(),e.ur.reset()}catch(t){if(!tp(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.gc.length>0&&e.ur.Zi(()=>e.Vc())}})()}vc(e){const t=this.mc.then(()=>(this.Ic=!0,e().catch(r=>{throw this.Ec=r,this.Ic=!1,Fr("INTERNAL UNHANDLED ERROR: ",function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),u}(r)),r}).then(r=>(this.Ic=!1,r))));return this.mc=t,t}enqueueAfterDelay(e,t,r){this.Pc(),this.Rc.indexOf(e)>-1&&(t=0);const i=KM.createAndSchedule(this,e,t,r,a=>this.Sc(a));return this.Tc.push(i),i}Pc(){this.Ec&&ft()}verifyOperationInProgress(){}Dc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.mc,yield t}while(t!==e.mc)})()}Cc(e){for(const t of this.Tc)if(t.timerId===e)return!0;return!1}Nc(e){return this.Dc().then(()=>{this.Tc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Dc()})}kc(e){this.Rc.push(e)}Sc(e){const t=this.Tc.indexOf(e);this.Tc.splice(t,1)}}function FR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class lq{constructor(){this._progressObserver={},this._taskCompletionResolver=new vi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class nr extends wE{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new aq,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ML(this),this._firestoreClient.terminate()}}function Vr(n){return n._firestoreClient||ML(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ML(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new iq(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new Z$(n._authCredentials,n._appCheckCredentials,n._queue,r)}function RL(n,e,t){const r=new vi;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield pL(n,t),yield gL(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===_e.FAILED_PRECONDITION||a.code===_e.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function xL(n){if(n._initialized||n._terminated)throw new ke(_e.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Uc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new ke(_e.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Li(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Nu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nu(ii.fromBase64String(e))}catch(t){throw new ke(_e.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nu(ii.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sp{constructor(e){this._methodName=e}}class Bb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ke(_e.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ke(_e.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const yq=/^__.*__$/;class vq{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new hh(e,this.data,this.fieldMask,t,this.fieldTransforms):new aE(e,this.data,t,this.fieldTransforms)}}class NL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new hh(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function kL(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft()}}class Vb{constructor(e,t,r,i,a,u){this.settings=e,this.databaseId=t,this.k=r,this.ignoreUndefinedProperties=i,void 0===a&&this.xc(),this.fieldTransforms=a||[],this.fieldMask=u||[]}get path(){return this.settings.path}get $c(){return this.settings.$c}Oc(e){return new Vb(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Oc({path:r,Fc:!1});return i.Lc(e),i}Bc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Oc({path:r,Fc:!1});return i.xc(),i}Uc(e){return this.Oc({path:void 0,Fc:!0})}qc(e){return $b(e,this.settings.methodName,this.settings.Kc||!1,this.path,this.settings.jc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lc(this.path.get(e))}Lc(e){if(0===e.length)throw this.qc("Document fields must not be empty");if(kL(this.$c)&&yq.test(e))throw this.qc('Document fields cannot begin and end with "__"')}}class Eq{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=r||yE(e)}Qc(e,t,r,i=!1){return new Vb({$c:e,methodName:t,jc:r,path:Li.emptyPath(),Fc:!1,Kc:i},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function op(n){const e=n._freezeSettings(),t=yE(n._databaseId);return new Eq(n._databaseId,!!e.ignoreUndefinedProperties,t)}function jb(n,e,t,r,i,a={}){const u=n.Qc(a.merge||a.mergeFields?2:0,e,t,i);VR("Data must be an object, but it was:",u,r);const h=FL(r,u);let m,E;if(a.merge)m=new Cm(u.fieldMask),E=u.fieldTransforms;else if(a.mergeFields){const C=[];for(const S of a.mergeFields){const k=jR(e,S,t);if(!u.contains(k))throw new ke(_e.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);UL(C,k)||C.push(k)}m=new Cm(C),E=u.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,E=u.fieldTransforms;return new vq(new is(h),m,E)}class IE extends sp{_toFieldTransform(e){if(2!==e.$c)throw e.qc(1===e.$c?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof IE}}function PL(n,e,t){return new Vb({$c:3,jc:e.settings.jc,methodName:n._methodName,Fc:t},e.databaseId,e.k,e.ignoreUndefinedProperties)}class LR extends sp{_toFieldTransform(e){return new oE(e.path,new xm)}isEqual(e){return e instanceof LR}}class wq extends sp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=PL(this,e,!0),r=this.Wc.map(a=>ap(a,t)),i=new Xf(r);return new oE(e.path,i)}isEqual(e){return this===e}}class Iq extends sp{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=PL(this,e,!0),r=this.Wc.map(a=>ap(a,t)),i=new Jf(r);return new oE(e.path,i)}isEqual(e){return this===e}}class bq extends sp{constructor(e,t){super(e),this.Gc=t}_toFieldTransform(e){const t=new Nm(e.k,k1(e.k,this.Gc));return new oE(e.path,t)}isEqual(e){return this===e}}function UR(n,e,t,r){const i=n.Qc(1,e,t);VR("Data must be an object, but it was:",i,r);const a=[],u=is.empty();Zf(r,(m,E)=>{const C=Hb(e,m,t);E=(0,O.m9)(E);const S=i.Bc(C);if(E instanceof IE)a.push(C);else{const k=ap(E,S);null!=k&&(a.push(C),u.set(C,k))}});const h=new Cm(a);return new NL(u,h,i.fieldTransforms)}function BR(n,e,t,r,i,a){const u=n.Qc(1,e,t),h=[jR(e,r,t)],m=[i];if(a.length%2!=0)throw new ke(_e.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let k=0;k<a.length;k+=2)h.push(jR(e,a[k])),m.push(a[k+1]);const E=[],C=is.empty();for(let k=h.length-1;k>=0;--k)if(!UL(E,h[k])){const B=h[k];let j=m[k];j=(0,O.m9)(j);const ne=u.Bc(B);if(j instanceof IE)E.push(B);else{const we=ap(j,ne);null!=we&&(E.push(B),C.set(B,we))}}const S=new Cm(E);return new NL(C,S,u.fieldTransforms)}function OL(n,e,t,r=!1){return ap(t,n.Qc(r?4:3,e))}function ap(n,e){if(LL(n=(0,O.m9)(n)))return VR("Unsupported field value:",e,n),FL(n,e);if(n instanceof sp)return function(t,r){if(!kL(r.$c))throw r.qc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qc(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.$c)throw e.qc("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const u of t){let h=ap(u,r.Uc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,O.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return k1(r.k,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ei.fromDate(t);return{timestampValue:dE(r.k,i)}}if(t instanceof Ei){const i=new Ei(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:dE(r.k,i)}}if(t instanceof Bb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Nu)return{bytesValue:J1(r.k,t._byteString)};if(t instanceof Gn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.qc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:iM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.qc(`Unsupported field value: ${Lb(t)}`)}(n,e)}function FL(n,e){const t={};return m1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zf(n,(r,i)=>{const a=ap(i,e.Mc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function LL(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ei||n instanceof Bb||n instanceof Nu||n instanceof Gn||n instanceof sp)}function VR(n,e,t){if(!LL(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Lb(t);throw e.qc("an object"===r?n+" a custom object":n+" "+r)}var r}function jR(n,e,t){if((e=(0,O.m9)(e))instanceof Uc)return e._internalPath;if("string"==typeof e)return Hb(n,e);throw $b("Field path arguments must be of type string or ",n,!1,void 0,t)}const Tq=new RegExp("[~\\*/\\[\\]]");function Hb(n,e,t){if(e.search(Tq)>=0)throw $b(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Uc(...e.split("."))._internalPath}catch(r){throw $b(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $b(n,e,t,r,i){const a=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||u)&&(m+=" (found",a&&(m+=` in field ${r}`),u&&(m+=` in document ${i}`),m+=")"),new ke(_e.INVALID_ARGUMENT,h+n+m)}function UL(n,e){return n.some(t=>t.isEqual(e))}class bE{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qb("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cq extends bE{data(){return super.data()}}function qb(n,e){return"string"==typeof e?Hb(n,e):e instanceof Uc?e._internalPath:e._delegate._internalPath}class lp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Bc extends bE{constructor(e,t,r,i,a,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new TE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qb("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class TE extends Bc{data(e={}){return super.data(e)}}class Eh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new lp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new TE(this._firestore,this._userDataWriter,r.key,r,new lp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ke(_e.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new TE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new lp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new TE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new lp(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,E=-1;return 0!==u.type&&(m=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),1!==u.type&&(a=a.add(u.doc),E=a.indexOf(u.doc.key)),{type:Dq(u.type),doc:h,oldIndex:m,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Dq(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft()}}function BL(n,e){return n instanceof Bc&&e instanceof Bc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Eh&&e instanceof Eh&&n._firestore===e._firestore&&AL(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function VL(n){if(mb(n)&&0===n.explicitOrderBy.length)throw new ke(_e.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class CE{}function wh(n,...e){for(const t of e)n=t._apply(n);return n}class Sq extends CE{constructor(e,t,r){super(),this.zc=e,this.Hc=t,this.Jc=r,this.type="where"}_apply(e){const t=op(e.firestore),r=function(i,a,u,h,m,E,C){let S;if(m.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new ke(_e.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){WL(C,E);const B=[];for(const j of C)B.push(GL(h,i,j));S={arrayValue:{values:B}}}else S=GL(h,i,C)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||WL(C,E),S=OL(u,"where",C,"in"===E||"not-in"===E);const k=Bs.create(m,E,S);return function(B,j){if(j.V()){const we=XA(B);if(null!==we&&!we.isEqual(j.field))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${we.toString()}' and '${j.field.toString()}'`);const Qe=QA(B);null!==Qe&&zL(0,j.field,Qe)}const ne=function(we,Qe){for(const Je of we.filters)if(Qe.indexOf(Je.op)>=0)return Je.op;return null}(B,function(we){switch(we){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ne)throw new ke(_e.INVALID_ARGUMENT,ne===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ne.toString()}' filters.`)}(i,k),k}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new os(e.firestore,e.converter,function(i,a){const u=i.filters.concat([a]);return new Pc(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class Mq extends CE{constructor(e,t){super(),this.zc=e,this.Yc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new ke(_e.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new ke(_e.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new Am(i,a);return function(h,m){if(null===QA(h)){const E=XA(h);null!==E&&zL(0,E,m.field)}}(r,u),u}(e._query,this.zc,this.Yc);return new os(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Pc(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class jL extends CE{constructor(e,t,r){super(),this.type=e,this.Xc=t,this.Zc=r}_apply(e){return new os(e.firestore,e.converter,A1(e._query,this.Xc,this.Zc))}}class HL extends CE{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=qL(e,this.type,this.ta,this.ea);return new os(e.firestore,e.converter,(i=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class $L extends CE{constructor(e,t,r){super(),this.type=e,this.ta=t,this.ea=r}_apply(e){const t=qL(e,this.type,this.ta,this.ea);return new os(e.firestore,e.converter,(i=t,new Pc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function qL(n,e,t,r){if(t[0]=(0,O.m9)(t[0]),t[0]instanceof bE)return function(i,a,u,h,m){if(!h)throw new ke(_e.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const E=[];for(const C of Rm(i))if(C.field.isKeyField())E.push(cb(a,h.key));else{const S=h.data.field(C.field);if(WA(S))throw new ke(_e.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const k=C.field.canonicalString();throw new ke(_e.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${k}' (used as the orderBy) does not exist.`)}E.push(S)}return new rE(E,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=op(n.firestore);return function(a,u,h,m,E,C){const S=a.explicitOrderBy;if(E.length>S.length)throw new ke(_e.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const k=[];for(let B=0;B<E.length;B++){const j=E[B];if(S[B].field.isKeyField()){if("string"!=typeof j)throw new ke(_e.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof j}`);if(!JA(a)&&-1!==j.indexOf("/"))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${j}' contains a slash.`);const ne=a.path.child(gn.fromString(j));if(!lt.isDocumentKey(ne))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ne}' is not because it contains an odd number of segments.`);const we=new lt(ne);k.push(cb(u,we))}else{const ne=OL(h,m,j);k.push(ne)}}return new rE(k,C)}(n._query,n.firestore._databaseId,i,e,t,r)}}function GL(n,e,t){if("string"==typeof(t=(0,O.m9)(t))){if(""===t)throw new ke(_e.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!JA(e)&&-1!==t.indexOf("/"))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gn.fromString(t));if(!lt.isDocumentKey(r))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cb(n,new lt(r))}if(t instanceof Gn)return cb(n,t._key);throw new ke(_e.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lb(t)}.`)}function WL(n,e){if(!Array.isArray(n)||0===n.length)throw new ke(_e.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new ke(_e.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function zL(n,e,t){if(!t.isEqual(e))throw new ke(_e.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class HR{convertValue(e,t="none"){switch(Qf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ft()}}convertObject(e,t){const r={};return Zf(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new Bb(Lr(e.latitude),Lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_1(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Jv(e));default:return null}}convertTimestamp(e){const t=dh(e);return new Ei(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gn.fromString(e);Tt(hF(r));const i=new Jm(r.get(1),r.get(3)),a=new lt(r.popFirst(5));return i.isEqual(t)||Fr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function Gb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Lq extends HR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}class KL{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=op(e)}set(e,t,r){this._verifyNotCommitted();const i=Ih(e,this._firestore),a=Gb(i.converter,t,r),u=jb(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Ur.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Ih(e,this._firestore);let u;return u="string"==typeof(t=(0,O.m9)(t))||t instanceof Uc?BR(this._dataReader,"WriteBatch.update",a._key,t,r,i):UR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(u.toMutation(a._key,Ur.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ih(e,this._firestore);return this._mutations=this._mutations.concat(new lE(t._key,Ur.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ke(_e.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ih(n,e){if((n=(0,O.m9)(n)).firestore!==e)throw new ke(_e.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class up extends HR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function ZL(n,e,t){n=Xt(n,Gn);const r=Xt(n.firestore,nr),i=Gb(n.converter,e,t);return e_(r,[jb(op(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Ur.none())])}function YL(n,e,t,...r){n=Xt(n,Gn);const i=Xt(n.firestore,nr),a=op(i);let u;return u="string"==typeof(e=(0,O.m9)(e))||e instanceof Uc?BR(a,"updateDoc",n._key,e,t,r):UR(a,"updateDoc",n._key,e),e_(i,[u.toMutation(n._key,Ur.exists(!0))])}function QL(n,...e){var t,r,i;n=(0,O.m9)(n);let a={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||FR(e[u])||(a=e[u],u++);const h={includeMetadataChanges:a.includeMetadataChanges};if(FR(e[u])){const S=e[u];e[u]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[u+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[u+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,E,C;if(n instanceof Gn)E=Xt(n.firestore,nr),C=Mm(n._key.path),m={next:S=>{e[u]&&e[u]($R(E,n,S))},error:e[u+1],complete:e[u+2]};else{const S=Xt(n,os);E=Xt(S.firestore,nr),C=S._query;const k=new up(E);m={next:B=>{e[u]&&e[u](new Eh(E,k,S,B))},error:e[u+1],complete:e[u+2]},VL(n._query)}return function(S,k,B,j){const ne=new Ob(j),we=new eR(k,ne,B);return S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return ZM(yield Xm(S),we)})),()=>{ne.nc(),S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return QM(yield Xm(S),we)}))}}(Vr(E),C,h,m)}function e_(n,e){return function(t,r){const i=new vi;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function M$(n,e,t){return sR.apply(this,arguments)}(yield kR(t),r,i)})),i.promise}(Vr(n),e)}function $R(n,e,t){const r=t.docs.get(e._key),i=new up(n);return new Bc(n,i,e._key,r,new lp(t.hasPendingWrites,t.fromCache),e.converter)}class zq extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=op(e)}get(e){const t=Ih(e,this._firestore),r=new Lq(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ft();const a=i[0];if(a.isFoundDocument())return new bE(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new bE(this._firestore,r,t._key,null,t.converter);throw ft()})}set(e,t,r){const i=Ih(e,this._firestore),a=Gb(i.converter,t,r),u=jb(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const a=Ih(e,this._firestore);let u;return u="string"==typeof(t=(0,O.m9)(t))||t instanceof Uc?BR(this._dataReader,"Transaction.update",a._key,t,r,i):UR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,u),this}delete(e){const t=Ih(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ih(e,this._firestore),r=new up(this._firestore);return super.get(e).then(i=>new Bc(this._firestore,r,t._key,i._document,new lp(!1,!1),t.converter))}}function GR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ke("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function JL(){if("undefined"==typeof Uint8Array)throw new ke("unimplemented","Uint8Arrays are not available in this environment.")}function eU(){if(!function Oj(){return"undefined"!=typeof atob}())throw new ke("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){bm=Bn.SDK_VERSION,(0,Bn._registerComponent)(new br.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new nr(i,new Mj(t.getProvider("auth-internal")),new Nj(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Bn.registerVersion)(c1,"3.4.4",n),(0,Bn.registerVersion)(c1,"3.4.4","esm2017")}();class DE{constructor(e){this._delegate=e}static fromBase64String(e){return eU(),new DE(Nu.fromBase64String(e))}static fromUint8Array(e){return JL(),new DE(Nu.fromUint8Array(e))}toBase64(){return eU(),this._delegate.toBase64()}toUint8Array(){return JL(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function WR(n){return function nG(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class rG{enableIndexedDbPersistence(e,t){return function cq(n,e){xL(n=Xt(n,nr));const t=Vr(n),r=n._freezeSettings(),i=new DR;return RL(t,i,new hL(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function dq(n){xL(n=Xt(n,nr));const e=Vr(n),t=n._freezeSettings(),r=new DR;return RL(e,r,new G$(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function hq(n){if(n._initialized&&!n._terminated)throw new ke(_e.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!Ol.Pt())return Promise.resolve();const i=r+"main";yield Ol.delete(i)}),function(r){return t.apply(this,arguments)})(_M(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class tU{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Jm||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Qv("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function sq(n,e,t,r={}){var i;const a=(n=Xt(n,wE))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Qv("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Fi.MOCK_USER;else{u=(0,O.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new ke(_e.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Fi(m)}n._authCredentials=new Aj(new d1(u,h))}}(this._delegate,e,t,r)}enableNetwork(){return function pq(n){return function Y$(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield mL(n),t=yield _L(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i.Gr.delete(0),vE(i)}(t)}))}(Vr(n=Xt(n,nr)))}(this._delegate)}disableNetwork(){return function gq(n){return function Q$(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield mL(n),t=yield _L(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const a=Ge(i);a.Gr.add(0),yield Gm(a),a.Jr.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Vr(n=Xt(n,nr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,wL("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function fq(n){return function(e){const t=new vi;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function k$(n,e){return cR.apply(this,arguments)}(yield kR(e),t)})),t.promise}(Vr(n=Xt(n,nr)))}(this._delegate)}onSnapshotsInSync(e){return function Wq(n,e){return function eq(n,e){const t=new Ob(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Xm(n),i=t,Ge(r).io.add(i),void i.next();var r,i})),()=>{t.nc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield Xm(n),i=t,void Ge(r).io.delete(i);var r,i}))}}(Vr(n=Xt(n,nr)),FR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new ke("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new t_(this,DL(this._delegate,e))}catch(t){throw Vs(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ha(this,Ub(this._delegate,e))}catch(t){throw Vs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new js(this,function oq(n,e){if(n=Xt(n,wE),OR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ke(_e.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new os(n,null,(t=e,new Pc(gn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Vs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Kq(n,e){return function tq(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const r=yield(i=n,Fb(i).then(a=>a.datastore));var i;new K$(n.asyncQueue,r,e,t).run()})),t.promise}(Vr(n=Xt(n,nr)),t=>e(new zq(n,t)))}(this._delegate,t=>e(new nU(this,t)))}batch(){return Vr(this._delegate),new rU(new KL(this._delegate,e=>e_(this._delegate,e)))}loadBundle(e){return function mq(n,e){const t=Vr(n=Xt(n,nr)),r=new lq;return function nq(n,e,t,r){const i=function(a,u){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,E){if(m instanceof Uint8Array)return fL(m,E);if(m instanceof ArrayBuffer)return fL(new Uint8Array(m),E);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new W$(m,u);var m}(t,yE(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function q$(n,e,t){const r=Ge(n);var i;(i=(0,me.Z)(function*(a,u,h){try{const m=yield u.getMetadata();if(yield function(k,B){const j=Ge(k),ne=wi(B.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",we=>j.Ye.getBundleMetadata(we,B.id)).then(we=>!!we&&we.createTime.compareTo(ne)>=0)}(a.localStore,m))return yield u.close(),void h._completeWith((k=m,{taskState:"Success",documentsLoaded:k.totalDocuments,bytesLoaded:k.totalBytes,totalDocuments:k.totalDocuments,totalBytes:k.totalBytes}));h._updateProgress(nL(m));const E=new b$(m,a.localStore,u.k);let C=yield u.Ho();for(;C;){const k=yield E.yo(C);k&&h._updateProgress(k),C=yield u.Ho()}const S=yield E.complete();yield Lc(a,S.In,void 0),yield function(k,B){const j=Ge(k);return j.persistence.runTransaction("Save bundle","readwrite",ne=>j.Ye.saveBundleMetadata(ne,B))}(a.localStore,m),h._completeWith(S.progress)}catch(m){Qv("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m)}var k}),function(a,u,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield kR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function _q(n,e){return function rq(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ye.getNamedQuery(a,r))}(yield NR(n),e)}))}(Vr(n=Xt(n,nr)),e).then(t=>t?new os(n,null,t.query):null)}(this._delegate,e).then(t=>t?new js(this,t):null)}}class Wb extends HR{constructor(e){super(),this.firestore=e}convertBytes(e){return new DE(new Nu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ha.forKey(t,this.firestore,null)}}class nU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Wb(e)}get(e){const t=dp(e);return this._delegate.get(t).then(r=>new SE(this._firestore,new Bc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=dp(e);return r?(GR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=dp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=dp(e);return this._delegate.delete(t),this}}class rU{constructor(e){this._delegate=e}set(e,t,r){const i=dp(e);return r?(GR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=dp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=dp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class cp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new TE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new AE(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=cp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new cp(e,new Wb(e),t),i.set(t,a)),a}}cp.INSTANCES=new WeakMap;class Ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new ke("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ha(t,new Gn(t._delegate,r,new lt(e)))}static forKey(e,t,r){return new Ha(t,new Gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new t_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new t_(this.firestore,DL(this._delegate,e))}catch(t){throw Vs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,O.m9)(e))instanceof Gn&&SL(this._delegate,e)}set(e,t){t=GR("DocumentReference.set",t);try{return t?ZL(this._delegate,e,t):ZL(this._delegate,e)}catch(r){throw Vs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?YL(this._delegate,e):YL(this._delegate,e,t,...r)}catch(i){throw Vs(i,"updateDoc()","DocumentReference.update()")}}delete(){return function qq(n){return e_(Xt(n.firestore,nr),[new lE(n._key,Ur.none())])}(this._delegate)}onSnapshot(...e){const t=iU(e),r=sU(e,i=>new SE(this.firestore,new Bc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return QL(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Bq(n){n=Xt(n,Gn);const e=Xt(n.firestore,nr),t=Vr(e),r=new up(e);return function X$(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,u){try{const h=yield function(m,E){const C=Ge(m);return C.persistence.runTransaction("read document","readonly",S=>C.Wn.Rn(S,E))}(i,a);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new ke(_e.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=Km(h,`Failed to get document '${a} from cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield NR(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Bc(e,r,n._key,i,new lp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function Vq(n){n=Xt(n,Gn);const e=Xt(n.firestore,nr);return yL(Vr(e),n._key,{source:"server"}).then(t=>$R(e,n,t))}(this._delegate):function Uq(n){n=Xt(n,Gn);const e=Xt(n.firestore,nr);return yL(Vr(e),n._key).then(t=>$R(e,n,t))}(this._delegate),t.then(r=>new SE(this.firestore,new Bc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ha(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function Vs(n,e,t){return n.message=n.message.replace(e,t),n}function iU(n){for(const e of n)if("object"==typeof e&&!WR(e))return e;return{}}function sU(n,e){var t,r;let i;return i=WR(n[0])?n[0]:WR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class SE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return BL(this._delegate,e._delegate)}}class AE extends SE{data(e){const t=this._delegate.data(e);return function Dj(n,e){n||ft()}(void 0!==t),t}}class js{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Wb(e)}where(e,t,r){try{return new js(this.firestore,wh(this._delegate,function Aq(n,e,t){const r=e,i=qb("where",n);return new Sq(i,r,t)}(e,t,r)))}catch(i){throw Vs(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new js(this.firestore,wh(this._delegate,function Rq(n,e="asc"){const t=e,r=qb("orderBy",n);return new Mq(r,t)}(e,t)))}catch(r){throw Vs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new js(this.firestore,wh(this._delegate,function xq(n){return TL("limit",n),new jL("limit",n,"F")}(e)))}catch(t){throw Vs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new js(this.firestore,wh(this._delegate,function Nq(n){return TL("limitToLast",n),new jL("limitToLast",n,"L")}(e)))}catch(t){throw Vs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new js(this.firestore,wh(this._delegate,function kq(...n){return new HL("startAt",n,!0)}(...e)))}catch(t){throw Vs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new js(this.firestore,wh(this._delegate,function Pq(...n){return new HL("startAfter",n,!1)}(...e)))}catch(t){throw Vs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new js(this.firestore,wh(this._delegate,function Oq(...n){return new $L("endBefore",n,!0)}(...e)))}catch(t){throw Vs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new js(this.firestore,wh(this._delegate,function Fq(...n){return new $L("endAt",n,!1)}(...e)))}catch(t){throw Vs(t,"endAt()","Query.endAt()")}}isEqual(e){return AL(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Hq(n){n=Xt(n,os);const e=Xt(n.firestore,nr),t=Vr(e),r=new up(e);return function J$(n,e){const t=new vi;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,u){try{const h=yield Mb(i,a,!0),m=new sL(a,h.zn),E=m.Po(h.documents),C=m.applyChanges(E,!1);u.resolve(C.snapshot)}catch(h){const m=Km(h,`Failed to execute query '${a} against cache`);u.reject(m)}}),function(i,a,u){return r.apply(this,arguments)})(yield NR(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Eh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function $q(n){n=Xt(n,os);const e=Xt(n.firestore,nr),t=Vr(e),r=new up(e);return vL(t,n._query,{source:"server"}).then(i=>new Eh(e,r,n,i))}(this._delegate):function jq(n){n=Xt(n,os);const e=Xt(n.firestore,nr),t=Vr(e),r=new up(e);return VL(n._query),vL(t,n._query).then(i=>new Eh(e,r,n,i))}(this._delegate),t.then(r=>new zR(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=iU(e),r=sU(e,i=>new zR(this.firestore,new Eh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return QL(this._delegate,t,r)}withConverter(e){return new js(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}class sG{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new AE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new js(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new AE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new sG(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new AE(this._firestore,r))})}isEqual(e){return BL(this._delegate,e._delegate)}}class t_ extends js{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ha(this.firestore,e):null}doc(e){try{return new Ha(this.firestore,void 0===e?Ub(this._delegate):Ub(this._delegate,e))}catch(t){throw Vs(t,"doc()","CollectionReference.doc()")}}add(e){return function Gq(n,e){const t=Xt(n.firestore,nr),r=Ub(n),i=Gb(n.converter,e);return e_(t,[jb(op(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Ur.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ha(this.firestore,t))}isEqual(e){return SL(this._delegate,e._delegate)}withConverter(e){return new t_(this.firestore,this._delegate.withConverter(e?cp.getInstance(this.firestore,e):null))}}function dp(n){return Xt(n,Gn)}class KR{constructor(...e){this._delegate=new Uc(...e)}static documentId(){return new KR(Li.keyField().canonicalString())}isEqual(e){return(e=(0,O.m9)(e))instanceof Uc&&this._delegate._internalPath.isEqual(e._internalPath)}}class hp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Yq(){return new LR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new hp(e)}static delete(){const e=function Zq(){return new IE("deleteField")}();return e._methodName="FieldValue.delete",new hp(e)}static arrayUnion(...e){const t=function Qq(...n){return new wq("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new hp(t)}static arrayRemove(...e){const t=function Xq(...n){return new Iq("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new hp(t)}static increment(e){const t=function Jq(n){return new bq("increment",n)}(e);return t._methodName="FieldValue.increment",new hp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const oG={Firestore:tU,GeoPoint:Bb,Timestamp:Ei,Blob:DE,Transaction:nU,WriteBatch:rU,DocumentReference:Ha,DocumentSnapshot:SE,Query:js,QueryDocumentSnapshot:AE,QuerySnapshot:zR,CollectionReference:t_,FieldPath:KR,FieldValue:hp,setLogLevel:function iG(n){!function Cj(n){ch.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function oU(n,e){return function uG(n,e=kh.z){return new ws.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ZR(n,e){return oU(n,e).pipe((0,Bt.U)(t=>({payload:t,type:"query"})))}function zb(n,e){return ZR(n,e).pipe(QS(void 0),XS(),(0,Bt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const m=i.find(C=>C.doc.ref.isEqual(u.ref)),E=null==t?void 0:t.payload.docs.find(C=>C.ref.isEqual(u.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(u.metadata)||!m&&E&&JSON.stringify(E.metadata)===JSON.stringify(u.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),a}))}function aU(n,e,t){return zb(n,t).pipe(wa((r,i)=>function dG(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function hG(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YR(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YR(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YR(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Yl(),(0,Bt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function YR(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function lU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function lG(n){(function aG(n,e){n.INTERNAL.registerComponent(new br.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},oG)))})(n,(e,t)=>new tU(e,t,new rG)),n.registerVersion("@firebase/firestore-compat","0.1.13")}(ul.Z);class uU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=zb(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Bt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(QS(void 0),XS(),Sg(([r,i])=>i.length>0||!r),(0,Bt.U)(([r,i])=>i),At.iC)}auditTrail(e){return this.stateChanges(e).pipe(wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lU(e);return aU(this.query,t,this.afs.schedulers.outsideAngular).pipe(At.iC)}valueChanges(e={}){return ZR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),At.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(At.iC)}add(e){return this.ref.add(e)}doc(e){return new cU(this.ref.doc(e),this.afs)}}class cU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=fU(r,t);return new uU(i,a,this.afs)}snapshotChanges(){return function cG(n,e){return oU(n,e).pipe(QS(void 0),XS(),(0,Bt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(At.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Bt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pn.D)(this.ref.get(e)).pipe(At.iC)}}class fG{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?zb(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Sg(t=>t.length>0),At.iC):zb(this.query,this.afs.schedulers.outsideAngular).pipe(At.iC)}auditTrail(e){return this.stateChanges(e).pipe(wa((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=lU(e);return aU(this.query,t,this.afs.schedulers.outsideAngular).pipe(At.iC)}valueChanges(e={}){return ZR(this.query,this.afs.schedulers.outsideAngular).pipe((0,Bt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),At.iC)}get(e){return(0,Pn.D)(this.query.get(e)).pipe(At.iC)}}const dU=new y.OlP("angularfire2.enableFirestorePersistence"),hU=new y.OlP("angularfire2.firestore.persistenceSettings"),pG=new y.OlP("angularfire2.firestore.settings"),gG=new y.OlP("angularfire2.firestore.use-emulator");function fU(n,e=(t=>t)){return{query:e(n),ref:n}}let mG=(()=>{class n{constructor(t,r,i,a,u,h,m,E,C,S,k,B,j,ne,we,Qe,Je){this.schedulers=m;const pt=(0,Cn.on)(t,h,r),Ze=C;S&&zg(pt,h,k,j,ne,we,B,Qe),[this.firestore,this.persistenceEnabled$]=(0,Cn.cc)(`${pt.name}.firestore`,"AngularFirestore",pt.name,()=>{const qt=h.runOutsideAngular(()=>pt.firestore());if(a&&qt.settings(a),Ze&&qt.useEmulator(...Ze),i&&!Er(u)){const bn=()=>{try{return(0,Pn.D)(qt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(rr){return"undefined"!=typeof console&&console.warn(rr),lr(!1)}};return[qt,h.runOutsideAngular(bn)]}return[qt,lr(!1)]},[a,Ze,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:u}=fU(i,r),h=this.schedulers.ngZone.run(()=>a);return new uU(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),a=this.firestore.collectionGroup(t);return new fG(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new cU(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Cn.Dh),y.LFG(Cn.xv,8),y.LFG(dU,8),y.LFG(pG,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(At.HU),y.LFG(hU,8),y.LFG(gG,8),y.LFG(bf,8),y.LFG(jg,8),y.LFG(Hg,8),y.LFG($g,8),y.LFG(qg,8),y.LFG(Gg,8),y.LFG(Wg,8),y.LFG(If,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),_G=(()=>{class n{constructor(){Vg.Z.registerVersion("angularfire",At.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:dU,useValue:!0},{provide:hU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[mG]}),n})();const pU="firebasestorage.googleapis.com",gU="storageBucket";class vr extends O.ZR{constructor(e,t){super(QR(e),`Firebase Storage: ${t} (${QR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,vr.prototype)}_codeEquals(e){return QR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function QR(n){return"storage/"+n}function XR(){return new vr("unknown","An unknown error occurred, please check the error payload for server response.")}function mU(){return new vr("canceled","User canceled the upload/download.")}function _U(){return new vr("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function n_(n){return new vr("invalid-argument",n)}function yU(){return new vr("app-deleted","The Firebase app was deleted.")}function vU(n){return new vr("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ME(n,e){return new vr("invalid-format","String does not match format '"+n+"': "+e)}function RE(n){throw new vr("internal-error","Internal error: "+n)}class as{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=as.makeFromUrl(e,t)}catch(i){return new as(e,"")}if(""===r.path)return r;throw function AG(n){return new vr("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(Ze){Ze.path_=decodeURIComponent(Ze.path)}const S=t.replace(/[.]/g,"\\."),pt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(Ze){"/"===Ze.path.charAt(Ze.path.length-1)&&(Ze.path_=Ze.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===pU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let Ze=0;Ze<pt.length;Ze++){const qt=pt[Ze],bn=qt.regex.exec(e);if(bn){let qs=bn[qt.indices.path];qs||(qs=""),r=new as(bn[qt.indices.bucket],qs),qt.postModify(r);break}}if(null==r)throw function SG(n){return new vr("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class NG{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Kb(n){return"string"==typeof n||n instanceof String}function EU(n){return JR()&&n instanceof Blob}function JR(){return"undefined"!=typeof Blob}function ex(n,e,t,r){if(r<e)throw n_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw n_(`Invalid value for '${n}'. Expected ${t} or less.`)}function Vc(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function wU(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var bh=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(bh||(bh={})),bh))();class UG{constructor(e,t,r,i,a,u,h,m,E,C,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=m,this.timeout_=E,this.progressCallback_=C,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,B)=>{this.resolve_=k,this.reject_=B,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function OG(n){return void 0!==n}(m)?a():a(m)}catch(m){u(m)}else if(null!==h){const m=XR();m.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,m):m)}else u(i.canceled?this.appDelete_?yU():mU():function DG(){return new vr("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Zb(!1,null,!0)):this.backoffId_=function kG(n,e,t){let r=1,i=null,a=null,u=!1,h=0;function m(){return 2===h}let E=!1;function C(...we){E||(E=!0,e.apply(null,we))}function S(we){i=setTimeout(()=>{i=null,n(B,m())},we)}function k(){a&&clearTimeout(a)}function B(we,...Qe){if(E)return void k();if(we)return k(),void C.call(null,we,...Qe);if(m()||u)return k(),void C.call(null,we,...Qe);let pt;r<64&&(r*=2),1===h?(h=2,pt=0):pt=1e3*(r+Math.random()),S(pt)}let j=!1;function ne(we){j||(j=!0,k(),!E&&(null!==i?(we||(h=2),clearTimeout(i),S(0)):we||(h=1)))}return S(0),a=setTimeout(()=>{u=!0,ne(!0)},t),ne}((r,i)=>{if(i)return void r(!1,new Zb(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(u),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(u),this.pendingConnection_=null;const h=a.getErrorCode()===bh.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const C=a.getErrorCode()===bh.ABORT;return void r(!1,new Zb(!1,null,C))}const E=-1!==this.successCodes_.indexOf(m);r(!0,new Zb(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function PG(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Zb{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function GG(...n){const e=function qG(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(JR())return new Blob(n);throw new vr("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ia={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tx{constructor(e,t){this.data=e,this.contentType=t||null}}function nx(n,e){switch(n){case ia.RAW:return new tx(IU(e));case ia.BASE64:case ia.BASE64URL:return new tx(bU(n,e));case ia.DATA_URL:return new tx(function ZG(n){const e=new TU(n);return e.base64?bU(ia.BASE64,e.rest):function KG(n){let e;try{e=decodeURIComponent(n)}catch(t){throw ME(ia.DATA_URL,"Malformed data URL.")}return IU(e)}(e.rest)}(e),function YG(n){return new TU(n).contentType}(e))}throw XR()}function IU(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function bU(n,e){switch(n){case ia.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw ME(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ia.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw ME(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function zG(n){return atob(n)}(e)}catch(i){throw ME(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class TU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ME(ia.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function QG(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}class ku{constructor(e,t){let r=0,i="";EU(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(EU(this.data_)){const i=function WG(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new ku(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new ku(r,!0)}}static getBlob(...e){if(JR()){const t=e.map(r=>r instanceof ku?r.data_:r);return new ku(GG.apply(null,t))}{const t=e.map(u=>Kb(u)?nx(ia.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[a++]=u[h]}),new ku(i,!0)}}uploadData(){return this.data_}}function rx(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function LG(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function CU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function eW(n,e){return e}class Hs{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||eW}}let Yb=null;function xE(){if(Yb)return Yb;const n=[];n.push(new Hs("bucket")),n.push(new Hs("generation")),n.push(new Hs("metageneration")),n.push(new Hs("name","fullPath",!0));const t=new Hs("name");t.xform=function e(a,u){return function tW(n){return!Kb(n)||n.length<2?n:CU(n)}(u)},n.push(t);const i=new Hs("size");return i.xform=function r(a,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Hs("timeCreated")),n.push(new Hs("updated")),n.push(new Hs("md5Hash",null,!0)),n.push(new Hs("cacheControl",null,!0)),n.push(new Hs("contentDisposition",null,!0)),n.push(new Hs("contentEncoding",null,!0)),n.push(new Hs("contentLanguage",null,!0)),n.push(new Hs("contentType",null,!0)),n.push(new Hs("metadata","customMetadata",!0)),Yb=n,Yb}function DU(n,e,t){const r=rx(e);return null===r?null:function rW(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const u=t[a];r[u.local]=u.xform(r,e[u.server])}return function nW(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new as(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function ix(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const SU="prefixes";class Pu{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ou(n){if(!n)throw XR()}function Qb(n,e){return function t(r,i){const a=DU(n,i,e);return Ou(null!==a),a}}function r_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function TG(){return new vr("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function bG(){return new vr("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function IG(n){return new vr("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function CG(n){return new vr("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function NE(n){const e=r_(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function wG(n){return new vr("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function MU(n,e,t){const i=Vc(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new Pu(i,"GET",Qb(n,t),u);return h.errorHandler=NE(e),h}function uW(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Vc(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,C=new Pu(h,"GET",function aW(n,e){return function t(r,i){const a=function oW(n,e,t){const r=rx(t);return null===r?null:function sW(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[SU])for(const i of t[SU]){const a=i.replace(/\/$/,""),u=n._makeStorageReference(new as(e,a));r.prefixes.push(u)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new as(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ou(null!==a),a}}(n,e.bucket),E);return C.urlParams=a,C.errorHandler=r_(e),C}function xU(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function fW(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Xb{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function sx(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){Ou(!1)}return Ou(!!t&&-1!==(e||["active"]).indexOf(t)),t}const _W={STATE_CHANGED:"state_changed"},$s={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function ox(n){switch(n){case"running":case"pausing":case"canceling":return $s.RUNNING;case"paused":return $s.PAUSED;case"success":return $s.SUCCESS;case"canceled":return $s.CANCELED;default:return $s.ERROR}}class yW{constructor(e,t,r){if(function FG(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function i_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class EW extends class vW{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bh.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bh.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bh.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw RE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw RE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw RE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw RE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw RE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Fl(){return new EW}class OU{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=xE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function pW(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u=xU(e,r,i),h={name:u.fullPath},m=Vc(a,n.host,n._protocol),C={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},S=ix(u,t),j=new Pu(m,"POST",function B(ne){let we;sx(ne);try{we=ne.getResponseHeader("X-Goog-Upload-URL")}catch(Qe){Ou(!1)}return Ou(Kb(we)),we},n.maxUploadRetryTime);return j.urlParams=h,j.headers=C,j.body=S,j.errorHandler=r_(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function gW(n,e,t,r){const m=new Pu(t,"POST",function a(E){const C=sx(E,["active","final"]);let S=null;try{S=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(B){Ou(!1)}S||Ou(!1);const k=Number(S);return Ou(!isNaN(k)),new Xb(k,r.size(),"final"===C)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=r_(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Fl,t,r);this._request=a,a.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Xb(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let u;try{u=function mW(n,e,t,r,i,a,u,h){const m=new Xb(0,0);if(u?(m.current=u.current,m.total=u.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function RG(){return new vr("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=m.total-m.current;let C=E;i>0&&(C=Math.min(C,i));const S=m.current,j={"X-Goog-Upload-Command":C===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},ne=r.slice(S,S+C);if(null===ne)throw _U();const pt=new Pu(t,"POST",function we(Ze,qt){const bn=sx(Ze,["active","final"]),rr=m.current+C,qs=r.size();let sa;return sa="final"===bn?Qb(e,a)(Ze,qt):null,new Xb(rr,qs,"final"===bn,sa)},e.maxUploadRetryTime);return pt.headers=j,pt.body=ne.uploadData(),pt.progressCallback=h||null,pt.errorHandler=r_(n),pt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(u,Fl,i,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=MU(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function NU(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let pt="";for(let Ze=0;Ze<2;Ze++)pt+=Math.random().toString().slice(2);return pt}();u["Content-Type"]="multipart/related; boundary="+m;const E=xU(e,r,i),C=ix(E,t),B=ku.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+C+"\r\n--"+m+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===B)throw _U();const j={name:E.fullPath},ne=Vc(a,n.host,n._protocol),Qe=n.maxUploadRetryTime,Je=new Pu(ne,"POST",Qb(n,t),Qe);return Je.urlParams=j,Je.headers=u,Je.body=B.uploadData(),Je.errorHandler=r_(e),Je}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Fl,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=mU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=ox(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new yW(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(ox(this._state)){case $s.SUCCESS:i_(this._resolve.bind(null,this.snapshot))();break;case $s.CANCELED:case $s.ERROR:i_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(ox(this._state)){case $s.RUNNING:case $s.PAUSED:e.next&&i_(e.next.bind(e,this.snapshot))();break;case $s.SUCCESS:e.complete&&i_(e.complete.bind(e))();break;default:e.error&&i_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class fp{constructor(e,t){this._service=e,this._location=t instanceof as?t:as.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fp(e,t)}get root(){const e=new as(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CU(this._location.path)}get storage(){return this._service}get parent(){const e=function XG(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new as(this._location.bucket,e);return new fp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw vU(e)}}function LU(n,e,t){return ax.apply(this,arguments)}function ax(){return ax=(0,me.Z)(function*(n,e,t){const i=yield UU(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield LU(n,e,i.nextPageToken))}),ax.apply(this,arguments)}function UU(n,e){null!=e&&"number"==typeof e.maxResults&&ex("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=uW(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Fl)}function NW(n){n._throwIfRoot("getDownloadURL");const e=function cW(n,e,t){const i=Vc(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new Pu(i,"GET",function lW(n,e){return function t(r,i){const a=DU(n,i,e);return Ou(null!==a),function iW(n,e,t,r){const i=rx(e);if(null===i||!Kb(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const u=encodeURIComponent;return a.split(",").map(E=>{const S=n.fullPath;return Vc("/b/"+u(n.bucket)+"/o/"+u(S),t,r)+wU({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=NE(e),h}(n.storage,n._location,xE());return n.storage.makeRequestWithTokens(e,Fl).then(t=>{if(null===t)throw function xG(){return new vr("no-download-url","The given file does not have any download URLs.")}();return t})}function BU(n,e){const t=function JG(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new as(n._location.bucket,t);return new fp(n.storage,r)}function VU(n,e){if(n instanceof lx){const t=n;if(null==t._bucket)throw function MG(){return new vr("no-default-bucket","No default bucket found. Did you set the '"+gU+"' property when initializing the app?")}();const r=new fp(t,t._bucket);return null!=e?VU(r,e):r}return void 0!==e?BU(n,e):n}function FW(n,e){if(e&&function PW(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof lx)return function OW(n,e){return new fp(n,e)}(n,e);throw n_("To use ref(service, url), the first argument must be a Storage instance.")}return VU(n,e)}function jU(n,e){const t=null==e?void 0:e[gU];return null==t?null:as.makeFromBucketSpec(t,n)}class lx{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=pU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?as.makeFromBucketSpec(i,this._host):jU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?as.makeFromBucketSpec(this._url,e):jU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ex("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ex("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fp(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new NG(yU());{const a=function $G(n,e,t,r,i,a){const u=wU(n.urlParams),h=n.url+u,m=Object.assign({},n.headers);return function jG(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function BG(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function VG(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function HG(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new UG(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const HU="@firebase/storage";function GU(n,e){return FW(n=(0,O.m9)(n),e)}function zW(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new lx(t,r,i,e,Bn.SDK_VERSION)}!function KW(){(0,Bn._registerComponent)(new br.wA("storage",zW,"PUBLIC").setMultipleInstances(!0)),(0,Bn.registerVersion)(HU,"0.9.2",""),(0,Bn.registerVersion)(HU,"0.9.2","esm2017")}();class Jb{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class WU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Jb(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Jb(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?u=>t(new Jb(u,this,this._ref)):{next:t.next?u=>t.next(new Jb(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class zU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new jc(e,this._service))}get items(){return this._delegate.items.map(e=>new jc(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class jc{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function GW(n,e){return BU(n,e)}(this._delegate,e);return new jc(t,this.storage)}get root(){return new jc(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new jc(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new WU(function UW(n,e,t){return function SW(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new OU(n,new ku(e),t)}(n=(0,O.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ia.RAW,r){this._throwIfRoot("putString");const i=nx(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new WU(new OU(this._delegate,new ku(i.data,!0),a),this)}listAll(){return function HW(n){return function MW(n){const e={prefixes:[],items:[]};return LU(n,e).then(()=>e)}(n=(0,O.m9)(n))}(this._delegate).then(e=>new zU(e,this.storage))}list(e){return function jW(n,e){return UU(n=(0,O.m9)(n),e)}(this._delegate,e||void 0).then(t=>new zU(t,this.storage))}getMetadata(){return function BW(n){return function RW(n){n._throwIfRoot("getMetadata");const e=MU(n.storage,n._location,xE());return n.storage.makeRequestWithTokens(e,Fl)}(n=(0,O.m9)(n))}(this._delegate)}updateMetadata(e){return function VW(n,e){return function xW(n,e){n._throwIfRoot("updateMetadata");const t=function dW(n,e,t,r){const a=Vc(e.fullServerUrl(),n.host,n._protocol),h=ix(t,r),E=n.maxOperationRetryTime,C=new Pu(a,"PATCH",Qb(n,r),E);return C.headers={"Content-Type":"application/json; charset=utf-8"},C.body=h,C.errorHandler=NE(e),C}(n.storage,n._location,e,xE());return n.storage.makeRequestWithTokens(t,Fl)}(n=(0,O.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function $W(n){return NW(n=(0,O.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function qW(n){return function kW(n){n._throwIfRoot("deleteObject");const e=function hW(n,e){const r=Vc(e.fullServerUrl(),n.host,n._protocol),h=new Pu(r,"DELETE",function u(m,E){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=NE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Fl)}(n=(0,O.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw vU(e)}}class KU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(ZU(e))throw n_("ref() expected a child path but got a URL, use refFromURL instead.");return new jc(GU(this._delegate,e),this)}refFromURL(e){if(!ZU(e))throw n_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{as.makeFromUrl(e,this._delegate.host)}catch(t){throw n_("refFromUrl() expected a valid full URL but got an invalid one.")}return new jc(GU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function WW(n,e,t,r={}){!function LW(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,O.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function ZU(n){return/^[A-Za-z]+:\/\//.test(n)}function XW(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new KU(t,r)}function YU(n){const e=function e3(n){return new ws.y(e=>{const t=u=>e.next(u);t(n.snapshot);const a=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){a()}}).pipe(function yG(n,e=kh.z){return(0,wr.e)((t,r)=>{let i=null,a=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function m(){const E=u+n,C=e.now();if(C<E)return i=this.schedule(void 0,E-C),void r.add(i);h()}t.subscribe(new Rn.Q(r,E=>{a=E,u=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Bt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function eT(n){return{getDownloadURL:()=>lr(void 0).pipe(At.fc,Ir(()=>n.getDownloadURL()),At.iC),getMetadata:()=>lr(void 0).pipe(At.fc,Ir(()=>n.getMetadata()),At.iC),delete:()=>(0,Pn.D)(n.delete()),child:e=>eT(n.child(e)),updateMetadata:e=>(0,Pn.D)(n.updateMetadata(e)),put:(e,t)=>YU(n.put(e,t)),putString:(e,t,r)=>YU(n.putString(e,t,r)),list:e=>(0,Pn.D)(n.list(e)),listAll:()=>(0,Pn.D)(n.listAll())}}!function JW(n){const e={TaskState:$s,TaskEvent:_W,StringFormat:ia,Storage:KU,Reference:jc};n.INTERNAL.registerComponent(new br.wA("storage-compat",XW,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(ul.Z);const t3=new y.OlP("angularfire2.storageBucket"),n3=new y.OlP("angularfire2.storage.maxUploadRetryTime"),r3=new y.OlP("angularfire2.storage.maxOperationRetryTime"),s3=new y.OlP("angularfire2.storage.use-emulator");let o3=(()=>{class n{constructor(t,r,i,a,u,h,m,E,C,S){const k=(0,Cn.on)(t,u,r);this.storage=(0,Cn.cc)(`${k.name}.storage.${i}`,"AngularFireStorage",k.name,()=>{const B=u.runOutsideAngular(()=>k.storage(i||void 0)),j=C;return j&&B.useEmulator(...j),m&&B.setMaxUploadRetryTime(m),E&&B.setMaxOperationRetryTime(E),B},[m,E])}ref(t){return eT(this.storage.ref(t))}refFromURL(t){return eT(this.storage.refFromURL(t))}upload(t,r,i){return eT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Cn.Dh),y.LFG(Cn.xv,8),y.LFG(t3,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(At.HU),y.LFG(n3,8),y.LFG(r3,8),y.LFG(s3,8),y.LFG(If,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),a3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})(),l3=(()=>{class n{constructor(){Vg.Z.registerVersion("angularfire",At.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[o3],imports:[a3]}),n})();const QU_firebase={apiKey:"AIzaSyCJCEw-HuA-u-MaV0PqN9R1XFaj7V21fiw",authDomain:"starplan-app2020.firebaseapp.com",databaseURL:"https://starplan-app2020.firebaseio.com",projectId:"starplan-app2020",storageBucket:"starplan-app2020.appspot.com",messagingSenderId:"847511459145",appId:"1:847511459145:web:ead1878770d7e3847bb698",measurementId:"G-Y07QC6FCGS"};let u3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n,bootstrap:[gV]}),n.\u0275inj=y.cJS({providers:[],imports:[[Gl,YD,sP,nV,Cn.hO.initializeApp(QU_firebase),_G,aw,l3,yw,hV]]}),n})();(0,y.G48)(),sd().bootstrapModule(u3).catch(n=>console.error(n))},5867:(it,Se,F)=>{"use strict";F.d(Se,{Mq:()=>y.getApp,C6:()=>y.getApps});var y=F(9681);(0,y.registerVersion)("firebase","9.6.5","app")},127:(it,Se,F)=>{"use strict";F.d(Se,{Z:()=>y.Z});var y=F(3942);y.Z.registerVersion("firebase","9.6.5","app-compat")},8999:(it,Se,F)=>{"use strict";F.r(Se);var y=F(5861),ee=F(3942),L=F(2090),de=F(9681),oe=F(655),ye=F(1877),ie=F(4859);const Pe=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},qe=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},X=new L.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),be=new ye.Yd("@firebase/auth");function Ae(_,...f){be.logLevel<=ye.in.ERROR&&be.error(`Auth (${de.SDK_VERSION}): ${_}`,...f)}function pe(_,...f){throw We(_,...f)}function Fe(_,...f){return We(_,...f)}function Me(_,f,g){const w=Object.assign(Object.assign({},qe()),{[f]:g});return new L.LL("auth","Firebase",w).create(f,{appName:_.name})}function Ye(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&pe(_,"argument-error"),Me(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(_,...f){if("string"!=typeof _){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=_.name),_._errorFactory.create(g,...w)}return X.create(_,...f)}function le(_,f,...g){if(!_)throw We(f,...g)}function J(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ae(f),new Error(f)}function ae(_,f){_||J(f)}const Ee=new Map;function ue(_){ae(_ instanceof Function,"Expected a class definition");let f=Ee.get(_);return f?(ae(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,Ee.set(_,f),f)}function wt(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Gt(){return"http:"===xn()||"https:"===xn()}function xn(){var _;return"undefined"!=typeof self&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Wn{constructor(f,g){this.shortDelay=f,this.longDelay=g,ae(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,L.uI)()||(0,L.b$)()}get(){return function ot(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,L.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function rn(_,f){ae(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class cr{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void J("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void J("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void J("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Zt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Vi=new Wn(3e4,6e4);function Yt(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function Ut(_,f,g,w){return ji.apply(this,arguments)}function ji(){return(ji=(0,y.Z)(function*(_,f,g,w,R={}){return dr(_,R,(0,y.Z)(function*(){let P={},K={};w&&("GET"===f?K=w:P={body:JSON.stringify(w)});const he=(0,L.xO)(Object.assign({key:_.config.apiKey},K)).slice(1),je=yield _._getAdditionalHeaders();return je["Content-Type"]="application/json",_.languageCode&&(je["X-Firebase-Locale"]=_.languageCode),cr.fetch()(zs(_,_.config.apiHost,g,he),Object.assign({method:f,headers:je,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function dr(_,f,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,y.Z)(function*(_,f,g){_._canInitEmulator=!1;const w=Object.assign(Object.assign({},Zt),f);try{const R=new jr(_),P=yield Promise.race([g(),R.promise]);R.clearNetworkTimeout();const K=yield P.json();if("needConfirmation"in K)throw $i(_,"account-exists-with-different-credential",K);if(P.ok&&!("errorMessage"in K))return K;{const he=P.ok?K.errorMessage:K.error.message,[je,nt]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===je)throw $i(_,"credential-already-in-use",K);if("EMAIL_EXISTS"===je)throw $i(_,"email-already-in-use",K);const Et=w[je]||je.toLowerCase().replace(/[_\s]+/g,"-");if(nt)throw Me(_,Et,nt);pe(_,Et)}}catch(R){if(R instanceof L.ZR)throw R;pe(_,"network-request-failed")}})).apply(this,arguments)}function Sr(_,f,g,w){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,y.Z)(function*(_,f,g,w,R={}){const P=yield Ut(_,f,g,w,R);return"mfaPendingCredential"in P&&pe(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function zs(_,f,g,w){const R=`${f}${g}?${w}`;return _.config.emulator?rn(_.config,R):`${_.config.apiScheme}://${R}`}class jr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Fe(this.auth,"network-request-failed")),Vi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $i(_,f,g){const w={appName:_.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const R=Fe(_,f,w);return R.customData._tokenResponse=g,R}function Hr(){return(Hr=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function zn(_,f){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ks(_,f){return gt.apply(this,arguments)}function gt(){return(gt=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function et(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function hr(){return(hr=(0,y.Z)(function*(_,f=!1){const g=(0,L.m9)(_),w=yield g.getIdToken(f),R=tt(w);le(R&&R.exp&&R.auth_time&&R.iat,g.auth,"internal-error");const P="object"==typeof R.firebase?R.firebase:void 0,K=null==P?void 0:P.sign_in_provider;return{claims:R,token:w,authTime:et(xt(R.auth_time)),issuedAtTime:et(xt(R.iat)),expirationTime:et(xt(R.exp)),signInProvider:K||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function xt(_){return 1e3*Number(_)}function tt(_){const[f,g,w]=_.split(".");if(void 0===f||void 0===g||void 0===w)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,L.tV)(g);return R?JSON.parse(R):(Ae("Failed to decode base64 JWT payload"),null)}catch(R){return Ae("Caught error parsing JWT payload as JSON",R),null}}function Ti(_,f){return ls.apply(this,arguments)}function ls(){return(ls=(0,y.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof L.ZR&&Ht(w)&&_.auth.currentUser===_&&(yield _.auth.signOut()),w}})).apply(this,arguments)}function Ht({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class $a{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const R=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,y.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,y.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class $r{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=et(this.lastLoginAt),this.creationTime=et(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function oi(_){return H.apply(this,arguments)}function H(){return(H=(0,y.Z)(function*(_){var f;const g=_.auth,w=yield _.getIdToken(),R=yield Ti(_,Ks(g,{idToken:w}));le(null==R?void 0:R.users.length,g,"internal-error");const P=R.users[0];_._notifyReloadListener(P);const K=(null===(f=P.providerUserInfo)||void 0===f?void 0:f.length)?re(P.providerUserInfo):[],he=Ce(_.providerData,K),Et=!!_.isAnonymous&&!(_.email&&P.passwordHash||(null==he?void 0:he.length)),at={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:he,metadata:new $r(P.createdAt,P.lastLoginAt),isAnonymous:Et};Object.assign(_,at)})).apply(this,arguments)}function z(){return(z=(0,y.Z)(function*(_){const f=(0,L.m9)(_);yield oi(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Ce(_,f){return[..._.filter(w=>!f.some(R=>R.providerId===w.providerId)),...f]}function re(_){return _.map(f=>{var{providerId:g}=f,w=(0,oe._T)(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function mt(){return(mt=(0,y.Z)(function*(_,f){const g=yield dr(_,{},(0,y.Z)(function*(){const w=(0,L.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:R,apiKey:P}=_.config,K=zs(_,R,"/v1/token",`key=${P}`),he=yield _._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",cr.fetch()(K,{method:"POST",headers:he,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class sn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){le(f.idToken,"internal-error"),le(void 0!==f.idToken,"internal-error"),le(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function ct(_){const f=tt(_);return le(f,"internal-error"),le(void 0!==f.exp,"internal-error"),le(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,y.Z)(function*(){return le(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,y.Z)(function*(){const{accessToken:R,refreshToken:P,expiresIn:K}=yield function ze(_,f){return mt.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(R,P,Number(K))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:R,expirationTime:P}=g,K=new sn;return w&&(le("string"==typeof w,"internal-error",{appName:f}),K.refreshToken=w),R&&(le("string"==typeof R,"internal-error",{appName:f}),K.accessToken=R),P&&(le("number"==typeof P,"internal-error",{appName:f}),K.expirationTime=P),K}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new sn,this.toJSON())}_performRefresh(){return J("not implemented")}}function hn(_,f){le("string"==typeof _||void 0===_,"internal-error",{appName:f})}class mn{constructor(f){var{uid:g,auth:w,stsTokenManager:R}=f,P=(0,oe._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new $a(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.metadata=new $r(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,y.Z)(function*(){const w=yield Ti(g,g.stsTokenManager.getToken(g.auth,f));return le(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function dn(_){return hr.apply(this,arguments)}(this,f)}reload(){return function W(_){return z.apply(this,arguments)}(this)}_assign(f){this!==f&&(le(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new mn(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,y.Z)(function*(){let R=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),R=!0),g&&(yield oi(w)),yield w.auth._persistUserIfCurrent(w),R&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,y.Z)(function*(){const g=yield f.getIdToken();return yield Ti(f,function _t(_,f){return Hr.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,R,P,K,he,je,nt,Et;const at=null!==(w=g.displayName)&&void 0!==w?w:void 0,$t=null!==(R=g.email)&&void 0!==R?R:void 0,gi=null!==(P=g.phoneNumber)&&void 0!==P?P:void 0,bl=null!==(K=g.photoURL)&&void 0!==K?K:void 0,pu=null!==(he=g.tenantId)&&void 0!==he?he:void 0,Ra=null!==(je=g._redirectEventId)&&void 0!==je?je:void 0,Tl=null!==(nt=g.createdAt)&&void 0!==nt?nt:void 0,Cl=null!==(Et=g.lastLoginAt)&&void 0!==Et?Et:void 0,{uid:Ri,emailVerified:Rs,isAnonymous:Kh,providerData:Zh,stsTokenManager:xa}=g;le(Ri&&xa,f,"internal-error");const E_=sn.fromJSON(this.name,xa);le("string"==typeof Ri,f,"internal-error"),hn(at,f.name),hn($t,f.name),le("boolean"==typeof Rs,f,"internal-error"),le("boolean"==typeof Kh,f,"internal-error"),hn(gi,f.name),hn(bl,f.name),hn(pu,f.name),hn(Ra,f.name),hn(Tl,f.name),hn(Cl,f.name);const Yh=new mn({uid:Ri,auth:f,email:$t,emailVerified:Rs,displayName:at,isAnonymous:Kh,photoURL:bl,phoneNumber:gi,tenantId:pu,stsTokenManager:E_,createdAt:Tl,lastLoginAt:Cl});return Zh&&Array.isArray(Zh)&&(Yh.providerData=Zh.map(Dd=>Object.assign({},Dd))),Ra&&(Yh._redirectEventId=Ra),Yh}static _fromIdTokenResponse(f,g,w=!1){return(0,y.Z)(function*(){const R=new sn;R.updateFromServerResponse(g);const P=new mn({uid:g.localId,auth:f,stsTokenManager:R,isAnonymous:w});return yield oi(P),P})()}}const Nt=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(g,w){var R=this;return(0,y.Z)(function*(){R.storage[g]=w})()}_get(g){var w=this;return(0,y.Z)(function*(){const R=w.storage[g];return void 0===R?null:R})()}_remove(g){var w=this;return(0,y.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return _.type="NONE",_})();function Kn(_,f,g){return`firebase:${_}:${f}:${g}`}class Ar{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:R,name:P}=this.auth;this.fullUserKey=Kn(this.userKey,R.apiKey,P),this.fullPersistenceKey=Kn("persistence",R.apiKey,P),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,y.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?mn._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,y.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,y.Z)(function*(){if(!g.length)return new Ar(ue(Nt),f,w);const R=(yield Promise.all(g.map(function(){var nt=(0,y.Z)(function*(Et){if(yield Et._isAvailable())return Et});return function(Et){return nt.apply(this,arguments)}}()))).filter(nt=>nt);let P=R[0]||ue(Nt);const K=Kn(w,f.config.apiKey,f.name);let he=null;for(const nt of g)try{const Et=yield nt._get(K);if(Et){const at=mn._fromJSON(f,Et);nt!==P&&(he=at),P=nt;break}}catch(Et){}const je=R.filter(nt=>nt._shouldAllowMigration);return P._shouldAllowMigration&&je.length?(P=je[0],he&&(yield P._set(K,he.toJSON())),yield Promise.all(g.map(function(){var nt=(0,y.Z)(function*(Et){if(Et!==P)try{yield Et._remove(K)}catch(at){}});return function(Et){return nt.apply(this,arguments)}}())),new Ar(P,f,w)):new Ar(P,f,w)})()}}function Ll(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Zn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(qa(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(us(f))return"Blackberry";if(Yn(f))return"Webos";if(Ul(f))return"Safari";if((f.includes("chrome/")||Ga(f))&&!f.includes("edge/"))return"Chrome";if(Mr(f))return"Android";{const w=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function qa(_=(0,L.z$)()){return/firefox\//i.test(_)}function Ul(_=(0,L.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Ga(_=(0,L.z$)()){return/crios\//i.test(_)}function Zn(_=(0,L.z$)()){return/iemobile/i.test(_)}function Mr(_=(0,L.z$)()){return/android/i.test(_)}function us(_=(0,L.z$)()){return/blackberry/i.test(_)}function Yn(_=(0,L.z$)()){return/webos/i.test(_)}function Gr(_=(0,L.z$)()){return/iphone|ipad|ipod/i.test(_)}function Zs(_=(0,L.z$)()){return Gr(_)||Mr(_)||Yn(_)||us(_)||/windows phone/i.test(_)||Zn(_)}function aa(_,f=[]){let g;switch(_){case"Browser":g=Ll((0,L.z$)());break;case"Worker":g=`${Ll((0,L.z$)())}-${_}`;break;default:g=_}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${de.SDK_VERSION}/${w}`}class Wr{constructor(f,g){this.app=f,this.config=g,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new St(this),this.idTokenSubscription=new St(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=X,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=g.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=ue(g)),this._initializationPromise=this.queue((0,y.Z)(function*(){var R,P;if(!w._deleted&&(w.persistenceManager=yield Ar.create(w,f),!w._deleted)){if(null===(R=w._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(K){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(P=w.currentUser)||void 0===P?void 0:P.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,y.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g)}})()}initializeCurrentUser(f){var g=this;return(0,y.Z)(function*(){var w;let R=yield g.assertedPersistence.getCurrentUser();if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const P=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,K=null==R?void 0:R._redirectEventId,he=yield g.tryRedirectSignIn(f);(!P||P===K)&&(null==he?void 0:he.user)&&(R=he.user)}return R?R._redirectEventId?(le(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===R._redirectEventId?g.directlySetCurrentUser(R):g.reloadAndSetCurrentUserOrClear(R)):g.reloadAndSetCurrentUserOrClear(R):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var g=this;return(0,y.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(R){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,y.Z)(function*(){try{yield oi(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function ut(){if("undefined"==typeof navigator)return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,y.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,y.Z)(function*(){const w=f?(0,L.m9)(f):null;return w&&le(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f){var g=this;return(0,y.Z)(function*(){if(!g._deleted)return f&&le(g.tenantId===f.tenantId,g,"tenant-id-mismatch"),g.queue((0,y.Z)(function*(){yield g.directlySetCurrentUser(f),g.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,y.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var g=this;return this.queue((0,y.Z)(function*(){yield g.assertedPersistence.setPersistence(ue(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new L.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,y.Z)(function*(){const R=yield w.getOrInitRedirectPersistenceManager(g);return null===f?R.removeCurrentUser():R.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,y.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&ue(f)||g._popupRedirectResolver;le(w,g,"argument-error"),g.redirectPersistenceManager=yield Ar.create(g,[ue(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,y.Z)(function*(){var w,R;return g._isInitialized&&(yield g.queue((0,y.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(R=g.redirectUser)||void 0===R?void 0:R._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,y.Z)(function*(){if(f===g.currentUser)return g.queue((0,y.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,R){if(this._deleted)return()=>{};const P="function"==typeof g?g:g.next.bind(g),K=this._isInitialized?Promise.resolve():this._initializationPromise;return le(K,this,"internal-error"),K.then(()=>P(this.currentUser)),"function"==typeof g?f.addObserver(g,w,R):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,y.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=aa(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,y.Z)(function*(){const g={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(g["X-Firebase-gmpid"]=f.app.options.appId),g})()}}function Le(_){return(0,L.m9)(_)}class St{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,L.ne)(g=>this.observer=g)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Rr(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function kn(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class Wt{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return J("not implemented")}_getIdTokenResponse(f){return J("not implemented")}_linkToIdToken(f,g){return J("not implemented")}_getReauthenticationResolver(f){return J("not implemented")}}function To(_,f){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:resetPassword",Yt(_,f))})).apply(this,arguments)}function Ct(_,f){return la.apply(this,arguments)}function la(){return(la=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ua(_,f){return ca.apply(this,arguments)}function ca(){return(ca=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:update",Yt(_,f))})).apply(this,arguments)}function Fn(){return(Fn=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signInWithPassword",Yt(_,f))})).apply(this,arguments)}function Ys(_,f){return Co.apply(this,arguments)}function Co(){return(Co=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:sendOobCode",Yt(_,f))})).apply(this,arguments)}function zr(_,f){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,y.Z)(function*(_,f){return Ys(_,f)})).apply(this,arguments)}function qc(_,f){return Do.apply(this,arguments)}function Do(){return(Do=(0,y.Z)(function*(_,f){return Ys(_,f)})).apply(this,arguments)}function Ci(_,f){return ai.apply(this,arguments)}function ai(){return(ai=(0,y.Z)(function*(_,f){return Ys(_,f)})).apply(this,arguments)}function Gc(_,f){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,y.Z)(function*(_,f){return Ys(_,f)})).apply(this,arguments)}function li(){return(li=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signInWithEmailLink",Yt(_,f))})).apply(this,arguments)}function Wc(){return(Wc=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signInWithEmailLink",Yt(_,f))})).apply(this,arguments)}class Vl extends Wt{constructor(f,g,w,R=null){super("password",w),this._email=f,this._password=g,this._tenantId=R}static _fromEmailAndPassword(f,g){return new Vl(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new Vl(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,y.Z)(function*(){switch(g.signInMethod){case"password":return function da(_,f){return Fn.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Qs(_,f){return li.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:pe(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,y.Z)(function*(){switch(w.signInMethod){case"password":return Ct(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Dh(_,f){return Wc.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:pe(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ln(_,f){return zc.apply(this,arguments)}function zc(){return(zc=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signInWithIdp",Yt(_,f))})).apply(this,arguments)}class hs extends Wt{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new hs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):pe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:R}=g,P=(0,oe._T)(g,["providerId","signInMethod"]);if(!w||!R)return null;const K=new hs(w,R);return K.idToken=P.idToken||void 0,K.accessToken=P.accessToken||void 0,K.secret=P.secret,K.nonce=P.nonce,K.pendingToken=P.pendingToken||null,K}_getIdTokenResponse(f){return Ln(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Ln(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ln(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,L.xO)(g)}return f}}function yp(_,f){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:sendVerificationCode",Yt(_,f))})).apply(this,arguments)}function za(){return(za=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signInWithPhoneNumber",Yt(_,f))})).apply(this,arguments)}function Kc(){return(Kc=(0,y.Z)(function*(_,f){const g=yield Sr(_,"POST","/v1/accounts:signInWithPhoneNumber",Yt(_,f));if(g.temporaryProof)throw $i(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ep={USER_NOT_FOUND:"user-not-found"};function Zc(){return(Zc=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signInWithPhoneNumber",Yt(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ep)})).apply(this,arguments)}class fa extends Wt{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new fa({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new fa({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function vp(_,f){return za.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function ha(_,f){return Kc.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function wp(_,f){return Zc.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:R}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:R}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:R,temporaryProof:P}=f;return w||g||R||P?new fa({verificationId:g,verificationCode:w,phoneNumber:R,temporaryProof:P}):null}}class fs{constructor(f){var g,w,R,P,K,he;const je=(0,L.zd)((0,L.pd)(f)),nt=null!==(g=je.apiKey)&&void 0!==g?g:null,Et=null!==(w=je.oobCode)&&void 0!==w?w:null,at=function Ip(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=je.mode)&&void 0!==R?R:null);le(nt&&Et&&at,"argument-error"),this.apiKey=nt,this.operation=at,this.code=Et,this.continueUrl=null!==(P=je.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(K=je.languageCode)&&void 0!==K?K:null,this.tenantId=null!==(he=je.tenantId)&&void 0!==he?he:null}static parseLink(f){const g=function Sh(_){const f=(0,L.zd)((0,L.pd)(_)).link,g=f?(0,L.zd)((0,L.pd)(f)).deep_link_id:null,w=(0,L.zd)((0,L.pd)(_)).deep_link_id;return(w?(0,L.zd)((0,L.pd)(w)).link:null)||w||g||f||_}(f);try{return new fs(g)}catch(w){return null}}}let Ka=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,w){return Vl._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const R=fs.parseLink(w);return le(R,"argument-error"),Vl._fromEmailAndCode(g,R.code,R.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Xs{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ui extends Xs{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class So extends ui{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return le("providerId"in g&&"signInMethod"in g,"argument-error"),hs._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return le(f.idToken||f.accessToken,"argument-error"),hs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return So.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return So.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:R,pendingToken:P,nonce:K,providerId:he}=f;if(!w&&!R&&!g&&!P||!he)return null;try{return new So(he)._credential({idToken:g,accessToken:w,nonce:K,pendingToken:P})}catch(je){return null}}}let pa=(()=>{class _ extends ui{constructor(){super("facebook.com")}static credential(g){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),ga=(()=>{class _ extends ui{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:R}=g;if(!w&&!R)return null;try{return _.credential(w,R)}catch(P){return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Yc=(()=>{class _ extends ui{constructor(){super("github.com")}static credential(g){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch(w){return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class Ao extends Wt{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ln(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Ln(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ln(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:R,pendingToken:P}=g;return w&&R&&P&&w===R?new Ao(w,P):null}static _create(f,g){return new Ao(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ps extends Xs{constructor(f){le(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return ps.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return ps.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=Ao.fromJSON(f);return le(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return Ao._create(w,g)}catch(R){return null}}}let ci=(()=>{class _ extends ui{constructor(){super("twitter.com")}static credential(g,w){return hs._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:R}=g;if(!w||!R)return null;try{return _.credential(w,R)}catch(P){return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Xc(_,f){return pr.apply(this,arguments)}function pr(){return(pr=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signUp",Yt(_,f))})).apply(this,arguments)}class Er{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,R=!1){return(0,y.Z)(function*(){const P=yield mn._fromIdTokenResponse(f,w,R),K=Jc(w);return new Er({user:P,providerId:K,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,y.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const R=Jc(w);return new Er({user:f,providerId:R,_tokenResponse:w,operationType:g})})()}}function Jc(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function jl(){return(jl=(0,y.Z)(function*(_){var f;const g=Le(_);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new Er({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Xc(g,{returnSecureToken:!0}),R=yield Er._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(R.user),R})).apply(this,arguments)}class Uu extends L.ZR{constructor(f,g,w,R){var P;super(g.code,g.message),this.operationType=w,this.user=R,Object.setPrototypeOf(this,Uu.prototype),this.customData={appName:f.name,tenantId:null!==(P=f.tenantId)&&void 0!==P?P:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,R){return new Uu(f,g,w,R)}}function Bu(_,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Uu._fromErrorAndOperation(_,P,f,w):P})}function Vu(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function ju(){return(ju=(0,y.Z)(function*(_,f){const g=(0,L.m9)(_);yield Js(!0,g,f);const{providerUserInfo:w}=yield zn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),R=Vu(w||[]);return g.providerData=g.providerData.filter(P=>R.has(P.providerId)),R.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function cn(_,f){return Za.apply(this,arguments)}function Za(){return(Za=(0,y.Z)(function*(_,f,g=!1){const w=yield Ti(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return Er._forOperation(_,"link",w)})).apply(this,arguments)}function Js(_,f,g){return en.apply(this,arguments)}function en(){return(en=(0,y.Z)(function*(_,f,g){yield oi(f);const R=!1===_?"provider-already-linked":"no-such-provider";le(Vu(f.providerData).has(g)===_,f.auth,R)})).apply(this,arguments)}function Hl(_,f){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,y.Z)(function*(_,f,g=!1){const{auth:w}=_,R="reauthenticate";try{const P=yield Ti(_,Bu(w,R,f,_),g);le(P.idToken,w,"internal-error");const K=tt(P.idToken);le(K,w,"internal-error");const{sub:he}=K;return le(_.uid===he,w,"user-mismatch"),Er._forOperation(_,R,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&pe(w,"user-mismatch"),P}})).apply(this,arguments)}function Mo(_,f){return ir.apply(this,arguments)}function ir(){return(ir=(0,y.Z)(function*(_,f,g=!1){const w="signIn",R=yield Bu(_,w,f),P=yield Er._fromIdTokenResponse(_,w,R);return g||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function $l(_,f){return An.apply(this,arguments)}function An(){return(An=(0,y.Z)(function*(_,f){return Mo(Le(_),f)})).apply(this,arguments)}function ms(_,f){return sr.apply(this,arguments)}function sr(){return(sr=(0,y.Z)(function*(_,f){const g=(0,L.m9)(_);return yield Js(!1,g,f.providerId),cn(g,f)})).apply(this,arguments)}function ma(_,f){return qi.apply(this,arguments)}function qi(){return(qi=(0,y.Z)(function*(_,f){return Hl((0,L.m9)(_),f)})).apply(this,arguments)}function Hu(_,f){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,y.Z)(function*(_,f){return Sr(_,"POST","/v1/accounts:signInWithCustomToken",Yt(_,f))})).apply(this,arguments)}function to(){return(to=(0,y.Z)(function*(_,f){const g=Le(_),w=yield Hu(g,{token:f,returnSecureToken:!0}),R=yield Er._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(R.user),R})).apply(this,arguments)}class dt{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Qa._fromServerResponse(f,g):pe(f,"internal-error")}}class Qa extends dt{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Qa(g)}}function Xa(_,f,g){var w;le((null===(w=g.url)||void 0===w?void 0:w.length)>0,_,"invalid-continue-uri"),le(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(le(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(le(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Ja(){return(Ja=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_),R={requestType:"PASSWORD_RESET",email:f};g&&Xa(w,R,g),yield qc(w,R)})).apply(this,arguments)}function el(){return(el=(0,y.Z)(function*(_,f,g){yield To((0,L.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function De(){return(De=(0,y.Z)(function*(_,f){yield ua((0,L.m9)(_),{oobCode:f})})).apply(this,arguments)}function Ot(_,f){return ql.apply(this,arguments)}function ql(){return(ql=(0,y.Z)(function*(_,f){const g=(0,L.m9)(_),w=yield To(g,{oobCode:f}),R=w.requestType;switch(le(R,g,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":le(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":le(w.mfaInfo,g,"internal-error");default:le(w.email,g,"internal-error")}let P=null;return w.mfaInfo&&(P=dt._fromServerResponse(Le(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:P},operation:R}})).apply(this,arguments)}function no(){return(no=(0,y.Z)(function*(_,f){const{data:g}=yield Ot((0,L.m9)(_),f);return g.email})).apply(this,arguments)}function xr(){return(xr=(0,y.Z)(function*(_,f,g){const w=Le(_),R=yield Xc(w,{returnSecureToken:!0,email:f,password:g}),P=yield Er._fromIdTokenResponse(w,"signIn",R);return yield w._updateCurrentUser(P.user),P})).apply(this,arguments)}function nd(){return(nd=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_),R={requestType:"EMAIL_SIGNIN",email:f};le(g.handleCodeInApp,w,"argument-error"),g&&Xa(w,R,g),yield Ci(w,R)})).apply(this,arguments)}function _a(){return(_a=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_),R=Ka.credentialWithLink(f,g||wt());return le(R._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),$l(w,R)})).apply(this,arguments)}function Qn(_,f){return Di.apply(this,arguments)}function Di(){return(Di=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:createAuthUri",Yt(_,f))})).apply(this,arguments)}function Gi(){return(Gi=(0,y.Z)(function*(_,f){const w={identifier:f,continueUri:Gt()?wt():"http://localhost"},{signinMethods:R}=yield Qn((0,L.m9)(_),w);return R||[]})).apply(this,arguments)}function rl(){return(rl=(0,y.Z)(function*(_,f){const g=(0,L.m9)(_),R={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Xa(g.auth,R,f);const{email:P}=yield zr(g.auth,R);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function il(){return(il=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&Xa(w.auth,P,g);const{email:K}=yield Gc(w.auth,P);K!==_.email&&(yield _.reload())})).apply(this,arguments)}function sd(_,f){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,y.Z)(function*(_,f){return Ut(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function sl(){return(sl=(0,y.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,L.m9)(_),P={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},K=yield Ti(w,sd(w.auth,P));w.displayName=K.displayName||null,w.photoURL=K.photoUrl||null;const he=w.providerData.find(({providerId:je})=>"password"===je);he&&(he.displayName=w.displayName,he.photoURL=w.photoURL),yield w._updateTokensIfNecessary(K)})).apply(this,arguments)}function Wl(_,f,g){return xo.apply(this,arguments)}function xo(){return(xo=(0,y.Z)(function*(_,f,g){const{auth:w}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(P.email=f),g&&(P.password=g);const K=yield Ti(_,Ct(w,P));yield _._updateTokensIfNecessary(K,!0)})).apply(this,arguments)}class No{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class od extends No{constructor(f,g,w,R){super(f,g,w),this.username=R}}class Mh extends No{constructor(f,g){super(f,"facebook.com",g)}}class ya extends od{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Wi extends No{constructor(f,g){super(f,"google.com",g)}}class Rh extends od{constructor(f,g,w){super(f,"twitter.com",g,w)}}function or(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ku(_){var f,g;if(!_)return null;const{providerId:w}=_,R=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!w&&(null==_?void 0:_.idToken)){const K=null===(g=null===(f=tt(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(K)return new No(P,"anonymous"!==K&&"custom"!==K?K:null)}if(!w)return null;switch(w){case"facebook.com":return new Mh(P,R);case"github.com":return new ya(P,R);case"google.com":return new Wi(P,R);case"twitter.com":return new Rh(P,R,_.screenName||null);case"custom":case"anonymous":return new No(P,null);default:return new No(P,w,R)}}(g)}class vs{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new vs("enroll",f)}static _fromMfaPendingCredential(f){return new vs("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return vs._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return vs._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ol{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=Le(f),R=g.customData._serverResponse,P=(R.mfaInfo||[]).map(he=>dt._fromServerResponse(w,he));le(R.mfaPendingCredential,w,"internal-error");const K=vs._fromMfaPendingCredential(R.mfaPendingCredential);return new ol(K,P,function(){var he=(0,y.Z)(function*(je){const nt=yield je._process(w,K);delete R.mfaInfo,delete R.mfaPendingCredential;const Et=Object.assign(Object.assign({},R),{idToken:nt.idToken,refreshToken:nt.refreshToken});switch(g.operationType){case"signIn":const at=yield Er._fromIdTokenResponse(w,g.operationType,Et);return yield w._updateCurrentUser(at.user),at;case"reauthenticate":return le(g.user,w,"internal-error"),Er._forOperation(g.user,g.operationType,Et);default:pe(w,"internal-error")}});return function(je){return he.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,y.Z)(function*(){return g.signInResolver(f)})()}}function zl(_,f){return Ut(_,"POST","/v2/accounts/mfaEnrollment:start",Yt(_,f))}class Es{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>dt._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new Es(f)}getSession(){var f=this;return(0,y.Z)(function*(){return vs._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,y.Z)(function*(){const R=f,P=yield w.getSession(),K=yield Ti(w.user,R._process(w.user.auth,P,g));return yield w.user._updateTokensIfNecessary(K),w.user.reload()})()}unenroll(f){var g=this;return(0,y.Z)(function*(){const w="string"==typeof f?f:f.uid,R=yield g.user.getIdToken(),P=yield Ti(g.user,function Nh(_,f){return Ut(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Yt(_,f))}(g.user.auth,{idToken:R,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:K})=>K!==w),yield g.user._updateTokensIfNecessary(P);try{yield g.user.reload()}catch(K){if("auth/user-token-expired"!==K.code)throw K}})()}}const va=new WeakMap,al="__sak";class ro{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(al,"1"),this.storage.removeItem(al),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ws=(()=>{class _ extends ro{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ll(){const _=(0,L.z$)();return Ul(_)||Gr(_)}()&&function fr(){try{return!(!window||window===window.top)}catch(_){return!1}}(),this.fallbackToPolling=Zs(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const R=this.storage.getItem(w),P=this.localCache[w];R!==P&&g(w,P,R)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((he,je,nt)=>{this.notifyListeners(he,nt)});const R=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(R);if(g.newValue!==he)null!==g.newValue?this.storage.setItem(R,g.newValue):this.storage.removeItem(R);else if(this.localCache[R]===g.newValue&&!w)return}const P=()=>{const he=this.storage.getItem(R);!w&&this.localCache[R]===he||this.notifyListeners(R,he)},K=this.storage.getItem(R);!function Wa(){return(0,L.w1)()&&10===document.documentMode}()||K===g.newValue||g.newValue===g.oldValue?P():setTimeout(P,10)}notifyListeners(g,w){this.localCache[g]=w;const R=this.listeners[g];if(R)for(const P of Array.from(R))P(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var R=()=>super._set,P=this;return(0,y.Z)(function*(){yield R().call(P,g,w),P.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,R=this;return(0,y.Z)(function*(){const P=yield w().call(R,g);return R.localCache[g]=JSON.stringify(P),P})()}_remove(g){var w=()=>super._remove,R=this;return(0,y.Z)(function*(){yield w().call(R,g),delete R.localCache[g]})()}}return _.type="LOCAL",_})(),Pn=(()=>{class _ extends ro{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return _.type="SESSION",_})();let Ea=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(P=>P.isListeningto(g));if(w)return w;const R=new _(g);return this.receivers.push(R),R}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,y.Z)(function*(){const R=g,{eventId:P,eventType:K,data:he}=R.data,je=w.handlersMap[K];if(!(null==je?void 0:je.size))return;R.ports[0].postMessage({status:"ack",eventId:P,eventType:K});const nt=Array.from(je).map(function(){var at=(0,y.Z)(function*($t){return $t(R.origin,he)});return function($t){return at.apply(this,arguments)}}()),Et=yield function lr(_){return Promise.all(_.map(function(){var f=(0,y.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(nt);R.ports[0].postMessage({status:"done",eventId:P,eventType:K,response:Et})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Bt(_="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return _+g}class Kl{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var R=this;return(0,y.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let K,he;return new Promise((je,nt)=>{const Et=Bt("",20);P.port1.start();const at=setTimeout(()=>{nt(new Error("unsupported_event"))},w);he={messageChannel:P,onMessage($t){const gi=$t;if(gi.data.eventId===Et)switch(gi.data.status){case"ack":clearTimeout(at),K=setTimeout(()=>{nt(new Error("timeout"))},3e3);break;case"done":clearTimeout(K),je(gi.data.response);break;default:clearTimeout(at),clearTimeout(K),nt(new Error("invalid_response"))}}},R.handlers.add(he),P.port1.addEventListener("message",he.onMessage),R.target.postMessage({eventType:f,eventId:Et,data:g},[P.port2])}).finally(()=>{he&&R.removeMessageHandler(he)})})()}}function on(){return window}function Rn(){return void 0!==on().WorkerGlobalScope&&"function"==typeof on().importScripts}function ko(){return(ko=(0,y.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(_){return null}})).apply(this,arguments)}const Yl="firebaseLocalStorageDb",Ql="firebaseLocalStorage",io="fbase_key";class Po{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function At(_,f){return _.transaction([Ql],f?"readwrite":"readonly").objectStore(Ql)}function Zr(){const _=indexedDB.open(Yl,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const w=_.result;try{w.createObjectStore(Ql,{keyPath:io})}catch(R){g(R)}}),_.addEventListener("success",(0,y.Z)(function*(){const w=_.result;w.objectStoreNames.contains(Ql)?f(w):(w.close(),yield function Cn(){const _=indexedDB.deleteDatabase(Yl);return new Po(_).toPromise()}(),f(yield Zr()))}))})}function ul(_,f,g){return br.apply(this,arguments)}function br(){return(br=(0,y.Z)(function*(_,f,g){const w=At(_,!0).put({[io]:f,value:g});return new Po(w).toPromise()})).apply(this,arguments)}function Bn(){return(Bn=(0,y.Z)(function*(_,f){const g=At(_,!1).get(f),w=yield new Po(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function O(_,f){const g=At(_,!0).delete(f);return new Po(g).toPromise()}const di=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,y.Z)(function*(){return g.db||(g.db=yield Zr()),g.db})()}_withRetries(g){var w=this;return(0,y.Z)(function*(){let R=0;for(;;)try{const P=yield w._openDb();return yield g(P)}catch(P){if(R++>3)throw P;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,y.Z)(function*(){return Rn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,y.Z)(function*(){g.receiver=Ea._getInstance(function Zl(){return Rn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,y.Z)(function*(R,P){return{keyProcessed:(yield g._poll()).includes(P.key)}});return function(R,P){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,y.Z)(function*(R,P){return["keyChanged"]});return function(R,P){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,y.Z)(function*(){var w,R;if(g.activeServiceWorker=yield function Ir(){return ko.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Kl(g.activeServiceWorker);const P=yield g.sender._send("ping",{},800);!P||(null===(w=P[0])||void 0===w?void 0:w.fulfilled)&&(null===(R=P[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,y.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function wa(){var _;return(null===(_=null==navigator?void 0:navigator.serviceWorker)||void 0===_?void 0:_.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Zr();return yield ul(g,al,"1"),yield O(g,al),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,y.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var R=this;return(0,y.Z)(function*(){return R._withPendingWrite((0,y.Z)(function*(){return yield R._withRetries(P=>ul(P,g,w)),R.localCache[g]=w,R.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,y.Z)(function*(){const R=yield w._withRetries(P=>function me(_,f){return Bn.apply(this,arguments)}(P,g));return w.localCache[g]=R,R})()}_remove(g){var w=this;return(0,y.Z)(function*(){return w._withPendingWrite((0,y.Z)(function*(){return yield w._withRetries(R=>O(R,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,y.Z)(function*(){const w=yield g._withRetries(K=>{const he=At(K,!1).getAll();return new Po(he).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const R=[],P=new Set;for(const{fbase_key:K,value:he}of w)P.add(K),JSON.stringify(g.localCache[K])!==JSON.stringify(he)&&(g.notifyListeners(K,he),R.push(K));for(const K of Object.keys(g.localCache))g.localCache[K]&&!P.has(K)&&(g.notifyListeners(K,null),R.push(K));return R})()}notifyListeners(g,w){this.localCache[g]=w;const R=this.listeners[g];if(R)for(const P of Array.from(R))P(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function ud(_,f){return Ut(_,"POST","/v2/accounts/mfaSignIn:start",Yt(_,f))}function Is(){return(Is=(0,y.Z)(function*(_){return(yield Ut(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Ia(_){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",_),w.onload=f,w.onerror=R=>{const P=Fe("internal-error");P.customData=R,g(P)},w.type="text/javascript",w.charset="UTF-8",function bs(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(w)})}function Si(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Yr=1e12;class zi{constructor(f){this.auth=f,this.counter=Yr,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new Xu(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||Yr;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Yr))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,y.Z)(function*(){var w;return null===(w=g._widgets.get(f||Yr))||void 0===w||w.execute(),""})()}}class Xu{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof f?document.getElementById(f):f;le(R,"argument-error",{appName:g}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Fo(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<_;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Vn=Si("rcb"),Lo=new Wn(3e4,6e4);class so{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!on().grecaptcha}load(f,g=""){return le(function Qr(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(on().grecaptcha):new Promise((w,R)=>{const P=on().setTimeout(()=>{R(Fe(f,"network-request-failed"))},Lo.get());on()[Vn]=()=>{on().clearTimeout(P),delete on()[Vn];const he=on().grecaptcha;if(!he)return void R(Fe(f,"internal-error"));const je=he.render;he.render=(nt,Et)=>{const at=je(nt,Et);return this.counter++,at},this.hostLanguage=g,w(he)},Ia(`https://www.google.com/recaptcha/api.js??${(0,L.xO)({onload:Vn,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(P),R(Fe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!on().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class a_{load(f){return(0,y.Z)(function*(){return new zi(f)})()}clearedOneInstance(){}}const eu="recaptcha",Oh={theme:"light",type:"image"};class Cs{constructor(f,g=Object.assign({},Oh),w){this.parameters=g,this.type=eu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Le(w),this.isInvisible="invisible"===this.parameters.size,le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof f?document.getElementById(f):f;le(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new a_:new so,this.validateStartingState()}verify(){var f=this;return(0,y.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(P=>{const K=he=>{!he||(f.tokenChangeListeners.delete(K),P(he))};f.tokenChangeListeners.add(K),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){le(!this.parameters.sitekey,this.auth,"argument-error"),le(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),le("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=on()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){le(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,y.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,y.Z)(function*(){le(Gt()&&!Rn(),f.auth,"internal-error"),yield function Ds(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Jl(_){return Is.apply(this,arguments)}(f.auth);le(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return le(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xr{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=fa._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function fn(){return(fn=(0,y.Z)(function*(_,f,g){const w=Le(_),R=yield Cr(w,f,(0,L.m9)(g));return new Xr(R,P=>$l(w,P))})).apply(this,arguments)}function oo(){return(oo=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_);yield Js(!1,w,"phone");const R=yield Cr(w.auth,f,(0,L.m9)(g));return new Xr(R,P=>ms(w,P))})).apply(this,arguments)}function tu(){return(tu=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_),R=yield Cr(w.auth,f,(0,L.m9)(g));return new Xr(R,P=>ma(w,P))})).apply(this,arguments)}function Cr(_,f,g){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,y.Z)(function*(_,f,g){var w;const R=yield g.verify();try{let P;if(le("string"==typeof R,_,"argument-error"),le(g.type===eu,_,"argument-error"),P="string"==typeof f?{phoneNumber:f}:f,"session"in P){const K=P.session;if("phoneNumber"in P)return le("enroll"===K.type,_,"internal-error"),(yield zl(_,{idToken:K.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{le("signin"===K.type,_,"internal-error");const he=(null===(w=P.multiFactorHint)||void 0===w?void 0:w.uid)||P.multiFactorUid;return le(he,_,"missing-multi-factor-info"),(yield ud(_,{mfaPendingCredential:K.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:K}=yield yp(_,{phoneNumber:P.phoneNumber,recaptchaToken:R});return K}}finally{g._reset()}})).apply(this,arguments)}function ba(){return(ba=(0,y.Z)(function*(_,f){yield cn((0,L.m9)(_),f)})).apply(this,arguments)}let Ai=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=Le(g)}verifyPhoneNumber(g,w){return Cr(this.auth,g,(0,L.m9)(w))}static credential(g,w){return fa._fromVerification(g,w)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:R}=g;return w&&R?fa._fromTokenResponse(w,R):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function hi(_,f){return f?ue(f):(le(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Uo extends Wt{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ln(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ln(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ln(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function ao(_){return Mo(_.auth,new Uo(_),_.bypassAuthState)}function Fh(_){const{auth:f,user:g}=_;return le(g,f,"internal-error"),Hl(g,new Uo(_),_.bypassAuthState)}function Ta(_){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,y.Z)(function*(_){const{auth:f,user:g}=_;return le(g,f,"internal-error"),cn(g,new Uo(_),_.bypassAuthState)})).apply(this,arguments)}class ei{constructor(f,g,w,R,P=!1){this.auth=f,this.resolver=w,this.user=R,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,y.Z)(function*(w,R){f.pendingPromise={resolve:w,reject:R};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(P){f.reject(P)}});return function(w,R){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,y.Z)(function*(){const{urlResponse:w,sessionId:R,postBody:P,tenantId:K,error:he,type:je}=f;if(he)return void g.reject(he);const nt={auth:g.auth,requestUri:w,sessionId:R,tenantId:K||void 0,postBody:P||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(je)(nt))}catch(Et){g.reject(Et)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return ao;case"linkViaPopup":case"linkViaRedirect":return Ta;case"reauthViaPopup":case"reauthViaRedirect":return Fh;default:pe(this.auth,"internal-error")}}resolve(f){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ae(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Da=new Wn(2e3,1e4);function Ju(){return(Ju=(0,y.Z)(function*(_,f,g){const w=Le(_);Ye(_,f,Xs);const R=hi(w,g);return new ru(w,"signInViaPopup",f,R).executeNotNull()})).apply(this,arguments)}function Ss(){return(Ss=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_);Ye(w.auth,f,Xs);const R=hi(w.auth,g);return new ru(w.auth,"reauthViaPopup",f,R,w).executeNotNull()})).apply(this,arguments)}function nu(){return(nu=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_);Ye(w.auth,f,Xs);const R=hi(w.auth,g);return new ru(w.auth,"linkViaPopup",f,R,w).executeNotNull()})).apply(this,arguments)}let ru=(()=>{class _ extends ei{constructor(g,w,R,P,K){super(g,w,P,K),this.provider=R,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,y.Z)(function*(){const w=yield g.execute();return le(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,y.Z)(function*(){ae(1===g.filter.length,"Popup operations only handle one event");const w=Bt();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(R=>{g.reject(R)}),g.resolver._isIframeWebStorageSupported(g.auth,R=>{R||g.reject(Fe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,R;this.pollId=(null===(R=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Da.get())};g()}}return _.currentPopupAction=null,_})();const Vo=new Map;class Ki extends ei{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,y.Z)(function*(){let w=Vo.get(g.auth._key());if(!w){try{const P=(yield function dl(_,f){return nc.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(P)}catch(R){w=()=>Promise.reject(R)}Vo.set(g.auth._key(),w)}return g.bypassAuthState||Vo.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,y.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const R=yield w.auth._redirectUserForId(f.eventId);if(R)return w.user=R,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function nc(){return(nc=(0,y.Z)(function*(_,f){const g=T(f),w=rc(_);if(!(yield w._isAvailable()))return!1;const R="true"===(yield w._get(g));return yield w._remove(g),R})).apply(this,arguments)}function uo(_,f){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,y.Z)(function*(_,f){return rc(_)._set(T(f),"true")})).apply(this,arguments)}function rc(_){return ue(_._redirectPersistence)}function T(_){return Kn("pendingRedirect",_.config.apiKey,_.name)}function V(){return(V=(0,y.Z)(function*(_,f,g){const w=Le(_);Ye(_,f,Xs);const R=hi(w,g);return yield uo(R,w),R._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function xe(){return(xe=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_);Ye(w.auth,f,Xs);const R=hi(w.auth,g);yield uo(R,w.auth);const P=yield hl(w);return R._openRedirect(w.auth,f,"reauthViaRedirect",P)})).apply(this,arguments)}function Vt(){return(Vt=(0,y.Z)(function*(_,f,g){const w=(0,L.m9)(_);Ye(w.auth,f,Xs);const R=hi(w.auth,g);yield Js(!1,w,f.providerId),yield uo(R,w.auth);const P=yield hl(w);return R._openRedirect(w.auth,f,"linkViaRedirect",P)})).apply(this,arguments)}function jn(){return(jn=(0,y.Z)(function*(_,f){return yield Le(_)._initializationPromise,Dr(_,f,!1)})).apply(this,arguments)}function Dr(_,f){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,y.Z)(function*(_,f,g=!1){const w=Le(_),R=hi(w,f),K=yield new Ki(w,R,g).execute();return K&&!g&&(delete K.user._redirectEventId,yield w._persistUserIfCurrent(K.user),yield w._setRedirectUser(null,f)),K})).apply(this,arguments)}function hl(_){return co.apply(this,arguments)}function co(){return(co=(0,y.Z)(function*(_){const f=Bt(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class Zi{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Ap(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ic(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!ic(f)){const R=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Fe(this.auth,R))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(pi(f))}saveEventToCache(f){this.cachedEventUids.add(pi(f)),this.lastProcessedEventTime=Date.now()}}function pi(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function ic({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===(null==f?void 0:f.code)}function jo(_){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,y.Z)(function*(_,f={}){return Ut(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Mp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,l_=/^https?/;function Yi(){return(Yi=(0,y.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield jo(_);for(const g of f)try{if(fl(g))return}catch(w){}pe(_,"unauthorized-domain")})).apply(this,arguments)}function fl(_){const f=wt(),{protocol:g,hostname:w}=new URL(f);if(_.startsWith("chrome-extension://")){const K=new URL(_);return""===K.hostname&&""===w?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&K.hostname===w}if(!l_.test(g))return!1;if(Mp.test(_))return w===_;const R=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(w)}const u_=new Wn(3e4,6e4);function c_(){const _=on().___jsl;if(null==_?void 0:_.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let hd=null;function xp(_){return hd=hd||function Rp(_){return new Promise((f,g)=>{var w,R,P;function K(){c_(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{c_(),g(Fe(_,"network-request-failed"))},timeout:u_.get()})}if(null===(R=null===(w=on().gapi)||void 0===w?void 0:w.iframes)||void 0===R?void 0:R.Iframe)f(gapi.iframes.getContext());else{if(!(null===(P=on().gapi)||void 0===P?void 0:P.load)){const he=Si("iframefcb");return on()[he]=()=>{gapi.load?K():g(Fe(_,"network-request-failed"))},Ia(`https://apis.google.com/js/api.js?onload=${he}`).catch(je=>g(je))}K()}}).catch(f=>{throw hd=null,f})}(_),hd}const Np=new Wn(5e3,15e3),fd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pl(_){const f=_.config;le(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?rn(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:_.name,v:de.SDK_VERSION},R=pd.get(_.config.apiHost);R&&(w.eid=R);const P=_._getFrameworks();return P.length&&(w.fw=P.join(",")),`${g}?${(0,L.xO)(w).slice(1)}`}function gd(){return gd=(0,y.Z)(function*(_){const f=yield xp(_),g=on().gapi;return le(g,_,"internal-error"),f.open({where:document.body,url:pl(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fd,dontclear:!0},w=>new Promise(function(){var R=(0,y.Z)(function*(P,K){yield w.restyle({setHideOnLeave:!1});const he=Fe(_,"network-request-failed"),je=on().setTimeout(()=>{K(he)},Np.get());function nt(){on().clearTimeout(je),P(w)}w.ping(nt).then(nt,()=>{K(he)})});return function(P,K){return R.apply(this,arguments)}}()))}),gd.apply(this,arguments)}const FE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class _d{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ho(_,f,g,w,R,P){le(_.config.authDomain,_,"auth-domain-config-required"),le(_.config.apiKey,_,"invalid-api-key");const K={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:w,v:de.SDK_VERSION,eventId:R};if(f instanceof Xs){f.setDefaultLanguage(_.languageCode),K.providerId=f.providerId||"",(0,L.xb)(f.getCustomParameters())||(K.customParameters=JSON.stringify(f.getCustomParameters()));for(const[je,nt]of Object.entries(P||{}))K[je]=nt}if(f instanceof ui){const je=f.getScopes().filter(nt=>""!==nt);je.length>0&&(K.scopes=je.join(","))}_.tenantId&&(K.tid=_.tenantId);const he=K;for(const je of Object.keys(he))void 0===he[je]&&delete he[je];return`${function pn({config:_}){return _.emulator?rn(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,L.xO)(he).slice(1)}`}const Mi="webStorageSupport";class _n extends class Op{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return J("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new _n(f)}_finalizeEnroll(f,g,w){return function ar(_,f){return Ut(_,"POST","/v2/accounts/mfaEnrollment:finalize",Yt(_,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function cd(_,f){return Ut(_,"POST","/v2/accounts/mfaSignIn:finalize",Yt(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Lt=(()=>{class _{constructor(){}static assertion(g){return _n._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var Nr="@firebase/auth";class yd{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,y.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var R;f((null===(R=w)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ml(){return window}function Ho(){return(Ho=(0,y.Z)(function*(_,f,g){var w;const{BuildInfo:R}=ml();ae(f.sessionId,"AuthEvent did not contain a session ID");const P=yield UE(f.sessionId),K={};return Gr()?K.ibi=R.packageName:Mr()?K.apn=R.packageName:pe(_,"operation-not-supported-in-this-environment"),R.displayName&&(K.appDisplayName=R.displayName),K.sessionId=P,ho(_,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,K)})).apply(this,arguments)}function Xi(){return(Xi=(0,y.Z)(function*(_){const{BuildInfo:f}=ml(),g={};Gr()?g.iosBundleId=f.packageName:Mr()?g.androidPackageName=f.packageName:pe(_,"operation-not-supported-in-this-environment"),yield jo(_,g)})).apply(this,arguments)}function vd(){return(vd=(0,y.Z)(function*(_,f,g){const{cordova:w}=ml();let R=()=>{};try{yield new Promise((P,K)=>{let he=null;function je(){var at;P();const $t=null===(at=w.plugins.browsertab)||void 0===at?void 0:at.close;"function"==typeof $t&&$t(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function nt(){he||(he=window.setTimeout(()=>{K(Fe(_,"redirect-cancelled-by-user"))},2e3))}function Et(){"visible"===(null==document?void 0:document.visibilityState)&&nt()}f.addPassiveListener(je),document.addEventListener("resume",nt,!1),Mr()&&document.addEventListener("visibilitychange",Et,!1),R=()=>{f.removePassiveListener(je),document.removeEventListener("resume",nt,!1),document.removeEventListener("visibilitychange",Et,!1),he&&window.clearTimeout(he)}})}finally{R()}})).apply(this,arguments)}function UE(_){return Bh.apply(this,arguments)}function Bh(){return(Bh=(0,y.Z)(function*(_){const f=au(_),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(R=>R.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function au(_){if(ae(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(_);const f=new ArrayBuffer(_.length),g=new Uint8Array(f);for(let w=0;w<_.length;w++)g[w]=_.charCodeAt(w);return g}!function h_(_){(0,de._registerComponent)(new ie.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),{apiKey:R,authDomain:P}=w.options;return(K=>{le(R&&!R.includes(":"),"invalid-api-key",{appName:K.name}),le(!(null==P?void 0:P.includes(":")),"argument-error",{appName:K.name});const he={apiKey:R,authDomain:P,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aa(_)},je=new Wr(K,he);return function fe(_,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(ue);(null==f?void 0:f.errorMap)&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(je,g),je})(w)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new ie.wA("auth-internal",f=>{const g=Le(f.getProvider("auth").getImmediate());return new yd(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(Nr,"0.19.7",function Qi(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,de.registerVersion)(Nr,"0.19.7","esm2017")}("Browser");class lu extends Zi{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,y.Z)(function*(){yield f.initPromise})()}}function fo(_){return yl.apply(this,arguments)}function yl(){return(yl=(0,y.Z)(function*(_){const f=yield kr()._get(Vh(_));return f&&(yield kr()._remove(Vh(_))),f})).apply(this,arguments)}function g_(){const _=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);_.push(f.charAt(w))}return _.join("")}function kr(){return ue(ws)}function Vh(_){return Kn("authEvent",_.config.apiKey,_.name)}function uc(_){if(!(null==_?void 0:_.includes("?")))return{};const[f,...g]=_.split("?");return(0,L.zd)(g.join("?"))}function vl(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fe("no-auth-event")}}function Id(){var _;return(null===(_=null==self?void 0:self.location)||void 0===_?void 0:_.protocol)||null}function jp(_=(0,L.z$)()){return!("file:"!==Id()&&"ionic:"!==Id()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function Dn(){try{const _=self.localStorage,f=Bt();if(_)return _.setItem(f,"1"),_.removeItem(f),!function po(_=(0,L.z$)()){return function Hh(){return(0,L.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Hp(_=(0,L.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,L.hl)()}catch(_){return $o()&&(0,L.hl)()}return!1}function $o(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function It(){return(function yn(){return"http:"===Id()||"https:"===Id()}()||(0,L.ru)()||jp())&&!function __(){return(0,L.b$)()||(0,L.UG)()}()&&Dn()&&!$o()}function $h(){return jp()&&"undefined"!=typeof document}function El(){return(El=(0,y.Z)(function*(){return!!$h()&&new Promise(_=>{const f=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),_(!0)})})})).apply(this,arguments)}const ti={LOCAL:"local",NONE:"none",SESSION:"session"},cc=le,dc="persistence";function hu(_){return bd.apply(this,arguments)}function bd(){return(bd=(0,y.Z)(function*(_){yield _._initializationPromise;const f=$p(),g=Kn(dc,_.config.apiKey,_.name);f&&f.setItem(g,_._getPersistence())})).apply(this,arguments)}function $p(){var _;try{return(null===(_=function wn(){return"undefined"!=typeof window?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch(f){return null}}const qp=le;class Ms{constructor(){this.browserResolver=ue(class su{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Pn,this._completeRedirectFn=Dr}_openPopup(f,g,w,R){var P=this;return(0,y.Z)(function*(){var K;ae(null===(K=P.eventManagers[f._key()])||void 0===K?void 0:K.manager,"_initialize() not called before _openPopup()");const he=ho(f,g,w,wt(),R);return function Ma(_,f,g,w=500,R=600){const P=Math.max((window.screen.availHeight-R)/2,0).toString(),K=Math.max((window.screen.availWidth-w)/2,0).toString();let he="";const je=Object.assign(Object.assign({},FE),{width:w.toString(),height:R.toString(),top:P,left:K}),nt=(0,L.z$)().toLowerCase();g&&(he=Ga(nt)?"_blank":g),qa(nt)&&(f=f||"http://localhost",je.scrollbars="yes");const Et=Object.entries(je).reduce(($t,[gi,bl])=>`${$t}${gi}=${bl},`,"");if(function bo(_=(0,L.z$)()){var f;return Gr(_)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(nt)&&"_self"!==he)return function tn(_,f){const g=document.createElement("a");g.href=_,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",he),new _d(null);const at=window.open(f||"",he,Et);le(at,_,"popup-blocked");try{at.focus()}catch($t){}return new _d(at)}(f,he,Bt())})()}_openRedirect(f,g,w,R){var P=this;return(0,y.Z)(function*(){return yield P._originValidation(f),function wr(_){on().location.href=_}(ho(f,g,w,wt(),R)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:R,promise:P}=this.eventManagers[g];return R?Promise.resolve(R):(ae(P,"If manager is not set, promise should be"),P)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,y.Z)(function*(){const w=yield function Pp(_){return gd.apply(this,arguments)}(f),R=new Zi(f);return w.register("authEvent",P=>(le(null==P?void 0:P.authEvent,f,"invalid-auth-event"),{status:R.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:R},g.iframes[f._key()]=w,R})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Mi,{type:Mi},R=>{var P;const K=null===(P=null==R?void 0:R[0])||void 0===P?void 0:P[Mi];void 0!==K&&g(!!K),pe(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function sc(_){return Yi.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Zs()||Ul()||Gr()}}),this.cordovaResolver=ue(class Up{constructor(){this._redirectPersistence=Pn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Dr}_initialize(f){var g=this;return(0,y.Z)(function*(){const w=f._key();let R=g.eventManagers.get(w);return R||(R=new lu(f),g.eventManagers.set(w,R),g.attachCallbackListeners(f,R)),R})()}_openPopup(f){pe(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,R){var P=this;return(0,y.Z)(function*(){!function Lp(_){var f,g,w,R,P,K,he,je,nt,Et;const at=ml();le("function"==typeof(null===(f=null==at?void 0:at.universalLinks)||void 0===f?void 0:f.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),le(void 0!==(null===(g=null==at?void 0:at.BuildInfo)||void 0===g?void 0:g.packageName),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),le("function"==typeof(null===(P=null===(R=null===(w=null==at?void 0:at.cordova)||void 0===w?void 0:w.plugins)||void 0===R?void 0:R.browsertab)||void 0===P?void 0:P.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(je=null===(he=null===(K=null==at?void 0:at.cordova)||void 0===K?void 0:K.plugins)||void 0===he?void 0:he.browsertab)||void 0===je?void 0:je.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),le("function"==typeof(null===(Et=null===(nt=null==at?void 0:at.cordova)||void 0===nt?void 0:nt.InAppBrowser)||void 0===Et?void 0:Et.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const K=yield P._initialize(f);yield K.initialized(),K.resetRedirect(),function iu(){Vo.clear()}(),yield P._originValidation(f);const he=function uu(_,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:g_(),postBody:null,tenantId:_.tenantId,error:Fe(_,"no-auth-event")}}(f,w,R);yield function p_(_,f){return kr()._set(Vh(_),f)}(f,he);const je=yield function _l(_,f,g){return Ho.apply(this,arguments)}(f,he,g),nt=yield function lc(_){const{cordova:f}=ml();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let R=null;w?f.plugins.browsertab.openUrl(_):R=f.InAppBrowser.open(_,function $c(_=(0,L.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(R)})})}(je);return function Uh(_,f,g){return vd.apply(this,arguments)}(f,K,nt)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ou(_){return Xi.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:R,BuildInfo:P}=ml(),K=setTimeout((0,y.Z)(function*(){yield fo(f),g.onEvent(vl())}),500),he=function(){var Et=(0,y.Z)(function*(at){clearTimeout(K);const $t=yield fo(f);let gi=null;$t&&(null==at?void 0:at.url)&&(gi=function As(_,f){var g,w;const R=function cu(_){const f=uc(_),g=f.link?decodeURIComponent(f.link):void 0,w=uc(g).link,R=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return uc(R).link||R||w||g||_}(f);if(R.includes("/__/auth/callback")){const P=uc(R),K=P.firebaseError?function Ed(_){try{return JSON.parse(_)}catch(f){return null}}(decodeURIComponent(P.firebaseError)):null,he=null===(w=null===(g=null==K?void 0:K.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],je=he?Fe(he):null;return je?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:je,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:R,postBody:null}}return null}($t,at.url)),g.onEvent(gi||vl())});return function($t){return Et.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,he);const je=R,nt=`${P.packageName.toLowerCase()}://`;ml().handleOpenURL=function(){var Et=(0,y.Z)(function*(at){if(at.toLowerCase().startsWith(nt)&&he({url:at}),"function"==typeof je)try{je(at)}catch($t){console.error($t)}});return function(at){return Et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Pn,this._completeRedirectFn=Dr}_initialize(f){var g=this;return(0,y.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,R){var P=this;return(0,y.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(f,g,w,R)})()}_openRedirect(f,g,w,R){var P=this;return(0,y.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(f,g,w,R)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return $h()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,y.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Xn(){return El.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function Gh(_){return _.unwrap()}function wl(_){return Gp(_)}function Gp(_){const{_tokenResponse:f}=_ instanceof L.ZR?_.customData:_;if(!f)return null;if(!(_ instanceof L.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Ai.credentialFromResult(_);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=ga;break;case"facebook.com":w=pa;break;case"github.com":w=Yc;break;case"twitter.com":w=ci;break;default:const{oauthIdToken:R,oauthAccessToken:P,oauthTokenSecret:K,pendingToken:he,nonce:je}=f;return P||K||R||he?he?g.startsWith("saml.")?Ao._create(g,he):hs._fromParams({providerId:g,signInMethod:g,pendingToken:he,idToken:R,accessToken:P}):new So(g).credential({idToken:R,accessToken:P,rawNonce:je}):null}return _ instanceof L.ZR?w.credentialFromError(_):w.credentialFromResult(_)}function Jn(_,f){return f.catch(g=>{throw g instanceof L.ZR&&function hc(_,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Td(_,function Yu(_,f){var g;const w=(0,L.m9)(_),R=f;return le(f.customData.operationType,w,"argument-error"),le(null===(g=R.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),ol._fromError(w,R)}(_,f));else if(w){const R=Gp(f),P=f;R&&(P.credential=R,P.tenantId=w.tenantId||void 0,P.email=w.email||void 0,P.phoneNumber=w.phoneNumber||void 0)}}(_,g),g}).then(g=>{const R=g.user;return{operationType:g.operationType,credential:wl(g),additionalUserInfo:or(g),user:qo.getOrCreate(R)}})}function Il(_,f){return Wh.apply(this,arguments)}function Wh(){return(Wh=(0,y.Z)(function*(_,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>Jn(_,g.confirm(w))}})).apply(this,arguments)}class Td{constructor(f,g){this.resolver=g,this.auth=function fu(_){return _.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Jn(Gh(this.auth),this.resolver.resolveSignIn(f))}}class qo{constructor(f){this._delegate=f,this.multiFactor=function Cp(_){const f=(0,L.m9)(_);return va.has(f)||va.set(f,Es._fromUser(f)),va.get(f)}(f)}static getOrCreate(f){return qo.USER_MAP.has(f)||qo.USER_MAP.set(f,new qo(f)),qo.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,y.Z)(function*(){return Jn(g.auth,ms(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,y.Z)(function*(){return Il(w.auth,function cl(_,f,g){return oo.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,y.Z)(function*(){return Jn(g.auth,function tc(_,f,g){return nu.apply(this,arguments)}(g._delegate,f,Ms))})()}linkWithRedirect(f){var g=this;return(0,y.Z)(function*(){return yield hu(Le(g.auth)),function Ve(_,f,g){return function Ke(_,f,g){return Vt.apply(this,arguments)}(_,f,g)}(g._delegate,f,Ms)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,y.Z)(function*(){return Jn(g.auth,ma(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Il(this.auth,function gr(_,f,g){return tu.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return Jn(this.auth,function ec(_,f,g){return Ss.apply(this,arguments)}(this._delegate,f,Ms))}reauthenticateWithRedirect(f){var g=this;return(0,y.Z)(function*(){return yield hu(Le(g.auth)),function Y(_,f,g){return function ge(_,f,g){return xe.apply(this,arguments)}(_,f,g)}(g._delegate,f,Ms)})()}sendEmailVerification(f){return function _s(_,f){return rl.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,y.Z)(function*(){return yield function gs(_,f){return ju.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function zu(_,f){return Wl((0,L.m9)(_),f,null)}(this._delegate,f)}updatePassword(f){return function Tp(_,f){return Wl((0,L.m9)(_),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function dd(_,f){return ba.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Gl(_,f){return sl.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function id(_,f,g){return il.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}qo.USER_MAP=new WeakMap;const fc=le;let zh=(()=>{class _{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:R}=g.options;fc(R,"invalid-api-key",{appName:g.name}),fc(R,"invalid-api-key",{appName:g.name});const P="undefined"!=typeof window?Ms:void 0;this._delegate=w.initialize({options:{persistence:y_(R,g.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Pe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?qo.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function un(_,f,g){const w=Le(_);le(w._canInitEmulator,w,"emulator-config-failed"),le(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const R=!!(null==g?void 0:g.disableWarnings),P=Rr(f),{host:K,port:he}=function cs(_){const f=Rr(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(w);if(R){const P=R[1];return{host:P,port:kn(w.substr(P.length+1))}}{const[P,K]=w.split(":");return{host:P,port:kn(K)}}}(f);w.config.emulator={url:`${P}//${K}${null===he?"":`:${he}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:K,port:he,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function ds(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,w)}applyActionCode(g){return function Ah(_,f){return De.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Ot(this._delegate,g)}confirmPasswordReset(g,w){return function $u(_,f,g){return el.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var R=this;return(0,y.Z)(function*(){return Jn(R._delegate,function tl(_,f,g){return xr.apply(this,arguments)}(R._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Wu(_,f){return Gi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function rd(_,f){const g=fs.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,y.Z)(function*(){fc(It(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function Qt(_,f){return jn.apply(this,arguments)}(g._delegate,Ms);return w?Jn(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function Bp(_,f){Le(_)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,R){const{next:P,error:K,complete:he}=Cd(g,w,R);return this._delegate.onAuthStateChanged(P,K,he)}onIdTokenChanged(g,w,R){const{next:P,error:K,complete:he}=Cd(g,w,R);return this._delegate.onIdTokenChanged(P,K,he)}sendSignInLinkToEmail(g,w){return function Gu(_,f,g){return nd.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function td(_,f,g){return Ja.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,y.Z)(function*(){let R;switch(function du(_,f){cc(Object.values(ti).includes(f),_,"invalid-persistence-type"),(0,L.b$)()?cc(f!==ti.SESSION,_,"unsupported-persistence-type"):(0,L.UG)()?cc(f===ti.NONE,_,"unsupported-persistence-type"):$o()?cc(f===ti.NONE||f===ti.LOCAL&&(0,L.hl)(),_,"unsupported-persistence-type"):cc(f===ti.NONE||Dn(),_,"unsupported-persistence-type")}(w._delegate,g),g){case ti.SESSION:R=Pn;break;case ti.LOCAL:R=(yield ue(di)._isAvailable())?di:ws;break;case ti.NONE:R=Nt;break;default:return pe("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(R)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Jn(this._delegate,function ed(_){return jl.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Jn(this._delegate,$l(this._delegate,g))}signInWithCustomToken(g){return Jn(this._delegate,function eo(_,f){return to.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return Jn(this._delegate,function qu(_,f,g){return $l((0,L.m9)(_),Ka.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return Jn(this._delegate,function nl(_,f,g){return _a.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Il(this._delegate,function Sp(_,f,g){return fn.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,y.Z)(function*(){return fc(It(),w._delegate,"operation-not-supported-in-this-environment"),Jn(w._delegate,function lo(_,f,g){return Ju.apply(this,arguments)}(w._delegate,g,Ms))})()}signInWithRedirect(g){var w=this;return(0,y.Z)(function*(){return fc(It(),w._delegate,"operation-not-supported-in-this-environment"),yield hu(w._delegate),function D(_,f,g){return function N(_,f,g){return V.apply(this,arguments)}(_,f,g)}(w._delegate,g,Ms)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Tn(_,f){return no.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=ti,_})();function Cd(_,f,g){let w=_;"function"!=typeof _&&({next:w,error:f,complete:g}=_);const R=w;return{next:K=>R(K&&qo.getOrCreate(K)),error:f,complete:g}}function y_(_,f){const g=function qh(_,f){const g=$p();if(!g)return[];const w=Kn(dc,_,f);switch(g.getItem(w)){case ti.NONE:return[Nt];case ti.LOCAL:return[di,Pn];case ti.SESSION:return[Pn];default:return[]}}(_,f);if("undefined"!=typeof self&&!g.includes(di)&&g.push(di),"undefined"!=typeof window)for(const w of[ws,Pn])g.includes(w)||g.push(w);return g.includes(Nt)||g.push(Nt),g}class pc{constructor(){this.providerId="phone",this._delegate=new Ai(Gh(ee.Z.auth()))}static credential(f,g){return Ai.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}pc.PHONE_SIGN_IN_METHOD=Ai.PHONE_SIGN_IN_METHOD,pc.PROVIDER_ID=Ai.PROVIDER_ID;const v_=le;class gc{constructor(f,g,w=ee.Z.app()){var R;v_(null===(R=w.options)||void 0===R?void 0:R.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new Cs(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function zp(_){_.INTERNAL.registerComponent(new ie.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new zh(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ka,FacebookAuthProvider:pa,GithubAuthProvider:Yc,GoogleAuthProvider:ga,OAuthProvider:So,SAMLAuthProvider:ps,PhoneAuthProvider:pc,PhoneMultiFactorGenerator:Lt,RecaptchaVerifier:gc,TwitterAuthProvider:ci,Auth:zh,AuthCredential:Wt,Error:L.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.2.7")}(ee.Z)},2940:function(it,Se){!function(F){"use strict";function y(X){return Array.prototype.slice.call(X)}function ee(X){return new Promise(function(se,be){X.onsuccess=function(){se(X.result)},X.onerror=function(){be(X.error)}})}function L(X,se,be){var Ae,pe=new Promise(function(Fe,Me){ee(Ae=X[se].apply(X,be)).then(Fe,Me)});return pe.request=Ae,pe}function de(X,se,be){var Ae=L(X,se,be);return Ae.then(function(pe){if(pe)return new G(pe,Ae.request)})}function oe(X,se,be){be.forEach(function(Ae){Object.defineProperty(X.prototype,Ae,{get:function(){return this[se][Ae]},set:function(pe){this[se][Ae]=pe}})})}function ye(X,se,be,Ae){Ae.forEach(function(pe){pe in be.prototype&&(X.prototype[pe]=function(){return L(this[se],pe,arguments)})})}function ie(X,se,be,Ae){Ae.forEach(function(pe){pe in be.prototype&&(X.prototype[pe]=function(){return this[se][pe].apply(this[se],arguments)})})}function ve(X,se,be,Ae){Ae.forEach(function(pe){pe in be.prototype&&(X.prototype[pe]=function(){return de(this[se],pe,arguments)})})}function ce(X){this._index=X}function G(X,se){this._cursor=X,this._request=se}function $(X){this._store=X}function te(X){this._tx=X,this.complete=new Promise(function(se,be){X.oncomplete=function(){se()},X.onerror=function(){be(X.error)},X.onabort=function(){be(X.error)}})}function He(X,se,be){this._db=X,this.oldVersion=se,this.transaction=new te(be)}function Re(X){this._db=X}oe(ce,"_index",["name","keyPath","multiEntry","unique"]),ye(ce,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ve(ce,"_index",IDBIndex,["openCursor","openKeyCursor"]),oe(G,"_cursor",["direction","key","primaryKey","value"]),ye(G,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(X){X in IDBCursor.prototype&&(G.prototype[X]=function(){var se=this,be=arguments;return Promise.resolve().then(function(){return se._cursor[X].apply(se._cursor,be),ee(se._request).then(function(Ae){if(Ae)return new G(Ae,se._request)})})})}),$.prototype.createIndex=function(){return new ce(this._store.createIndex.apply(this._store,arguments))},$.prototype.index=function(){return new ce(this._store.index.apply(this._store,arguments))},oe($,"_store",["name","keyPath","indexNames","autoIncrement"]),ye($,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ve($,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),ie($,"_store",IDBObjectStore,["deleteIndex"]),te.prototype.objectStore=function(){return new $(this._tx.objectStore.apply(this._tx,arguments))},oe(te,"_tx",["objectStoreNames","mode"]),ie(te,"_tx",IDBTransaction,["abort"]),He.prototype.createObjectStore=function(){return new $(this._db.createObjectStore.apply(this._db,arguments))},oe(He,"_db",["name","version","objectStoreNames"]),ie(He,"_db",IDBDatabase,["deleteObjectStore","close"]),Re.prototype.transaction=function(){return new te(this._db.transaction.apply(this._db,arguments))},oe(Re,"_db",["name","version","objectStoreNames"]),ie(Re,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(X){[$,ce].forEach(function(se){X in se.prototype&&(se.prototype[X.replace("open","iterate")]=function(){var be=y(arguments),Ae=be[be.length-1],pe=this._store||this._index,Fe=pe[X].apply(pe,be.slice(0,-1));Fe.onsuccess=function(){Ae(Fe.result)}})})}),[ce,$].forEach(function(X){X.prototype.getAll||(X.prototype.getAll=function(se,be){var Ae=this,pe=[];return new Promise(function(Fe){Ae.iterateCursor(se,function(Me){Me?(pe.push(Me.value),void 0===be||pe.length!=be?Me.continue():Fe(pe)):Fe(pe)})})})}),F.openDb=function Pe(X,se,be){var Ae=L(indexedDB,"open",[X,se]),pe=Ae.request;return pe&&(pe.onupgradeneeded=function(Fe){be&&be(new He(pe.result,Fe.oldVersion,pe.transaction))}),Ae.then(function(Fe){return new Re(Fe)})},F.deleteDb=function qe(X){return L(indexedDB,"deleteDatabase",[X])},Object.defineProperty(F,"__esModule",{value:!0})}(Se)},8306:(it,Se,F)=>{"use strict";F.d(Se,{y:()=>G});var y=F(930),ee=F(727),L=F(8822),de=F(4671);var ie=F(2416),ve=F(576),ce=F(2806);let G=(()=>{class Re{constructor(qe){qe&&(this._subscribe=qe)}lift(qe){const X=new Re;return X.source=this,X.operator=qe,X}subscribe(qe,X,se){const be=function He(Re){return Re&&Re instanceof y.Lv||function te(Re){return Re&&(0,ve.m)(Re.next)&&(0,ve.m)(Re.error)&&(0,ve.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(qe)?qe:new y.Hp(qe,X,se);return(0,ce.x)(()=>{const{operator:Ae,source:pe}=this;be.add(Ae?Ae.call(be,pe):pe?this._subscribe(be):this._trySubscribe(be))}),be}_trySubscribe(qe){try{return this._subscribe(qe)}catch(X){qe.error(X)}}forEach(qe,X){return new(X=$(X))((se,be)=>{const Ae=new y.Hp({next:pe=>{try{qe(pe)}catch(Fe){be(Fe),Ae.unsubscribe()}},error:be,complete:se});this.subscribe(Ae)})}_subscribe(qe){var X;return null===(X=this.source)||void 0===X?void 0:X.subscribe(qe)}[L.L](){return this}pipe(...qe){return function ye(Re){return 0===Re.length?de.y:1===Re.length?Re[0]:function(qe){return Re.reduce((X,se)=>se(X),qe)}}(qe)(this)}toPromise(qe){return new(qe=$(qe))((X,se)=>{let be;this.subscribe(Ae=>be=Ae,Ae=>se(Ae),()=>X(be))})}}return Re.create=Pe=>new Re(Pe),Re})();function $(Re){var Pe;return null!==(Pe=null!=Re?Re:ie.v.Promise)&&void 0!==Pe?Pe:Promise}},7579:(it,Se,F)=>{"use strict";F.d(Se,{x:()=>ie});var y=F(8306),ee=F(727);const de=(0,F(3888).d)(ce=>function(){ce(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var oe=F(8737),ye=F(2806);let ie=(()=>{class ce extends y.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift($){const te=new ve(this,this);return te.operator=$,te}_throwIfClosed(){if(this.closed)throw new de}next($){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const te=this.observers.slice();for(const He of te)He.next($)}})}error($){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=$;const{observers:te}=this;for(;te.length;)te.shift().error($)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:$}=this;for(;$.length;)$.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var $;return(null===($=this.observers)||void 0===$?void 0:$.length)>0}_trySubscribe($){return this._throwIfClosed(),super._trySubscribe($)}_subscribe($){return this._throwIfClosed(),this._checkFinalizedStatuses($),this._innerSubscribe($)}_innerSubscribe($){const{hasError:te,isStopped:He,observers:Re}=this;return te||He?ee.Lc:(Re.push($),new ee.w0(()=>(0,oe.P)(Re,$)))}_checkFinalizedStatuses($){const{hasError:te,thrownError:He,isStopped:Re}=this;te?$.error(He):Re&&$.complete()}asObservable(){const $=new y.y;return $.source=this,$}}return ce.create=(G,$)=>new ve(G,$),ce})();class ve extends ie{constructor(G,$){super(),this.destination=G,this.source=$}next(G){var $,te;null===(te=null===($=this.destination)||void 0===$?void 0:$.next)||void 0===te||te.call($,G)}error(G){var $,te;null===(te=null===($=this.destination)||void 0===$?void 0:$.error)||void 0===te||te.call($,G)}complete(){var G,$;null===($=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===$||$.call(G)}_subscribe(G){var $,te;return null!==(te=null===($=this.source)||void 0===$?void 0:$.subscribe(G))&&void 0!==te?te:ee.Lc}}},930:(it,Se,F)=>{"use strict";F.d(Se,{Hp:()=>He,Lv:()=>te});var y=F(576),ee=F(727),L=F(2416),de=F(7849),oe=F(5032);const ye=ce("C",void 0,void 0);function ce(se,be,Ae){return{kind:se,value:be,error:Ae}}var G=F(3410),$=F(2806);class te extends ee.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,ee.Nn)(be)&&be.add(this)):this.destination=X}static create(be,Ae,pe){return new He(be,Ae,pe)}next(be){this.isStopped?qe(function ve(se){return ce("N",se,void 0)}(be),this):this._next(be)}error(be){this.isStopped?qe(function ie(se){return ce("E",void 0,se)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?qe(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}class He extends te{constructor(be,Ae,pe){let Fe;if(super(),(0,y.m)(be))Fe=be;else if(be){let Me;({next:Fe,error:Ae,complete:pe}=be),this&&L.v.useDeprecatedNextContext?(Me=Object.create(be),Me.unsubscribe=()=>this.unsubscribe()):Me=be,Fe=null==Fe?void 0:Fe.bind(Me),Ae=null==Ae?void 0:Ae.bind(Me),pe=null==pe?void 0:pe.bind(Me)}this.destination={next:Fe?Re(Fe):oe.Z,error:Re(null!=Ae?Ae:Pe),complete:pe?Re(pe):oe.Z}}}function Re(se,be){return(...Ae)=>{try{se(...Ae)}catch(pe){L.v.useDeprecatedSynchronousErrorHandling?(0,$.O)(pe):(0,de.h)(pe)}}}function Pe(se){throw se}function qe(se,be){const{onStoppedNotification:Ae}=L.v;Ae&&G.z.setTimeout(()=>Ae(se,be))}const X={closed:!0,next:oe.Z,error:Pe,complete:oe.Z}},727:(it,Se,F)=>{"use strict";F.d(Se,{Lc:()=>ye,w0:()=>oe,Nn:()=>ie});var y=F(576);const L=(0,F(3888).d)(ce=>function($){ce(this),this.message=$?`${$.length} errors occurred during unsubscription:\n${$.map((te,He)=>`${He+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=$});var de=F(8737);class oe{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:$}=this;if($)if(this._parentage=null,Array.isArray($))for(const Re of $)Re.remove(this);else $.remove(this);const{initialTeardown:te}=this;if((0,y.m)(te))try{te()}catch(Re){G=Re instanceof L?Re.errors:[Re]}const{_teardowns:He}=this;if(He){this._teardowns=null;for(const Re of He)try{ve(Re)}catch(Pe){G=null!=G?G:[],Pe instanceof L?G=[...G,...Pe.errors]:G.push(Pe)}}if(G)throw new L(G)}}add(G){var $;if(G&&G!==this)if(this.closed)ve(G);else{if(G instanceof oe){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==($=this._teardowns)&&void 0!==$?$:[]).push(G)}}_hasParent(G){const{_parentage:$}=this;return $===G||Array.isArray($)&&$.includes(G)}_addParent(G){const{_parentage:$}=this;this._parentage=Array.isArray($)?($.push(G),$):$?[$,G]:G}_removeParent(G){const{_parentage:$}=this;$===G?this._parentage=null:Array.isArray($)&&(0,de.P)($,G)}remove(G){const{_teardowns:$}=this;$&&(0,de.P)($,G),G instanceof oe&&G._removeParent(this)}}oe.EMPTY=(()=>{const ce=new oe;return ce.closed=!0,ce})();const ye=oe.EMPTY;function ie(ce){return ce instanceof oe||ce&&"closed"in ce&&(0,y.m)(ce.remove)&&(0,y.m)(ce.add)&&(0,y.m)(ce.unsubscribe)}function ve(ce){(0,y.m)(ce)?ce():ce.unsubscribe()}},2416:(it,Se,F)=>{"use strict";F.d(Se,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Se,F)=>{"use strict";F.d(Se,{E:()=>ee});const ee=new(F(8306).y)(oe=>oe.complete())},8996:(it,Se,F)=>{"use strict";F.d(Se,{D:()=>Fe});var y=F(8421),ee=F(5363),L=F(9468),ye=F(8306),ve=F(2202),ce=F(576),G=F(9672);function te(Me,Ye){if(!Me)throw new Error("Iterable cannot be null");return new ye.y(We=>{(0,G.f)(We,Ye,()=>{const le=Me[Symbol.asyncIterator]();(0,G.f)(We,Ye,()=>{le.next().then(J=>{J.done?We.complete():We.next(J.value)})},0,!0)})})}var He=F(3670),Re=F(8239),Pe=F(1144),qe=F(6495),X=F(2206),se=F(4532),be=F(3260);function Fe(Me,Ye){return Ye?function pe(Me,Ye){if(null!=Me){if((0,He.c)(Me))return function de(Me,Ye){return(0,y.Xf)(Me).pipe((0,L.R)(Ye),(0,ee.Q)(Ye))}(Me,Ye);if((0,Pe.z)(Me))return function ie(Me,Ye){return new ye.y(We=>{let le=0;return Ye.schedule(function(){le===Me.length?We.complete():(We.next(Me[le++]),We.closed||this.schedule())})})}(Me,Ye);if((0,Re.t)(Me))return function oe(Me,Ye){return(0,y.Xf)(Me).pipe((0,L.R)(Ye),(0,ee.Q)(Ye))}(Me,Ye);if((0,X.D)(Me))return te(Me,Ye);if((0,qe.T)(Me))return function $(Me,Ye){return new ye.y(We=>{let le;return(0,G.f)(We,Ye,()=>{le=Me[ve.h](),(0,G.f)(We,Ye,()=>{let J,ae;try{({value:J,done:ae}=le.next())}catch(Ee){return void We.error(Ee)}ae?We.complete():We.next(J)},0,!0)}),()=>(0,ce.m)(null==le?void 0:le.return)&&le.return()})}(Me,Ye);if((0,be.L)(Me))return function Ae(Me,Ye){return te((0,be.Q)(Me),Ye)}(Me,Ye)}throw(0,se.z)(Me)}(Me,Ye):(0,y.Xf)(Me)}},8421:(it,Se,F)=>{"use strict";F.d(Se,{Xf:()=>He});var y=F(655),ee=F(1144),L=F(8239),de=F(8306),oe=F(3670),ye=F(2206),ie=F(4532),ve=F(6495),ce=F(3260),G=F(576),$=F(7849),te=F(8822);function He(pe){if(pe instanceof de.y)return pe;if(null!=pe){if((0,oe.c)(pe))return function Re(pe){return new de.y(Fe=>{const Me=pe[te.L]();if((0,G.m)(Me.subscribe))return Me.subscribe(Fe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(pe);if((0,ee.z)(pe))return function Pe(pe){return new de.y(Fe=>{for(let Me=0;Me<pe.length&&!Fe.closed;Me++)Fe.next(pe[Me]);Fe.complete()})}(pe);if((0,L.t)(pe))return function qe(pe){return new de.y(Fe=>{pe.then(Me=>{Fe.closed||(Fe.next(Me),Fe.complete())},Me=>Fe.error(Me)).then(null,$.h)})}(pe);if((0,ye.D)(pe))return se(pe);if((0,ve.T)(pe))return function X(pe){return new de.y(Fe=>{for(const Me of pe)if(Fe.next(Me),Fe.closed)return;Fe.complete()})}(pe);if((0,ce.L)(pe))return function be(pe){return se((0,ce.Q)(pe))}(pe)}throw(0,ie.z)(pe)}function se(pe){return new de.y(Fe=>{(function Ae(pe,Fe){var Me,Ye,We,le;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Me=(0,y.KL)(pe);!(Ye=yield Me.next()).done;)if(Fe.next(Ye.value),Fe.closed)return}catch(J){We={error:J}}finally{try{Ye&&!Ye.done&&(le=Me.return)&&(yield le.call(Me))}finally{if(We)throw We.error}}Fe.complete()})})(pe,Fe).catch(Me=>Fe.error(Me))})}},6451:(it,Se,F)=>{"use strict";F.d(Se,{T:()=>ye});var y=F(8189),ee=F(8421),L=F(515),de=F(7669),oe=F(8996);function ye(...ie){const ve=(0,de.yG)(ie),ce=(0,de._6)(ie,1/0),G=ie;return G.length?1===G.length?(0,ee.Xf)(G[0]):(0,y.J)(ce)((0,oe.D)(G,ve)):L.E}},5403:(it,Se,F)=>{"use strict";F.d(Se,{Q:()=>ee});var y=F(930);class ee extends y.Lv{constructor(de,oe,ye,ie,ve){super(de),this.onFinalize=ve,this._next=oe?function(ce){try{oe(ce)}catch(G){de.error(G)}}:super._next,this._error=ie?function(ce){try{ie(ce)}catch(G){de.error(G)}finally{this.unsubscribe()}}:super._error,this._complete=ye?function(){try{ye()}catch(ce){de.error(ce)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var de;const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(de=this.onFinalize)||void 0===de||de.call(this))}}},4004:(it,Se,F)=>{"use strict";F.d(Se,{U:()=>L});var y=F(4482),ee=F(5403);function L(de,oe){return(0,y.e)((ye,ie)=>{let ve=0;ye.subscribe(new ee.Q(ie,ce=>{ie.next(de.call(oe,ce,ve++))}))})}},8189:(it,Se,F)=>{"use strict";F.d(Se,{J:()=>L});var y=F(5577),ee=F(4671);function L(de=1/0){return(0,y.z)(ee.y,de)}},5577:(it,Se,F)=>{"use strict";F.d(Se,{z:()=>ve});var y=F(4004),ee=F(8421),L=F(4482),de=F(9672),oe=F(5403),ie=F(576);function ve(ce,G,$=1/0){return(0,ie.m)(G)?ve((te,He)=>(0,y.U)((Re,Pe)=>G(te,Re,He,Pe))((0,ee.Xf)(ce(te,He))),$):("number"==typeof G&&($=G),(0,L.e)((te,He)=>function ye(ce,G,$,te,He,Re,Pe,qe){const X=[];let se=0,be=0,Ae=!1;const pe=()=>{Ae&&!X.length&&!se&&G.complete()},Fe=Ye=>se<te?Me(Ye):X.push(Ye),Me=Ye=>{Re&&G.next(Ye),se++;let We=!1;(0,ee.Xf)($(Ye,be++)).subscribe(new oe.Q(G,le=>{null==He||He(le),Re?Fe(le):G.next(le)},()=>{We=!0},void 0,()=>{if(We)try{for(se--;X.length&&se<te;){const le=X.shift();Pe?(0,de.f)(G,Pe,()=>Me(le)):Me(le)}pe()}catch(le){G.error(le)}}))};return ce.subscribe(new oe.Q(G,Fe,()=>{Ae=!0,pe()})),()=>{null==qe||qe()}}(te,He,ce,$)))}},5363:(it,Se,F)=>{"use strict";F.d(Se,{Q:()=>de});var y=F(9672),ee=F(4482),L=F(5403);function de(oe,ye=0){return(0,ee.e)((ie,ve)=>{ie.subscribe(new L.Q(ve,ce=>(0,y.f)(ve,oe,()=>ve.next(ce),ye),()=>(0,y.f)(ve,oe,()=>ve.complete(),ye),ce=>(0,y.f)(ve,oe,()=>ve.error(ce),ye)))})}},3099:(it,Se,F)=>{"use strict";F.d(Se,{B:()=>ye});var y=F(8996),ee=F(5698),L=F(7579),de=F(930),oe=F(4482);function ye(ve={}){const{connector:ce=(()=>new L.x),resetOnError:G=!0,resetOnComplete:$=!0,resetOnRefCountZero:te=!0}=ve;return He=>{let Re=null,Pe=null,qe=null,X=0,se=!1,be=!1;const Ae=()=>{null==Pe||Pe.unsubscribe(),Pe=null},pe=()=>{Ae(),Re=qe=null,se=be=!1},Fe=()=>{const Me=Re;pe(),null==Me||Me.unsubscribe()};return(0,oe.e)((Me,Ye)=>{X++,!be&&!se&&Ae();const We=qe=null!=qe?qe:ce();Ye.add(()=>{X--,0===X&&!be&&!se&&(Pe=ie(Fe,te))}),We.subscribe(Ye),Re||(Re=new de.Hp({next:le=>We.next(le),error:le=>{be=!0,Ae(),Pe=ie(pe,G,le),We.error(le)},complete:()=>{se=!0,Ae(),Pe=ie(pe,$),We.complete()}}),(0,y.D)(Me).subscribe(Re))})(He)}}function ie(ve,ce,...G){return!0===ce?(ve(),null):!1===ce?null:ce(...G).pipe((0,ee.q)(1)).subscribe(()=>ve())}},9468:(it,Se,F)=>{"use strict";F.d(Se,{R:()=>ee});var y=F(4482);function ee(L,de=0){return(0,y.e)((oe,ye)=>{ye.add(L.schedule(()=>oe.subscribe(ye),de))})}},5698:(it,Se,F)=>{"use strict";F.d(Se,{q:()=>de});var y=F(515),ee=F(4482),L=F(5403);function de(oe){return oe<=0?()=>y.E:(0,ee.e)((ye,ie)=>{let ve=0;ye.subscribe(new L.Q(ie,ce=>{++ve<=oe&&(ie.next(ce),oe<=ve&&ie.complete())}))})}},8505:(it,Se,F)=>{"use strict";F.d(Se,{b:()=>oe});var y=F(576),ee=F(4482),L=F(5403),de=F(4671);function oe(ye,ie,ve){const ce=(0,y.m)(ye)||ie||ve?{next:ye,error:ie,complete:ve}:ye;return ce?(0,ee.e)((G,$)=>{var te;null===(te=ce.subscribe)||void 0===te||te.call(ce);let He=!0;G.subscribe(new L.Q($,Re=>{var Pe;null===(Pe=ce.next)||void 0===Pe||Pe.call(ce,Re),$.next(Re)},()=>{var Re;He=!1,null===(Re=ce.complete)||void 0===Re||Re.call(ce),$.complete()},Re=>{var Pe;He=!1,null===(Pe=ce.error)||void 0===Pe||Pe.call(ce,Re),$.error(Re)},()=>{var Re,Pe;He&&(null===(Re=ce.unsubscribe)||void 0===Re||Re.call(ce)),null===(Pe=ce.finalize)||void 0===Pe||Pe.call(ce)}))}):de.y}},4408:(it,Se,F)=>{"use strict";F.d(Se,{o:()=>oe});var y=F(727);class ee extends y.w0{constructor(ie,ve){super()}schedule(ie,ve=0){return this}}const L={setInterval(...ye){const{delegate:ie}=L;return((null==ie?void 0:ie.setInterval)||setInterval)(...ye)},clearInterval(ye){const{delegate:ie}=L;return((null==ie?void 0:ie.clearInterval)||clearInterval)(ye)},delegate:void 0};var de=F(8737);class oe extends ee{constructor(ie,ve){super(ie,ve),this.scheduler=ie,this.work=ve,this.pending=!1}schedule(ie,ve=0){if(this.closed)return this;this.state=ie;const ce=this.id,G=this.scheduler;return null!=ce&&(this.id=this.recycleAsyncId(G,ce,ve)),this.pending=!0,this.delay=ve,this.id=this.id||this.requestAsyncId(G,this.id,ve),this}requestAsyncId(ie,ve,ce=0){return L.setInterval(ie.flush.bind(ie,this),ce)}recycleAsyncId(ie,ve,ce=0){if(null!=ce&&this.delay===ce&&!1===this.pending)return ve;L.clearInterval(ve)}execute(ie,ve){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ce=this._execute(ie,ve);if(ce)return ce;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ie,ve){let G,ce=!1;try{this.work(ie)}catch($){ce=!0,G=$||new Error("Scheduled action threw falsy error")}if(ce)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ie,scheduler:ve}=this,{actions:ce}=ve;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(ce,this),null!=ie&&(this.id=this.recycleAsyncId(ve,ie,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Se,F)=>{"use strict";F.d(Se,{v:()=>L});var y=F(6063);class ee{constructor(oe,ye=ee.now){this.schedulerActionCtor=oe,this.now=ye}schedule(oe,ye=0,ie){return new this.schedulerActionCtor(this,oe).schedule(ie,ye)}}ee.now=y.l.now;class L extends ee{constructor(oe,ye=ee.now){super(oe,ye),this.actions=[],this._active=!1,this._scheduled=void 0}flush(oe){const{actions:ye}=this;if(this._active)return void ye.push(oe);let ie;this._active=!0;do{if(ie=oe.execute(oe.state,oe.delay))break}while(oe=ye.shift());if(this._active=!1,ie){for(;oe=ye.shift();)oe.unsubscribe();throw ie}}}},4986:(it,Se,F)=>{"use strict";F.d(Se,{z:()=>L});var y=F(4408);const L=new(F(7565).v)(y.o)},6063:(it,Se,F)=>{"use strict";F.d(Se,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(it,Se,F)=>{"use strict";F.d(Se,{z:()=>y});const y={setTimeout(...ee){const{delegate:L}=y;return((null==L?void 0:L.setTimeout)||setTimeout)(...ee)},clearTimeout(ee){const{delegate:L}=y;return((null==L?void 0:L.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(it,Se,F)=>{"use strict";F.d(Se,{h:()=>ee});const ee=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Se,F)=>{"use strict";F.d(Se,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Se,F)=>{"use strict";F.d(Se,{_6:()=>ye,jO:()=>de,yG:()=>oe});var y=F(576);function L(ie){return ie[ie.length-1]}function de(ie){return(0,y.m)(L(ie))?ie.pop():void 0}function oe(ie){return function ee(ie){return ie&&(0,y.m)(ie.schedule)}(L(ie))?ie.pop():void 0}function ye(ie,ve){return"number"==typeof L(ie)?ie.pop():ve}},8737:(it,Se,F)=>{"use strict";function y(ee,L){if(ee){const de=ee.indexOf(L);0<=de&&ee.splice(de,1)}}F.d(Se,{P:()=>y})},3888:(it,Se,F)=>{"use strict";function y(ee){const de=ee(oe=>{Error.call(oe),oe.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}F.d(Se,{d:()=>y})},2806:(it,Se,F)=>{"use strict";F.d(Se,{x:()=>L,O:()=>de});var y=F(2416);let ee=null;function L(oe){if(y.v.useDeprecatedSynchronousErrorHandling){const ye=!ee;if(ye&&(ee={errorThrown:!1,error:null}),oe(),ye){const{errorThrown:ie,error:ve}=ee;if(ee=null,ie)throw ve}}else oe()}function de(oe){y.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=oe)}},9672:(it,Se,F)=>{"use strict";function y(ee,L,de,oe=0,ye=!1){const ie=L.schedule(function(){de(),ye?ee.add(this.schedule(null,oe)):this.unsubscribe()},oe);if(ee.add(ie),!ye)return ie}F.d(Se,{f:()=>y})},4671:(it,Se,F)=>{"use strict";function y(ee){return ee}F.d(Se,{y:()=>y})},1144:(it,Se,F)=>{"use strict";F.d(Se,{z:()=>y});const y=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(it,Se,F)=>{"use strict";F.d(Se,{D:()=>ee});var y=F(576);function ee(L){return Symbol.asyncIterator&&(0,y.m)(null==L?void 0:L[Symbol.asyncIterator])}},576:(it,Se,F)=>{"use strict";function y(ee){return"function"==typeof ee}F.d(Se,{m:()=>y})},3670:(it,Se,F)=>{"use strict";F.d(Se,{c:()=>L});var y=F(8822),ee=F(576);function L(de){return(0,ee.m)(de[y.L])}},6495:(it,Se,F)=>{"use strict";F.d(Se,{T:()=>L});var y=F(2202),ee=F(576);function L(de){return(0,ee.m)(null==de?void 0:de[y.h])}},8239:(it,Se,F)=>{"use strict";F.d(Se,{t:()=>ee});var y=F(576);function ee(L){return(0,y.m)(null==L?void 0:L.then)}},3260:(it,Se,F)=>{"use strict";F.d(Se,{Q:()=>L,L:()=>de});var y=F(655),ee=F(576);function L(oe){return(0,y.FC)(this,arguments,function*(){const ie=oe.getReader();try{for(;;){const{value:ve,done:ce}=yield(0,y.qq)(ie.read());if(ce)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(ve)}}finally{ie.releaseLock()}})}function de(oe){return(0,ee.m)(null==oe?void 0:oe.getReader)}},4482:(it,Se,F)=>{"use strict";F.d(Se,{e:()=>L});var y=F(576);function L(de){return oe=>{if(function ee(de){return(0,y.m)(null==de?void 0:de.lift)}(oe))return oe.lift(function(ye){try{return de(ye,this)}catch(ie){this.error(ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(it,Se,F)=>{"use strict";function y(){}F.d(Se,{Z:()=>y})},7849:(it,Se,F)=>{"use strict";F.d(Se,{h:()=>L});var y=F(2416),ee=F(3410);function L(de){ee.z.setTimeout(()=>{const{onUnhandledError:oe}=y.v;if(!oe)throw de;oe(de)})}},4532:(it,Se,F)=>{"use strict";function y(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}F.d(Se,{z:()=>y})},655:(it,Se,F)=>{"use strict";function de(J,ae){var Ee={};for(var ue in J)Object.prototype.hasOwnProperty.call(J,ue)&&ae.indexOf(ue)<0&&(Ee[ue]=J[ue]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var Oe=0;for(ue=Object.getOwnPropertySymbols(J);Oe<ue.length;Oe++)ae.indexOf(ue[Oe])<0&&Object.prototype.propertyIsEnumerable.call(J,ue[Oe])&&(Ee[ue[Oe]]=J[ue[Oe]])}return Ee}function ve(J,ae,Ee,ue){return new(Ee||(Ee=Promise))(function(fe,wt){function Gt(ut){try{ot(ue.next(ut))}catch(Wn){wt(Wn)}}function xn(ut){try{ot(ue.throw(ut))}catch(Wn){wt(Wn)}}function ot(ut){ut.done?fe(ut.value):function Oe(fe){return fe instanceof Ee?fe:new Ee(function(wt){wt(fe)})}(ut.value).then(Gt,xn)}ot((ue=ue.apply(J,ae||[])).next())})}function X(J){return this instanceof X?(this.v=J,this):new X(J)}function se(J,ae,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Oe,ue=Ee.apply(J,ae||[]),fe=[];return Oe={},wt("next"),wt("throw"),wt("return"),Oe[Symbol.asyncIterator]=function(){return this},Oe;function wt(rn){ue[rn]&&(Oe[rn]=function(cr){return new Promise(function(Zt,Vi){fe.push([rn,cr,Zt,Vi])>1||Gt(rn,cr)})})}function Gt(rn,cr){try{!function xn(rn){rn.value instanceof X?Promise.resolve(rn.value.v).then(ot,ut):Wn(fe[0][2],rn)}(ue[rn](cr))}catch(Zt){Wn(fe[0][3],Zt)}}function ot(rn){Gt("next",rn)}function ut(rn){Gt("throw",rn)}function Wn(rn,cr){rn(cr),fe.shift(),fe.length&&Gt(fe[0][0],fe[0][1])}}function Ae(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,ae=J[Symbol.asyncIterator];return ae?ae.call(J):(J=function te(J){var ae="function"==typeof Symbol&&Symbol.iterator,Ee=ae&&J[ae],ue=0;if(Ee)return Ee.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&ue>=J.length&&(J=void 0),{value:J&&J[ue++],done:!J}}};throw new TypeError(ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),Ee={},ue("next"),ue("throw"),ue("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function ue(fe){Ee[fe]=J[fe]&&function(wt){return new Promise(function(Gt,xn){!function Oe(fe,wt,Gt,xn){Promise.resolve(xn).then(function(ot){fe({value:ot,done:Gt})},wt)}(Gt,xn,(wt=J[fe](wt)).done,wt.value)})}}}F.d(Se,{_T:()=>de,mG:()=>ve,qq:()=>X,FC:()=>se,KL:()=>Ae})},5e3:(it,Se,F)=>{"use strict";F.d(Se,{AFp:()=>$D,ip1:()=>Xw,CZH:()=>Nf,hGG:()=>DS,sBO:()=>hI,_Vd:()=>nm,EJc:()=>WD,SBq:()=>rm,qLn:()=>Jn,OlP:()=>En,zs3:()=>ks,ZZ4:()=>cm,aQg:()=>La,soG:()=>vv,h0i:()=>Af,R0b:()=>Os,FiY:()=>fi,Lbi:()=>GD,g9A:()=>qD,Qsj:()=>PN,FYo:()=>iD,JOm:()=>he,q3G:()=>On,tp0:()=>pi,Rgc:()=>am,dDg:()=>iI,q4F:()=>oD,GfV:()=>sD,s_b:()=>cv,ifc:()=>xt,eFA:()=>bv,G48:()=>sS,f3M:()=>Vt,X6Q:()=>Zk,_c5:()=>ES,VLi:()=>eS,zSh:()=>hy,wAp:()=>yt,vHH:()=>Pe,EiD:()=>uc,mCW:()=>Ho,qzn:()=>su,JVY:()=>Op,pB0:()=>Fp,eBb:()=>Lt,L6k:()=>_n,LAX:()=>Nr,cg1:()=>nv,kL8:()=>hw,yhl:()=>gl,dqk:()=>Ht,sIi:()=>xi,QGY:()=>Xd,F4k:()=>Py,RDi:()=>Vu,AaK:()=>ve,z3N:()=>Mi,qOj:()=>Iy,TTD:()=>pa,xp6:()=>YE,uIk:()=>w0,ekj:()=>nh,Suo:()=>bD,Xpm:()=>hn,lG2:()=>Ul,Yz7:()=>Zt,cJS:()=>Yt,oAB:()=>Ar,Yjl:()=>Ga,Y36:()=>yf,_UZ:()=>U0,qZA:()=>ky,TgZ:()=>Ny,LFG:()=>Ve,$8M:()=>Si,CRH:()=>TD,ALo:()=>gD,lcZ:()=>lv,Hsn:()=>Jd,F$t:()=>H0,Q6J:()=>Ps,s9C:()=>Ng,iGM:()=>ID,YNc:()=>A0,_uU:()=>TC,Oqu:()=>Qy,hij:()=>Xy});var y=F(7579),ee=F(727),L=F(8306),de=F(6451),oe=F(3099);function ye(s){for(let o in s)if(s[o]===ye)return o;throw Error("Could not find renamed property on target object.")}function ie(s,o){for(const l in o)o.hasOwnProperty(l)&&!s.hasOwnProperty(l)&&(s[l]=o[l])}function ve(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ve).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const l=o.indexOf("\n");return-1===l?o:o.substring(0,l)}function ce(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ye({__forward_ref__:ye});function $(s){return s.__forward_ref__=$,s.toString=function(){return ve(this())},s}function te(s){return function He(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===$}(s)?s():s}class Pe extends Error{constructor(o,l){super(function qe(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,l)),this.code=o}}function X(s){return"string"==typeof s?s:null==s?"":String(s)}function se(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():X(s)}function Fe(s,o){const l=o?` in ${o}`:"";throw new Pe(-201,`No provider for ${se(s)} found${l}`)}function ot(s,o){null==s&&function ut(s,o,l,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${l} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Zt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Yt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Ut(s){return ji(s,Hi)||ji(s,jr)}function ji(s,o){return s.hasOwnProperty(o)?s[o]:null}function Sr(s){return s&&(s.hasOwnProperty(zs)||s.hasOwnProperty($i))?s[zs]:null}const Hi=ye({\u0275prov:ye}),zs=ye({\u0275inj:ye}),jr=ye({ngInjectableDef:ye}),$i=ye({ngInjectorDef:ye});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let Hr;function Nn(s){const o=Hr;return Hr=s,o}function Ks(s,o,l){const c=Ut(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:l&_t.Optional?null:void 0!==o?o:void Fe(ve(s),"Injector")}function et(s){return{toString:s}.toString()}var Rt=(()=>((Rt=Rt||{})[Rt.OnPush=0]="OnPush",Rt[Rt.Default=1]="Default",Rt))(),xt=(()=>{return(s=xt||(xt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",xt;var s})();const tt="undefined"!=typeof globalThis&&globalThis,ct="undefined"!=typeof window&&window,Ti="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ht=tt||"undefined"!=typeof global&&global||ct||Ti,oi={},H=[],W=ye({\u0275cmp:ye}),z=ye({\u0275dir:ye}),Ce=ye({\u0275pipe:ye}),re=ye({\u0275mod:ye}),ze=ye({\u0275fac:ye}),mt=ye({__NG_ELEMENT_ID__:ye});let sn=0;function hn(s){return et(()=>{const l={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Rt.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||H,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||xt.Emulated,id:"c",styles:s.styles||H,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return c.id+=sn++,c.inputs=qa(s.inputs,l),c.outputs=qa(s.outputs),p&&p.forEach(I=>I(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(qr):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(Nt):null,c})}function qr(s){return Zn(s)||function Mr(s){return s[z]||null}(s)}function Nt(s){return function us(s){return s[Ce]||null}(s)}const Kn={};function Ar(s){return et(()=>{const o={type:s.type,bootstrap:s.bootstrap||H,declarations:s.declarations||H,imports:s.imports||H,exports:s.exports||H,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Kn[s.id]=s.type),o})}function qa(s,o){if(null==s)return oi;const l={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),l[d]=c,o&&(o[d]=p)}return l}const Ul=hn;function Ga(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Zn(s){return s[W]||null}function Yn(s,o){const l=s[re]||null;if(!l&&!0===o)throw new Error(`Type ${ve(s)} does not have '\u0275mod' property.`);return l}function Ci(s){return Array.isArray(s)&&"object"==typeof s[1]}function ai(s){return Array.isArray(s)&&!0===s[1]}function Gc(s){return 0!=(8&s.flags)}function Bl(s){return 2==(2&s.flags)}function Qs(s){return 1==(1&s.flags)}function li(s){return null!==s.template}function Dh(s){return 0!=(512&s[2])}function ui(s,o){return s.hasOwnProperty(ze)?s[ze]:null}class So{constructor(o,l,c){this.previousValue=o,this.currentValue=l,this.firstChange=c}isFirstChange(){return this.firstChange}}function pa(){return ga}function ga(s){return s.type.prototype.ngOnChanges&&(s.setInput=bp),Yc}function Yc(){const s=Qc(this),o=null==s?void 0:s.current;if(o){const l=s.previous;if(l===oi)s.previous=o;else for(let c in o)l[c]=o[c];s.current=null,this.ngOnChanges(o)}}function bp(s,o,l,c){const d=Qc(s)||function ps(s,o){return s[Ao]=o}(s,{previous:oi,current:null}),p=d.current||(d.current={}),v=d.previous,I=this.declaredInputs[l],b=v[I];p[I]=new So(b&&b.currentValue,o,v===oi),s[c]=o}pa.ngInherit=!0;const Ao="__ngSimpleChanges__";function Qc(s){return s[Ao]||null}let Bu;function Vu(s){Bu=s}function cn(s){return!!s.listen}const Za={createRenderer:(s,o)=>function gs(){return void 0!==Bu?Bu:"undefined"!=typeof document?document:void 0}()};function en(s){for(;Array.isArray(s);)s=s[0];return s}function Mo(s,o){return en(o[s])}function ir(s,o){return en(o[s.index])}function An(s,o){return s.data[o]}function sr(s,o){const l=o[s];return Ci(l)?l:l[0]}function ma(s){return 4==(4&s[2])}function qi(s){return 128==(128&s[2])}function Kr(s,o){return null==o?null:s[o]}function eo(s){s[18]=0}function to(s,o){s[5]+=o;let l=s,c=s[3];for(;null!==c&&(1===o&&1===l[5]||-1===o&&0===l[5]);)c[5]+=o,l=c,c=c[3]}const dt={lFrame:No(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $u(){return dt.bindingsEnabled}function De(){return dt.lFrame.lView}function Ot(){return dt.lFrame.tView}function Tn(){let s=no();for(;null!==s&&64===s.type;)s=s.parent;return s}function no(){return dt.lFrame.currentTNode}function xr(s,o){const l=dt.lFrame;l.currentTNode=s,l.isParent=o}function qu(){return dt.lFrame.isParent}function Gu(){dt.lFrame.isParent=!1}function nl(){return dt.isInCheckNoChangesMode}function _a(s){dt.isInCheckNoChangesMode=s}function Gi(){return dt.lFrame.bindingIndex++}function il(s,o){const l=dt.lFrame;l.bindingIndex=l.bindingRootIndex=s,Ro(o)}function Ro(s){dt.lFrame.currentDirectiveIndex=s}function sl(){return dt.lFrame.currentQueryIndex}function zu(s){dt.lFrame.currentQueryIndex=s}function Tp(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Wl(s,o,l){if(l&_t.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||l&_t.Host||(d=Tp(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=dt.lFrame=Ku();return c.currentTNode=o,c.lView=s,!0}function xo(s){const o=Ku(),l=s[1];dt.lFrame=o,o.currentTNode=l.firstChild,o.lView=s,o.tView=l,o.contextLView=s,o.bindingIndex=l.bindingStartIndex,o.inI18n=!1}function Ku(){const s=dt.lFrame,o=null===s?null:s.child;return null===o?No(s):o}function No(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function od(){const s=dt.lFrame;return dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Mh=od;function ya(){const s=od();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function or(){return dt.lFrame.selectedIndex}function ys(s){dt.lFrame.selectedIndex=s}function Mn(){const s=dt.lFrame;return An(s.tView,s.selectedIndex)}function vs(s,o){for(let l=o.directiveStart,c=o.directiveEnd;l<c;l++){const p=s.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:M,ngOnDestroy:x}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-l,v),I&&((s.contentHooks||(s.contentHooks=[])).push(l,I),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(l,I)),b&&(s.viewHooks||(s.viewHooks=[])).push(-l,b),M&&((s.viewHooks||(s.viewHooks=[])).push(l,M),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(l,M)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(l,x)}}function ol(s,o,l){ar(s,o,3,l)}function Yu(s,o,l,c){(3&s[2])===l&&ar(s,o,l,c)}function zl(s,o){let l=s[2];(3&l)===o&&(l&=2047,l+=1,s[2]=l)}function ar(s,o,l,c){const p=null!=c?c:-1,v=o.length-1;let I=0;for(let b=void 0!==c?65535&s[18]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=c&&I>=c)break}else o[b]<0&&(s[18]+=65536),(I<p||-1==p)&&(Nh(s,l,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Nh(s,o,l,c){const d=l[c]<0,p=l[c+1],I=s[d?-l[c]:l[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(I)}finally{}}}else try{p.call(I)}finally{}}class va{constructor(o,l,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=c}}function Un(s,o,l){const c=cn(s);let d=0;for(;d<l.length;){const p=l[d];if("number"==typeof p){if(0!==p)break;d++;const v=l[d++],I=l[d++],b=l[d++];c?s.setAttribute(o,I,b,v):o.setAttributeNS(v,I,b)}else{const v=p,I=l[++d];lr(v)?c&&s.setProperty(o,v,I):c?s.setAttribute(o,v,I):o.setAttribute(v,I),d++}}return d}function Pn(s){return 3===s||4===s||6===s}function lr(s){return 64===s.charCodeAt(0)}function Ea(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let l=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?l=d:0===l||Bt(s,l,d,null,-1===l||2===l?o[++c]:null)}}return s}function Bt(s,o,l,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const I=s[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<s.length;){const I=s[p];if("number"==typeof I)break;if(I===l){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,l),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function Kl(s){return-1!==s}function on(s){return 32767&s}function Rn(s,o){let l=function wr(s){return s>>16}(s),c=o;for(;l>0;)c=c[15],l--;return c}let Ir=!0;function ko(s){const o=Ir;return Ir=s,o}let Ph=0;function io(s,o){const l=At(s,o);if(-1!==l)return l;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Po(c.data,s),Po(o,null),Po(c.blueprint,null));const d=Cn(s,o),p=s.injectorIndex;if(Kl(d)){const v=on(d),I=Rn(d,o),b=I[1].data;for(let M=0;M<8;M++)o[p+M]=I[v+M]|b[v+M]}return o[p+8]=d,p}function Po(s,o){s.push(0,0,0,0,0,0,0,0,o)}function At(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Cn(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let l=0,c=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(c=2===v?p.declTNode:1===v?d[6]:null,null===c)return-1;if(l++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|l<<16}return-1}function Zr(s,o,l){!function Ql(s,o,l){let c;"string"==typeof l?c=l.charCodeAt(0)||0:l.hasOwnProperty(mt)&&(c=l[mt]),null==c&&(c=l[mt]=Ph++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,l)}function br(s,o,l){if(l&_t.Optional)return s;Fe(o,"NodeInjector")}function me(s,o,l,c){if(l&_t.Optional&&void 0===c&&(c=null),0==(l&(_t.Self|_t.Host))){const d=s[9],p=Nn(void 0);try{return d?d.get(o,c,l&_t.Optional):Ks(o,c,l&_t.Optional)}finally{Nn(p)}}return br(c,o,l)}function Bn(s,o,l,c=_t.Default,d){if(null!==s){const p=function ud(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(mt)?s[mt]:void 0;return"number"==typeof o?o>=0?255&o:Tr:o}(l);if("function"==typeof p){if(!Wl(o,s,c))return c&_t.Host?br(d,l,c):me(o,l,c,d);try{const v=p(c);if(null!=v||c&_t.Optional)return v;Fe(l)}finally{Mh()}}else if("number"==typeof p){let v=null,I=At(s,o),b=-1,M=c&_t.Host?o[16][6]:null;for((-1===I||c&_t.SkipSelf)&&(b=-1===I?Cn(s,o):o[I+8],-1!==b&&Jl(c,!1)?(v=o[1],I=on(b),o=Rn(b,o)):I=-1);-1!==I;){const x=o[1];if(cd(p,I,x.data)){const U=Xl(I,o,l,v,c,M);if(U!==O)return U}b=o[I+8],-1!==b&&Jl(c,o[1].data[I+8]===M)&&cd(p,I,o)?(v=x,I=on(b),o=Rn(b,o)):I=-1}}}return me(o,l,c,d)}const O={};function Tr(){return new Is(Tn(),De())}function Xl(s,o,l,c,d,p){const v=o[1],I=v.data[s+8],x=Qu(I,v,l,null==c?Bl(I)&&Ir:c!=v&&0!=(3&I.type),d&_t.Host&&p===I);return null!==x?di(o,v,x,I):O}function Qu(s,o,l,c,d){const p=s.providerIndexes,v=o.data,I=1048575&p,b=s.directiveStart,x=p>>20,q=d?I+x:s.directiveEnd;for(let Q=c?I:I+x;Q<q;Q++){const Ie=v[Q];if(Q<b&&l===Ie||Q>=b&&Ie.type===l)return Q}if(d){const Q=v[b];if(Q&&li(Q)&&Q.type===l)return b}return null}function di(s,o,l,c){let d=s[l];const p=o.data;if(function Cp(s){return s instanceof va}(d)){const v=d;v.resolving&&function be(s,o){const l=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Pe(-200,`Circular dependency in DI detected for ${s}${l}`)}(se(p[l]));const I=ko(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?Nn(v.injectImpl):null;Wl(s,c,_t.Default);try{d=s[l]=v.factory(void 0,p,s,c),o.firstCreatePass&&l>=c.directiveStart&&function Zu(s,o,l){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=ga(o);(l.preOrderHooks||(l.preOrderHooks=[])).push(s,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,v)}d&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-s,d),p&&((l.preOrderHooks||(l.preOrderHooks=[])).push(s,p),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(s,p))}(l,p[l],o)}finally{null!==b&&Nn(b),ko(I),v.resolving=!1,Mh()}}return d}function cd(s,o,l){return!!(l[o+(s>>5)]&1<<s)}function Jl(s,o){return!(s&_t.Self||s&_t.Host&&o)}class Is{constructor(o,l){this._tNode=o,this._lView=l}get(o,l,c){return Bn(this._tNode,this._lView,o,c,l)}}function Si(s){return function ul(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const l=s.attrs;if(l){const c=l.length;let d=0;for(;d<c;){const p=l[d];if(Pn(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof l[d];)d++;else{if(p===o)return l[d+1];d+=2}}}return null}(Tn(),s)}const Ts="__parameters__";function Fo(s,o,l){return et(()=>{const c=function Xu(s){return function(...l){if(s){const c=s(...l);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(b,M,x){const U=b.hasOwnProperty(Ts)?b[Ts]:Object.defineProperty(b,Ts,{value:[]})[Ts];for(;U.length<=x;)U.push(null);return(U[x]=U[x]||[]).push(v),b}}return l&&(d.prototype=Object.create(l.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class En{constructor(o,l){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Zt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}toString(){return`InjectionToken ${this._desc}`}}function Cr(s,o){void 0===o&&(o=s);for(let l=0;l<s.length;l++){let c=s[l];Array.isArray(c)?(o===s&&(o=s.slice(0,l)),Cr(c,o)):o!==s&&o.push(c)}return o}function Jr(s,o){s.forEach(l=>Array.isArray(l)?Jr(l,o):o(l))}function dd(s,o,l){o>=s.length?s.push(l):s.splice(o,0,l)}function ba(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Ai(s,o){const l=[];for(let c=0;c<s;c++)l.push(o);return l}function ei(s,o,l){let c=lo(s,o);return c>=0?s[1|c]=l:(c=~c,function ao(s,o,l,c){let d=s.length;if(d==o)s.push(l,c);else if(1===d)s.push(c,s[0]),s[0]=l;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=l,s[o+1]=c}}(s,c,o,l)),c}function Da(s,o){const l=lo(s,o);if(l>=0)return s[1|l]}function lo(s,o){return function ec(s,o,l){let c=0,d=s.length>>l;for(;d!==c;){const p=c+(d-c>>1),v=s[p<<l];if(o===v)return p<<l;v>o?d=p:c=p+1}return~(d<<l)}(s,o,1)}const uo={},Sa="__NG_DI_FLAG__",iu="ngTempTokenPath",T=/\n/gm,N="__source",V=ye({provide:String,useValue:ye});let Y;function ge(s){const o=Y;return Y=s,o}function xe(s,o=_t.Default){if(void 0===Y)throw new Pe(203,"");return null===Y?Ks(s,void 0,o):Y.get(s,o&_t.Optional?null:void 0,o)}function Ve(s,o=_t.Default){return(function zn(){return Hr}()||xe)(te(s),o)}const Vt=Ve;function Qt(s){const o=[];for(let l=0;l<s.length;l++){const c=te(s[l]);if(Array.isArray(c)){if(0===c.length)throw new Pe(900,"");let d,p=_t.Default;for(let v=0;v<c.length;v++){const I=c[v],b=Dr(I);"number"==typeof b?-1===b?d=I.token:p|=b:d=I}o.push(Ve(d,p))}else o.push(Ve(c))}return o}function jn(s,o){return s[Sa]=o,s.prototype[Sa]=o,s}function Dr(s){return s[Sa]}const co=jn(Fo("Inject",s=>({token:s})),-1),fi=jn(Fo("Optional"),8),pi=jn(Fo("SkipSelf"),4);let fd;function pl(s){var o;return(null===(o=function pd(){if(void 0===fd&&(fd=null,Ht.trustedTypes))try{fd=Ht.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch(s){}return fd}())||void 0===o?void 0:o.createHTML(s))||s}class Ma{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class tn extends Ma{getTypeName(){return"HTML"}}class zt extends Ma{getTypeName(){return"Style"}}class Ft extends Ma{getTypeName(){return"Script"}}class ho extends Ma{getTypeName(){return"URL"}}class pn extends Ma{getTypeName(){return"ResourceURL"}}function Mi(s){return s instanceof Ma?s.changingThisBreaksApplicationSecurity:s}function su(s,o){const l=gl(s);if(null!=l&&l!==o){if("ResourceURL"===l&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===o}function gl(s){return s instanceof Ma&&s.getTypeName()||null}function Op(s){return new tn(s)}function _n(s){return new zt(s)}function Lt(s){return new Ft(s)}function Nr(s){return new ho(s)}function Fp(s){return new pn(s)}class Qi{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const l=(new window.DOMParser).parseFromString(pl(o),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(o):(l.removeChild(l.firstChild),l)}catch(l){return null}}}class h_{constructor(o){if(this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const c=this.inertDocument.createElement("body");l.appendChild(c)}}getInertBodyElement(o){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=pl(o),l;const c=this.inertDocument.createElement("body");return c.innerHTML=pl(o),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(o){const l=o.attributes;for(let d=l.length-1;0<d;d--){const v=l.item(d).name;("xmlns:ns1"===v||0===v.indexOf("ns1:"))&&o.removeAttribute(v)}let c=o.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const ml=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,_l=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Ho(s){return(s=String(s)).match(ml)||s.match(_l)?s:"unsafe:"+s}function Xi(s){const o={};for(const l of s.split(","))o[l]=!0;return o}function lc(...s){const o={};for(const l of s)for(const c in l)l.hasOwnProperty(c)&&(o[c]=!0);return o}const Uh=Xi("area,br,col,hr,img,wbr"),vd=Xi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Lp=Xi("rp,rt"),kt=lc(Uh,lc(vd,Xi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lc(Lp,Xi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lc(Lp,vd)),lu=Xi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),uu=Xi("srcset"),yl=lc(lu,uu,Xi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),As=Xi("script,style,template");class g_{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let l=o.firstChild,c=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?c=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,c&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let d=this.checkClobberedElement(l,l.nextSibling);if(d){l=d;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(o){const l=o.nodeName.toLowerCase();if(!kt.hasOwnProperty(l))return this.sanitizedSomething=!0,!As.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const c=o.attributes;for(let d=0;d<c.length;d++){const p=c.item(d),v=p.name,I=v.toLowerCase();if(!yl.hasOwnProperty(I)){this.sanitizedSomething=!0;continue}let b=p.value;lu[I]&&(b=Ho(b)),uu[I]&&(s=b,b=(s=String(s)).split(",").map(o=>Ho(o.trim())).join(", ")),this.buf.push(" ",v,'="',Ed(b),'"')}var s;return this.buf.push(">"),!0}endElement(o){const l=o.nodeName.toLowerCase();kt.hasOwnProperty(l)&&!Uh.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(o){this.buf.push(Ed(o))}checkClobberedElement(o,l){if(l&&(o.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return l}}const kr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Vh=/([^\#-~ |!])/g;function Ed(s){return s.replace(/&/g,"&amp;").replace(kr,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(Vh,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cu;function uc(s,o){let l=null;try{cu=cu||function yd(s){const o=new h_(s);return function LE(){try{return!!(new window.DOMParser).parseFromString(pl(""),"text/html")}catch(s){return!1}}()?new Qi(o):o}(s);let c=o?String(o):"";l=cu.getInertBodyElement(c);let d=5,p=c;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,c=p,p=l.innerHTML,l=cu.getInertBodyElement(c)}while(c!==p);return pl((new g_).sanitizeChildren(wd(l)||l))}finally{if(l){const c=wd(l)||l;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function wd(s){return"content"in s&&function Up(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var On=(()=>((On=On||{})[On.NONE=0]="NONE",On[On.HTML=1]="HTML",On[On.STYLE=2]="STYLE",On[On.SCRIPT=3]="SCRIPT",On[On.URL=4]="URL",On[On.RESOURCE_URL=5]="RESOURCE_URL",On))();const $h="__ngContext__";function Xn(s,o){s[$h]=o}function wn(s){const o=function El(s){return s[$h]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function wl(s){return s.ngOriginalError}function Gp(s,...o){s.error(...o)}class Jn{constructor(){this._console=console}handleError(o){const l=this._findOriginalError(o),c=function hc(s){return s&&s.ngErrorLogger||Gp}(o);c(this._console,"ERROR",o),l&&c(this._console,"ORIGINAL ERROR",l)}_findOriginalError(o){let l=o&&wl(o);for(;l&&wl(l);)l=wl(l);return l||null}}const gc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ht))();function g(s){return s instanceof Function?s():s}var he=(()=>((he=he||{})[he.Important=1]="Important",he[he.DashCase=2]="DashCase",he))();function nt(s,o){return undefined(s,o)}function $t(s){const o=s[3];return ai(o)?o[3]:o}function pu(s){return Tl(s[13])}function Ra(s){return Tl(s[4])}function Tl(s){for(;null!==s&&!ai(s);)s=s[4];return s}function Ri(s,o,l,c,d){if(null!=c){let p,v=!1;ai(c)?p=c:Ci(c)&&(v=!0,c=c[0]);const I=en(c);0===s&&null!==l?null==d?mu(o,l,I):Dl(o,l,I,d||null,!0):1===s&&null!==l?Dl(o,l,I,d||null,!0):2===s?function D_(s,o,l){const c=Sd(s,o);c&&function _u(s,o,l,c){cn(s)?s.removeChild(o,l,c):o.removeChild(l)}(s,c,o,l)}(o,I,v):3===s&&o.destroyNode(I),null!=p&&function nT(s,o,l,c,d){const p=l[7];p!==en(l)&&Ri(o,s,c,p,d);for(let I=10;I<l.length;I++){const b=l[I];tf(b[1],b,s,o,c,p)}}(o,s,p,l,d)}}function xa(s,o,l){if(cn(s))return s.createElement(o,l);{const c=null!==l?function Uu(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(l):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function gu(s,o){const l=s[9],c=l.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,to(d,-1)),l.splice(c,1)}function Xh(s,o){if(s.length<=10)return;const l=10+o,c=s[l];if(c){const d=c[17];null!==d&&d!==s&&gu(d,c),o>0&&(s[l-1][4]=c[4]);const p=ba(s,10+o);!function E_(s,o){tf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function VE(s,o){if(!(256&o[2])){const l=o[11];cn(l)&&l.destroyNode&&tf(s,o,l,3,null,null),function Qh(s){let o=s[13];if(!o)return vn(s[1],s);for(;o;){let l=null;if(Ci(o))l=o[13];else{const c=o[10];c&&(l=c)}if(!l){for(;o&&!o[4]&&o!==s;)Ci(o)&&vn(o[1],o),o=o[3];null===o&&(o=s),Ci(o)&&vn(o[1],o),l=o&&o[4]}o=l}}(o)}}function vn(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function Jh(s,o){let l;if(null!=s&&null!=(l=s.destroyHooks))for(let c=0;c<l.length;c+=2){const d=o[l[c]];if(!(d instanceof va)){const p=l[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],b=p[v+1];try{b.call(I)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function Go(s,o){const l=s.cleanup,c=o[7];let d=-1;if(null!==l)for(let p=0;p<l.length-1;p+=2)if("string"==typeof l[p]){const v=l[p+1],I="function"==typeof v?v(o):en(o[v]),b=c[d=l[p+2]],M=l[p+3];"boolean"==typeof M?I.removeEventListener(l[p],b,M):M>=0?c[d=M]():c[d=-M].unsubscribe(),p+=2}else{const v=c[d=l[p+1]];l[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&cn(o[11])&&o[11].destroy();const l=o[17];if(null!==l&&ai(o[3])){l!==o[3]&&gu(l,o);const c=o[19];null!==c&&c.detachView(s)}}}function Zp(s,o,l){return function w_(s,o,l){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return l[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===xt.None||d===xt.Emulated)return null}return ir(c,l)}(s,o.parent,l)}function Dl(s,o,l,c,d){cn(s)?s.insertBefore(o,l,c,d):o.insertBefore(l,c,d)}function mu(s,o,l){cn(s)?s.appendChild(o,l):o.appendChild(l)}function I_(s,o,l,c,d){null!==c?Dl(s,o,l,c,d):mu(s,o,l)}function Sd(s,o){return cn(s)?s.parentNode(o):o.parentNode}function b_(s,o,l){return jE(s,o,l)}let jE=function ef(s,o,l){return 40&s.type?ir(s,l):null};function Yp(s,o,l,c){const d=Zp(s,c,o),p=o[11],I=b_(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(l))for(let b=0;b<l.length;b++)I_(p,d,l[b],I,!1);else I_(p,d,l,I,!1)}function Qp(s,o){if(null!==o){const l=o.type;if(3&l)return ir(o,s);if(4&l)return C_(-1,s[o.index]);if(8&l){const c=o.child;if(null!==c)return Qp(s,c);{const d=s[o.index];return ai(d)?C_(-1,d):en(d)}}if(32&l)return nt(o,s)()||en(s[o.index]);{const c=$E(s,o);return null!==c?Array.isArray(c)?c[0]:Qp($t(s[16]),c):Qp(s,o.next)}}return null}function $E(s,o){return null!==o?s[16][6].projection[o.projection]:null}function C_(s,o){const l=10+s+1;if(l<o.length){const c=o[l],d=c[1].firstChild;if(null!==d)return Qp(c,d)}return o[7]}function Xp(s,o,l,c,d,p,v){for(;null!=l;){const I=c[l.index],b=l.type;if(v&&0===o&&(I&&Xn(en(I),c),l.flags|=4),64!=(64&l.flags))if(8&b)Xp(s,o,l.child,c,d,p,!1),Ri(o,s,d,I,p);else if(32&b){const M=nt(l,c);let x;for(;x=M();)Ri(o,s,d,x,p);Ri(o,s,d,I,p)}else 16&b?qE(s,o,c,l,d,p):Ri(o,s,d,I,p);l=v?l.projectionNext:l.next}}function tf(s,o,l,c,d,p){Xp(l,c,s.firstChild,o,d,p,!1)}function qE(s,o,l,c,d,p){const v=l[16],b=v[6].projection[c.projection];if(Array.isArray(b))for(let M=0;M<b.length;M++)Ri(o,s,d,b[M],p);else Xp(s,o,b,v[3],d,p,!0)}function GE(s,o,l){cn(s)?s.setAttribute(o,"style",l):o.style.cssText=l}function Md(s,o,l){cn(s)?""===l?s.removeAttribute(o,"class"):s.setAttribute(o,"class",l):o.className=l}function Jp(s,o,l){let c=s.length;for(;;){const d=s.indexOf(o,l);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}l=d+1}}const nf="ng-template";function sT(s,o,l){let c=0;for(;c<s.length;){let d=s[c++];if(l&&"class"===d){if(d=s[c],-1!==Jp(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function eg(s){return 4===s.type&&s.value!==nf}function WE(s,o,l){return o===(4!==s.type||l?s.value:nf)}function zE(s,o,l){let c=4;const d=s.attrs||[],p=function aT(s){for(let o=0;o<s.length;o++)if(Pn(s[o]))return o;return s.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!WE(s,b,l)||""===b&&1===o.length){if(Wo(c))return!1;v=!0}}else{const M=8&c?b:o[++I];if(8&c&&null!==s.attrs){if(!sT(s.attrs,M,l)){if(Wo(c))return!1;v=!0}continue}const U=oT(8&c?"class":b,d,eg(s),l);if(-1===U){if(Wo(c))return!1;v=!0;continue}if(""!==M){let q;q=U>p?"":d[U+1].toLowerCase();const Q=8&c?q:null;if(Q&&-1!==Jp(Q,M,0)||2&c&&M!==q){if(Wo(c))return!1;v=!0}}}}else{if(!v&&!Wo(c)&&!Wo(b))return!1;if(v&&Wo(b))continue;v=!1,c=b|1&c}}return Wo(c)||v}function Wo(s){return 0==(1&s)}function oT(s,o,l,c){if(null===o)return-1;let d=0;if(c||!l){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function lT(s,o){let l=s.indexOf(4);if(l>-1)for(l++;l<s.length;){const c=s[l];if("number"==typeof c)return-1;if(c===o)return l;l++}return-1}(o,s)}function S_(s,o,l=!1){for(let c=0;c<o.length;c++)if(zE(s,o[c],l))return!0;return!1}function uT(s,o){e:for(let l=0;l<o.length;l++){const c=o[l];if(s.length===c.length){for(let d=0;d<s.length;d++)if(s[d]!==c[d])continue e;return!0}}return!1}function KE(s,o){return s?":not("+o.trim()+")":o}function ZE(s){let o=s[0],l=1,c=2,d="",p=!1;for(;l<s.length;){let v=s[l];if("string"==typeof v)if(2&c){const I=s[++l];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Wo(v)&&(o+=KE(p,d),d=""),c=v,p=p||!Wo(c);l++}return""!==d&&(o+=KE(p,d)),o}const Dt={};function YE(s){R_(Ot(),De(),or()+s,nl())}function R_(s,o,l,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&ol(o,p,l)}else{const p=s.preOrderHooks;null!==p&&Yu(o,p,0,l)}ys(l)}function rg(s,o){return s<<17|o<<2}function zo(s){return s>>17&32767}function x_(s){return 2|s}function Sl(s){return(131068&s)>>2}function N_(s,o){return-131069&s|o<<2}function P_(s){return 1|s}function lg(s,o){const l=s.contentQueries;if(null!==l)for(let c=0;c<l.length;c+=2){const d=l[c],p=l[c+1];if(-1!==p){const v=s.data[p];zu(d),v.contentQueries(2,o[p],p)}}}function Rl(s,o,l,c,d,p,v,I,b,M){const x=o.blueprint.slice();return x[0]=d,x[2]=140|c,eo(x),x[3]=x[15]=s,x[8]=l,x[10]=v||s&&s[10],x[11]=I||s&&s[11],x[12]=b||s&&s[12]||null,x[9]=M||s&&s[9]||null,x[6]=p,x[16]=2==o.type?s[16]:x,x}function Nd(s,o,l,c,d){let p=s.data[o];if(null===p)p=function W_(s,o,l,c,d){const p=no(),v=qu(),b=s.data[o]=function vT(s,o,l,c,d,p){return{type:l,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,l,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b)),b}(s,o,l,c,d),function rl(){return dt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=l,p.value=c,p.attrs=d;const v=function tl(){const s=dt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return xr(p,!0),p}function kd(s,o,l,c){if(0===l)return-1;const d=o.length;for(let p=0;p<l;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function vc(s,o,l){xo(o);try{const c=s.viewQuery;null!==c&&ay(1,c,l);const d=s.template;null!==d&&z_(s,o,d,1,l),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&lg(s,o),s.staticViewQueries&&ay(2,s.viewQuery,l);const p=s.components;null!==p&&function _T(s,o){for(let l=0;l<o.length;l++)hf(s,o[l])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ya()}}function vu(s,o,l,c){const d=o[2];if(256==(256&d))return;xo(o);const p=nl();try{eo(o),function Wu(s){return dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==l&&z_(s,o,l,2,c);const v=3==(3&d);if(!p)if(v){const M=s.preOrderCheckHooks;null!==M&&ol(o,M,null)}else{const M=s.preOrderHooks;null!==M&&Yu(o,M,0,null),zl(o,0)}if(function DT(s){for(let o=pu(s);null!==o;o=Ra(o)){if(!o[2])continue;const l=o[9];for(let c=0;c<l.length;c++){const d=l[c],p=d[3];0==(1024&d[2])&&to(p,1),d[2]|=1024}}}(o),function CT(s){for(let o=pu(s);null!==o;o=Ra(o))for(let l=10;l<o.length;l++){const c=o[l],d=c[1];qi(c)&&vu(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&lg(s,o),!p)if(v){const M=s.contentCheckHooks;null!==M&&ol(o,M)}else{const M=s.contentHooks;null!==M&&Yu(o,M,1),zl(o,1)}!function q_(s,o){const l=s.hostBindingOpCodes;if(null!==l)try{for(let c=0;c<l.length;c++){const d=l[c];if(d<0)ys(~d);else{const p=d,v=l[++c],I=l[++c];il(v,p),I(2,o[p])}}}finally{ys(-1)}}(s,o);const I=s.components;null!==I&&function G_(s,o){for(let l=0;l<o.length;l++)ST(s,o[l])}(o,I);const b=s.viewQuery;if(null!==b&&ay(2,b,c),!p)if(v){const M=s.viewCheckHooks;null!==M&&ol(o,M)}else{const M=s.viewHooks;null!==M&&Yu(o,M,2),zl(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,to(o[3],-1))}finally{ya()}}function yT(s,o,l,c){const d=o[10],p=!nl(),v=ma(o);try{p&&!v&&d.begin&&d.begin(),v&&vc(s,o,c),vu(s,o,l,c)}finally{p&&!v&&d.end&&d.end()}}function z_(s,o,l,c,d){const p=or(),v=2&c;try{ys(-1),v&&o.length>20&&R_(s,o,20,nl()),l(c,d)}finally{ys(p)}}function K_(s,o,l){!$u()||(function uf(s,o,l,c){const d=l.directiveStart,p=l.directiveEnd;s.firstCreatePass||io(l,o),Xn(c,o);const v=l.initialInputs;for(let I=d;I<p;I++){const b=s.data[I],M=li(b);M&&TT(o,l,b);const x=di(o,s,I,l);Xn(x,o),null!==v&&go(0,I-d,x,b,0,v),M&&(sr(l.index,o)[8]=x)}}(s,o,l,ir(l,o)),128==(128&l.flags)&&function IT(s,o,l){const c=l.directiveStart,d=l.directiveEnd,v=l.index,I=function sd(){return dt.lFrame.currentDirectiveIndex}();try{ys(v);for(let b=c;b<d;b++){const M=s.data[b],x=o[b];Ro(b),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&ey(M,x)}}finally{ys(-1),Ro(I)}}(s,o,l))}function ug(s,o,l=ir){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],I=-1===v?l(o,s):s[v];s[d++]=I}}}function cg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Pd(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Pd(s,o,l,c,d,p,v,I,b,M){const x=20+c,U=x+d,q=function Z_(s,o){const l=[];for(let c=0;c<o;c++)l.push(c<s?null:Dt);return l}(x,U),Q="function"==typeof M?M():M;return q[1]={type:s,blueprint:q,template:l,queries:null,viewQuery:I,declTNode:o,data:q.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:Q,incompleteFirstPass:!1}}function Y_(s,o,l,c){const d=function u0(s){return s[7]||(s[7]=[])}(o);null===l?d.push(c):(d.push(l),s.firstCreatePass&&function c0(s){return s.cleanup||(s.cleanup=[])}(s).push(c,d.length-1))}function lf(s,o,l){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(l=null===l?{}:l).hasOwnProperty(c)?l[c].push(o,d):l[c]=[o,d]}return l}function ni(s,o,l,c,d,p,v,I){const b=ir(o,l);let x,M=o.inputs;!I&&null!=M&&(x=M[c])?(d0(s,l,x,c,d),Bl(o)&&function Q_(s,o){const l=sr(o,s);16&l[2]||(l[2]|=64)}(l,o.index)):3&o.type&&(c=function ET(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,cn(p)?p.setProperty(b,c,d):lr(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}function J_(s,o,l,c){let d=!1;if($u()){const p=function ty(s,o,l){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];S_(l,v.selectors,!1)&&(d||(d=[]),Zr(io(l,o),s,v.type),li(v)?(Ld(s,l),d.unshift(v)):d.push(v))}return d}(s,o,l),v=null===c?null:{"":-1};if(null!==p){d=!0,xs(l,s.data.length,p.length);for(let x=0;x<p.length;x++){const U=p[x];U.providersResolver&&U.providersResolver(U)}let I=!1,b=!1,M=kd(s,o,p.length,null);for(let x=0;x<p.length;x++){const U=p[x];l.mergedAttrs=Ea(l.mergedAttrs,U.hostAttrs),ny(s,l,o,M,U),bT(M,U,v),null!==U.contentQueries&&(l.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(l.flags|=128);const q=U.type.prototype;!I&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(l.index),I=!0),!b&&(q.ngOnChanges||q.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(l.index),b=!0),M++}!function s0(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let I=null,b=null;for(let M=o.directiveStart;M<c;M++){const x=d[M],U=x.inputs,q=null===p||eg(o)?null:a0(U,p);v.push(q),I=lf(U,M,I),b=lf(x.outputs,M,b)}null!==I&&(I.hasOwnProperty("class")&&(o.flags|=16),I.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=I,o.outputs=b}(s,l)}v&&function cf(s,o,l){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=l[o[d+1]];if(null==p)throw new Pe(-301,`Export of name '${o[d+1]}' not found!`);c.push(o[d],p)}}}(l,c,v)}return l.mergedAttrs=Ea(l.mergedAttrs,l.attrs),d}function Fd(s,o,l,c,d,p){const v=p.hostBindings;if(v){let I=s.hostBindingOpCodes;null===I&&(I=s.hostBindingOpCodes=[]);const b=~o.index;(function ka(s){let o=s.length;for(;o>0;){const l=s[--o];if("number"==typeof l&&l<0)return l}return 0})(I)!=b&&I.push(b),I.push(c,d,v)}}function ey(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Ld(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function bT(s,o,l){if(l){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)l[o.exportAs[c]]=s;li(o)&&(l[""]=s)}}function xs(s,o,l){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+l,s.providerIndexes=o}function ny(s,o,l,c,d){s.data[c]=d;const p=d.factory||(d.factory=ui(d.type)),v=new va(p,li(d),null);s.blueprint[c]=v,l[c]=v,Fd(s,o,0,c,kd(s,l,d.hostVars,Dt),d)}function TT(s,o,l){const c=ir(o,s),d=cg(l),p=s[10],v=ff(s,Rl(s,d,null,l.onPush?64:16,c,o,p,p.createRenderer(c,l),null,null));s[o.index]=v}function Ns(s,o,l,c,d,p){const v=ir(s,o);!function df(s,o,l,c,d,p,v){if(null==p)cn(s)?s.removeAttribute(o,d,l):o.removeAttribute(d);else{const I=null==v?X(p):v(p,c||"",d);cn(s)?s.setAttribute(o,d,I,l):l?o.setAttributeNS(l,d,I):o.setAttribute(d,I)}}(o[11],v,p,s.value,l,c,d)}function go(s,o,l,c,d,p){const v=p[o];if(null!==v){const I=c.setInput;for(let b=0;b<v.length;){const M=v[b++],x=v[b++],U=v[b++];null!==I?c.setInput(l,U,M,x):l[x]=U}}}function a0(s,o){let l=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===l&&(l=[]),l.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return l}function ry(s,o,l,c){return new Array(s,!0,!1,o,null,0,c,l,null,null)}function ST(s,o){const l=sr(o,s);if(qi(l)){const c=l[1];80&l[2]?vu(c,l,c.template,l[8]):l[5]>0&&fg(l)}}function fg(s){for(let c=pu(s);null!==c;c=Ra(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const v=p[1];vu(v,p,v.template,p[8])}else p[5]>0&&fg(p)}const l=s[1].components;if(null!==l)for(let c=0;c<l.length;c++){const d=sr(l[c],s);qi(d)&&d[5]>0&&fg(d)}}function hf(s,o){const l=sr(o,s),c=l[1];(function l0(s,o){for(let l=o.length;l<s.blueprint.length;l++)o.push(s.blueprint[l])})(c,l),vc(c,l,l[8])}function ff(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function oy(s,o,l){const c=o[10];c.begin&&c.begin();try{vu(s,o,s.template,l)}catch(d){throw function ly(s,o){const l=s[9],c=l?l.get(Jn,null):null;c&&c.handleError(o)}(o,d),d}finally{c.end&&c.end()}}function pg(s){!function Ud(s){for(let o=0;o<s.components.length;o++){const l=s.components[o],c=wn(l),d=c[1];yT(d,c,d.template,l)}}(s[8])}function ay(s,o,l){zu(0),o(s,l)}const xT=(()=>Promise.resolve(null))();function d0(s,o,l,c,d){for(let p=0;p<l.length;){const v=l[p++],I=l[p++],b=o[v],M=s.data[v];null!==M.setInput?M.setInput(b,d,c,I):b[I]=d}}function Ji(s,o,l){const c=Mo(o,s);!function Kh(s,o,l){cn(s)?s.setValue(o,l):o.textContent=l}(s[11],c,l)}function Ko(s,o,l){let c=l?s.styles:null,d=l?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=ce(d,I):2==p&&(c=ce(c,I+": "+o[++v]+";"))}l?s.styles=c:s.stylesWithoutHost=c,l?s.classes=d:s.classesWithoutHost=d}const dy=new En("INJECTOR",-1);class Ec{get(o,l=uo){if(l===uo){const c=new Error(`NullInjectorError: No provider for ${ve(o)}!`);throw c.name="NullInjectorError",c}return l}}const hy=new En("Set Injector scope."),Bd={},h0={};let mg;function pf(){return void 0===mg&&(mg=new Ec),mg}function _g(s,o=null,l=null,c){const d=yg(s,o,l,c);return d._resolveInjectorDefTypes(),d}function yg(s,o=null,l=null,c){return new kT(s,l,o||pf(),c)}class kT{constructor(o,l,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];l&&Jr(l,I=>this.processProvider(I,o,l)),Jr([o],I=>this.processInjectorType(I,[],p)),this.records.set(dy,wc(void 0,this));const v=this.records.get(hy);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:ve(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,l=uo,c=_t.Default){this.assertNotDestroyed();const d=ge(this),p=Nn(void 0);try{if(!(c&_t.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function Ic(s){return"function"==typeof s||"object"==typeof s&&s instanceof En}(o)&&Ut(o);I=b&&this.injectableDefInScope(b)?wc(fy(o),Bd):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&_t.Self?pf():this.parent).get(o,l=c&_t.Optional&&l===uo?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[iu]=v[iu]||[]).unshift(ve(o)),d)throw v;return function Hn(s,o,l,c){const d=s[iu];throw o[N]&&d.unshift(o[N]),s.message=function hl(s,o,l,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ve(o);if(Array.isArray(o))d=o.map(ve).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):ve(I)))}d=`{${p.join(", ")}}`}return`${l}${c?"("+c+")":""}[${d}]: ${s.replace(T,"\n  ")}`}("\n"+s.message,d,l,c),s.ngTokenPath=d,s[iu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Nn(p),ge(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ve(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Pe(205,"")}processInjectorType(o,l,c){if(!(o=te(o)))return!1;let d=Sr(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,I=-1!==c.indexOf(v);if(void 0!==p&&(d=Sr(p)),null==d)return!1;if(null!=d.imports&&!I){let x;c.push(v);try{Jr(d.imports,U=>{this.processInjectorType(U,l,c)&&(void 0===x&&(x=[]),x.push(U))})}finally{}if(void 0!==x)for(let U=0;U<x.length;U++){const{ngModule:q,providers:Q}=x[U];Jr(Q,Ie=>this.processProvider(Ie,q,Q||H))}}this.injectorDefTypes.add(v);const b=ui(v)||(()=>new v);this.records.set(v,wc(b,Bd));const M=d.providers;if(null!=M&&!I){const x=o;Jr(M,U=>this.processProvider(U,x,M))}return void 0!==p&&void 0!==o.providers}processProvider(o,l,c){let d=xl(o=te(o))?o:te(o&&o.provide);const p=function PT(s,o,l){return my(s)?wc(void 0,s.useValue):wc(function gy(s,o,l){let c;if(xl(s)){const d=te(s);return ui(d)||fy(d)}if(my(s))c=()=>te(s.useValue);else if(function es(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Qt(s.deps||[]));else if(function f0(s){return!(!s||!s.useExisting)}(s))c=()=>Ve(te(s.useExisting));else{const d=te(s&&(s.useClass||s.provide));if(!function vg(s){return!!s.deps}(s))return ui(d)||fy(d);c=()=>new d(...Qt(s.deps))}return c}(s),Bd)}(o);if(xl(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=wc(void 0,Bd,!0),v.factory=()=>Qt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,l){return l.value===Bd&&(l.value=h0,l.value=l.factory()),"object"==typeof l.value&&l.value&&function mo(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(l.value)&&this.onDestroy.add(l.value),l.value}injectableDefInScope(o){if(!o.providedIn)return!1;const l=te(o.providedIn);return"string"==typeof l?"any"===l||l===this.scope:this.injectorDefTypes.has(l)}}function fy(s){const o=Ut(s),l=null!==o?o.factory:ui(s);if(null!==l)return l;if(s instanceof En)throw new Pe(204,"");if(s instanceof Function)return function py(s){const o=s.length;if(o>0)throw Ai(o,"?"),new Pe(204,"");const l=function dr(s){const o=s&&(s[Hi]||s[jr]);if(o){const l=function Ws(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),o}return null}(s);return null!==l?()=>l.factory(s):()=>new s}(s);throw new Pe(204,"")}function wc(s,o,l=!1){return{factory:s,value:o,multi:l?[]:void 0}}function my(s){return null!==s&&"object"==typeof s&&V in s}function xl(s){return"function"==typeof s}let ks=(()=>{class s{static create(l,c){var d;if(Array.isArray(l))return _g({name:""},c,l,"");{const p=null!==(d=l.name)&&void 0!==d?d:"";return _g({name:p},l.parent,l.providers,p)}}}return s.THROW_IF_NOT_FOUND=uo,s.NULL=new Ec,s.\u0275prov=Zt({token:s,providedIn:"any",factory:()=>Ve(dy)}),s.__NG_ELEMENT_ID__=-1,s})();function HT(s,o){vs(wn(s)[1],Tn())}function Iy(s){let o=function E0(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),l=!0;const c=[s];for(;o;){let d;if(li(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Pe(903,"");d=o.\u0275dir}if(d){if(l){c.push(d);const v=s;v.inputs=by(s.inputs),v.declaredInputs=by(s.declaredInputs),v.outputs=by(s.outputs);const I=d.hostBindings;I&&WT(s,I);const b=d.viewQuery,M=d.contentQueries;if(b&&qT(s,b),M&&GT(s,M),ie(s.inputs,d.inputs),ie(s.declaredInputs,d.declaredInputs),ie(s.outputs,d.outputs),li(d)&&d.data.animation){const x=s.data;x.animation=(x.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const I=p[v];I&&I.ngInherit&&I(s),I===Iy&&(l=!1)}}o=Object.getPrototypeOf(o)}!function $T(s){let o=0,l=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=Ea(d.hostAttrs,l=Ea(l,d.hostAttrs))}}(c)}function by(s){return s===oi?{}:s===H?[]:s}function qT(s,o){const l=s.viewQuery;s.viewQuery=l?(c,d)=>{o(c,d),l(c,d)}:o}function GT(s,o){const l=s.contentQueries;s.contentQueries=l?(c,d,p)=>{o(c,d,p),l(c,d,p)}:o}function WT(s,o){const l=s.hostBindings;s.hostBindings=l?(c,d)=>{o(c,d),l(c,d)}:o}let Ig=null;function Vd(){if(!Ig){const s=Ht.Symbol;if(s&&s.iterator)Ig=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<o.length;++l){const c=o[l];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Ig=c)}}}return Ig}function xi(s){return!!bg(s)&&(Array.isArray(s)||!(s instanceof Map)&&Vd()in s)}function bg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function mi(s,o,l){return!Object.is(s[o],l)&&(s[o]=l,!0)}function w0(s,o,l,c){const d=De();return mi(d,Gi(),o)&&(Ot(),Ns(Mn(),d,s,o,l,c)),w0}function $d(s,o,l,c){return mi(s,Gi(),l)?o+X(l)+c:Dt}function A0(s,o,l,c,d,p,v,I){const b=De(),M=Ot(),x=s+20,U=M.firstCreatePass?function eC(s,o,l,c,d,p,v,I,b){const M=o.consts,x=Nd(o,s,4,v||null,Kr(M,I));J_(o,l,x,Kr(M,b)),vs(o,x);const U=x.tViews=Pd(2,x,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,M);return null!==o.queries&&(o.queries.template(o,x),U.queries=o.queries.embeddedTView(x)),x}(x,M,b,o,l,c,d,p,v):M.data[x];xr(U,!1);const q=b[11].createComment("");Yp(M,b,q,U),Xn(q,b),ff(b,b[x]=ry(q,b,q,U)),Qs(U)&&K_(M,b,U),null!=v&&ug(b,U,I)}function yf(s,o=_t.Default){const l=De();return null===l?Ve(s,o):Bn(Tn(),l,te(s),o)}function Ps(s,o,l){const c=De();return mi(c,Gi(),o)&&ni(Ot(),Mn(),c,s,o,c[11],l,!1),Ps}function Qd(s,o,l,c,d){const v=d?"class":"style";d0(s,l,o.inputs[v],v,c)}function Ny(s,o,l,c){const d=De(),p=Ot(),v=20+s,I=d[11],b=d[v]=xa(I,o,function ad(){return dt.lFrame.currentNamespace}()),M=p.firstCreatePass?function xy(s,o,l,c,d,p,v){const I=o.consts,M=Nd(o,s,2,d,Kr(I,p));return J_(o,l,M,Kr(I,v)),null!==M.attrs&&Ko(M,M.attrs,!1),null!==M.mergedAttrs&&Ko(M,M.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,M),M}(v,p,d,0,o,l,c):p.data[v];xr(M,!0);const x=M.mergedAttrs;null!==x&&Un(I,b,x);const U=M.classes;null!==U&&Md(I,b,U);const q=M.styles;null!==q&&GE(I,b,q),64!=(64&M.flags)&&Yp(p,d,b,M),0===function Xa(){return dt.lFrame.elementDepthCount}()&&Xn(b,d),function td(){dt.lFrame.elementDepthCount++}(),Qs(M)&&(K_(p,d,M),function r0(s,o,l){if(Gc(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,l[p],p)}}}(p,M,d)),null!==c&&ug(d,M)}function ky(){let s=Tn();qu()?Gu():(s=s.parent,xr(s,!1));const o=s;!function Ja(){dt.lFrame.elementDepthCount--}();const l=Ot();l.firstCreatePass&&(vs(l,s),Gc(s)&&l.queries.elementEnd(s)),null!=o.classesWithoutHost&&function ld(s){return 0!=(16&s.flags)}(o)&&Qd(l,o,De(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Dp(s){return 0!=(32&s.flags)}(o)&&Qd(l,o,De(),o.stylesWithoutHost,!1)}function U0(s,o,l,c){Ny(s,o,l,c),ky()}function Xd(s){return!!s&&"function"==typeof s.then}function Py(s){return!!s&&"function"==typeof s.subscribe}const gC=Py;function _C(s,o){let l=null;const c=function A_(s){const o=s.attrs;if(null!=o){const l=o.indexOf(5);if(0==(1&l))return o[l+1]}return null}(s);for(let d=0;d<o.length;d++){const p=o[d];if("*"!==p){if(null===c?S_(s,p,!0):uT(c,p))return d}else l=d}return l}function H0(s){const o=De()[16][6];if(!o.projection){const c=o.projection=Ai(s?s.length:1,null),d=c.slice();let p=o.child;for(;null!==p;){const v=s?_C(p,s):0;null!==v&&(d[v]?d[v].projectionNext=p:c[v]=p,d[v]=p),p=p.next}}}function Jd(s,o=0,l){const c=De(),d=Ot(),p=Nd(d,20+s,16,null,l||null);null===p.projection&&(p.projection=o),Gu(),64!=(64&p.flags)&&function tT(s,o,l){qE(o[11],0,o,l,Zp(s,l,o),b_(l.parent||o[6],l,o))}(d,c,p)}function Ng(s,o,l){return eh(s,"",o,"",l),Ng}function eh(s,o,l,c,d){const p=De(),v=$d(p,o,l,c);return v!==Dt&&ni(Ot(),Mn(),p,s,v,p[11],d,!1),eh}function Z0(s,o,l,c,d){const p=s[l+1],v=null===o;let I=c?zo(p):Sl(p),b=!1;for(;0!==I&&(!1===b||v);){const x=s[I+1];Vy(s[I],o)&&(b=!0,s[I+1]=c?P_(x):x_(x)),I=c?zo(x):Sl(x)}b&&(s[l+1]=c?x_(p):P_(p))}function Vy(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&lo(s,o)>=0}function nh(s,o){return function Yo(s,o,l,c){const d=De(),p=Ot(),v=function _s(s){const o=dt.lFrame,l=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,l}(2);p.firstUpdatePass&&function tw(s,o,l,c){const d=s.data;if(null===d[l+1]){const p=d[or()],v=function ew(s,o){return o>=s.expandoStartIndex}(s,l);(function Yy(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!v&&(o=!1),o=function EC(s,o,l,c){const d=function Gl(s){const o=dt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(l=Cc(l=Lg(null,s,o,l,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(l=Lg(d,s,o,l,c),null===p){let b=function wC(s,o,l){const c=l?o.classBindings:o.styleBindings;if(0!==Sl(c))return s[zo(c)]}(s,o,c);void 0!==b&&Array.isArray(b)&&(b=Lg(null,s,o,b[1],c),b=Cc(b,o.attrs,c),function Fg(s,o,l,c){s[zo(l?o.classBindings:o.styleBindings)]=c}(s,o,c,b))}else p=function nw(s,o,l){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=Cc(c,s[p].hostAttrs,l);return Cc(c,o.attrs,l)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),l}(d,p,o,c),function K0(s,o,l,c,d,p){let v=p?o.classBindings:o.styleBindings,I=zo(v),b=Sl(v);s[c]=l;let x,M=!1;if(Array.isArray(l)){const U=l;x=U[1],(null===x||lo(U,x)>0)&&(M=!0)}else x=l;if(d)if(0!==b){const q=zo(s[I+1]);s[c+1]=rg(q,I),0!==q&&(s[q+1]=N_(s[q+1],c)),s[I+1]=function cT(s,o){return 131071&s|o<<17}(s[I+1],c)}else s[c+1]=rg(I,0),0!==I&&(s[I+1]=N_(s[I+1],c)),I=c;else s[c+1]=rg(b,0),0===I?I=c:s[b+1]=N_(s[b+1],c),b=c;M&&(s[c+1]=x_(s[c+1])),Z0(s,x,c,!0),Z0(s,x,c,!1),function Ef(s,o,l,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&lo(p,o)>=0&&(l[c+1]=P_(l[c+1]))}(o,x,s,c,p),v=rg(I,b),p?o.classBindings=v:o.styleBindings=v}(d,p,o,l,v,c)}}(p,s,v,c),o!==Dt&&mi(d,v,o)&&function Ky(s,o,l,c,d,p,v,I){if(!(3&o.type))return;const b=s.data,M=b[I+1];wf(function k_(s){return 1==(1&s)}(M)?Zy(b,o,l,d,Sl(M),v):void 0)||(wf(p)||function QE(s){return 2==(2&s)}(M)&&(p=Zy(b,null,l,d,I,v)),function rT(s,o,l,c,d){const p=cn(s);if(o)d?p?s.addClass(l,c):l.classList.add(c):p?s.removeClass(l,c):l.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:he.DashCase;if(null==d)p?s.removeStyle(l,c,v):l.style.removeProperty(c);else{const I="string"==typeof d&&d.endsWith("!important");I&&(d=d.slice(0,-10),v|=he.Important),p?s.setStyle(l,c,d,v):l.style.setProperty(c,d,I?"important":"")}}}(c,v,Mo(or(),l),d,p))}(p,p.data[or()],d,d[11],s,d[v+1]=function iw(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ve(Mi(s)))),s}(o,l),c,v)}(s,o,null,!0),nh}function Lg(s,o,l,c,d){let p=null;const v=l.directiveEnd;let I=l.directiveStylingLast;for(-1===I?I=l.directiveStart:I++;I<v&&(p=o[I],c=Cc(c,p.hostAttrs,d),p!==s);)I++;return null!==s&&(l.directiveStylingLast=I),c}function Cc(s,o,l){const c=l?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),ei(s,v,!!l||o[++p]))}return void 0===s?null:s}function Zy(s,o,l,c,d,p){const v=null===o;let I;for(;d>0;){const b=s[d],M=Array.isArray(b),x=M?b[1]:b,U=null===x;let q=l[d+1];q===Dt&&(q=U?H:void 0);let Q=U?Da(q,c):x===c?q:void 0;if(M&&!wf(Q)&&(Q=Da(b,c)),wf(Q)&&(I=Q,v))return I;const Ie=s[d+1];d=v?zo(Ie):Sl(Ie)}if(null!==o){let b=p?o.residualClasses:o.residualStyles;null!=b&&(I=Da(b,c))}return I}function wf(s){return void 0!==s}function TC(s,o=""){const l=De(),c=Ot(),d=s+20,p=c.firstCreatePass?Nd(c,d,1,o,null):c.data[d],v=l[d]=function Rs(s,o){return cn(s)?s.createText(o):s.createTextNode(o)}(l[11],o);Yp(c,l,v,p),xr(p,!1)}function Qy(s){return Xy("",s,""),Qy}function Xy(s,o,l){const c=De(),d=$d(c,s,o,l);return d!==Dt&&Ji(c,or(),d),Xy}const bu=void 0;var dw=["en",[["a","p"],["AM","PM"],bu],[["AM","PM"],bu,bu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],bu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],bu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",bu,"{1} 'at' {0}",bu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function cw(s){const l=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===c?1:5}];let Dc={};function nv(s){const o=function pw(s){return s.toLowerCase().replace(/_/g,"-")}(s);let l=fw(o);if(l)return l;const c=o.split("-")[0];if(l=fw(c),l)return l;if("en"===c)return dw;throw new Error(`Missing locale data for the locale "${s}".`)}function hw(s){return nv(s)[yt.PluralCase]}function fw(s){return s in Dc||(Dc[s]=Ht.ng&&Ht.ng.common&&Ht.ng.common.locales&&Ht.ng.common.locales[s]),Dc[s]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const Zg="en-US";let mw=Zg;class rD{}class xN{resolveComponentFactory(o){throw function RN(s){const o=Error(`No component factory found for ${ve(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let nm=(()=>{class s{}return s.NULL=new xN,s})();function NN(){return Sf(Tn(),De())}function Sf(s,o){return new rm(ir(s,o))}let rm=(()=>{class s{constructor(l){this.nativeElement=l}}return s.__NG_ELEMENT_ID__=NN,s})();function kN(s){return s instanceof rm?s.nativeElement:s}class iD{}let PN=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function FN(){const s=De(),l=sr(Tn().index,s);return function ON(s){return s[11]}(Ci(l)?l:s)}(),s})(),LN=(()=>{class s{}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:()=>null}),s})();class sD{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const oD=new sD("13.2.0"),xw={};function ov(s,o,l,c,d=!1){for(;null!==l;){const p=o[l.index];if(null!==p&&c.push(en(p)),ai(p))for(let I=10;I<p.length;I++){const b=p[I],M=b[1].firstChild;null!==M&&ov(b[1],b,M,c)}const v=l.type;if(8&v)ov(s,o,l.child,c);else if(32&v){const I=nt(l,o);let b;for(;b=I();)c.push(b)}else if(16&v){const I=$E(o,l);if(Array.isArray(I))c.push(...I);else{const b=$t(o[16]);ov(b[1],b,I,c,!0)}}l=d?l.projectionNext:l.next}return c}class im{constructor(o,l){this._lView=o,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,l=o[1];return ov(l,o,l.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ai(o)){const l=o[8],c=l?l.indexOf(this):-1;c>-1&&(Xh(o,c),ba(l,c))}this._attachedToViewContainer=!1}VE(this._lView[1],this._lView)}onDestroy(o){Y_(this._lView[1],this._lView,null,o)}markForCheck(){!function iy(s){for(;s;){s[2]|=64;const o=$t(s);if(Dh(s)&&!o)return s;s=o}return null}(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){oy(this._lView[1],this._lView,this.context)}checkNoChanges(){!function AT(s,o,l){_a(!0);try{oy(s,o,l)}finally{_a(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Pe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Dd(s,o){tf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Pe(902,"");this._appRef=o}}class UN extends im{constructor(o){super(o),this._view=o}detectChanges(){pg(this._view)}checkNoChanges(){!function MT(s){_a(!0);try{pg(s)}finally{_a(!1)}}(this._view)}get context(){return null}}class aD extends nm{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const l=Zn(o);return new Nw(l,this.ngModule)}}function lD(s){const o=[];for(let l in s)s.hasOwnProperty(l)&&o.push({propName:s[l],templateName:l});return o}const VN=new En("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>gc});class Nw extends rD{constructor(o,l){super(),this.componentDef=o,this.ngModule=l,this.componentType=o.type,this.selector=function tg(s){return s.map(ZE).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return lD(this.componentDef.inputs)}get outputs(){return lD(this.componentDef.outputs)}create(o,l,c,d){const p=(d=d||this.ngModule)?function jN(s,o){return{get:(l,c,d)=>{const p=s.get(l,xw,d);return p!==xw||c===xw?p:o.get(l,c,d)}}}(o,d.injector):o,v=p.get(iD,Za),I=p.get(LN,null),b=v.createRenderer(null,this.componentDef),M=this.componentDef.selectors[0][0]||"div",x=c?function dg(s,o,l){if(cn(s))return s.selectRootElement(o,l===xt.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):xa(v.createRenderer(null,this.componentDef),M,function BN(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(M)),U=this.componentDef.onPush?576:528,q=function v0(s,o){return{components:[],scheduler:s||gc,clean:xT,playerHandler:o||null,flags:0}}(),Q=Pd(0,null,null,1,0,null,null,null,null,null),Ie=Rl(null,Q,q,U,null,null,v,b,I,p);let Ue,$e;xo(Ie);try{const Xe=function wy(s,o,l,c,d,p){const v=l[1];l[20]=s;const b=Nd(v,20,2,"#host",null),M=b.mergedAttrs=o.hostAttrs;null!==M&&(Ko(b,M,!0),null!==s&&(Un(d,s,M),null!==b.classes&&Md(d,s,b.classes),null!==b.styles&&GE(d,s,b.styles)));const x=c.createRenderer(s,o),U=Rl(l,cg(o),null,o.onPush?64:16,l[20],b,c,x,p||null,null);return v.firstCreatePass&&(Zr(io(b,l),v,o.type),Ld(v,b),xs(b,l.length,1)),ff(l,U),l[20]=U}(x,this.componentDef,Ie,v,b);if(x)if(c)Un(b,x,["ng-version",oD.full]);else{const{attrs:Te,classes:ht}=function M_(s){const o=[],l=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&l.push(p);else{if(!Wo(d))break;d=p}c++}return{attrs:o,classes:l}}(this.componentDef.selectors[0]);Te&&Un(b,x,Te),ht&&ht.length>0&&Md(b,x,ht.join(" "))}if($e=An(Q,20),void 0!==l){const Te=$e.projection=[];for(let ht=0;ht<this.ngContentSelectors.length;ht++){const jt=l[ht];Te.push(null!=jt?Array.from(jt):null)}}Ue=function y0(s,o,l,c,d){const p=l[1],v=function o0(s,o,l){const c=Tn();s.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),ny(s,c,o,kd(s,o,1,null),l));const d=di(o,s,c.directiveStart,c);Xn(d,o);const p=ir(c,o);return p&&Xn(p,o),d}(p,l,o);if(c.components.push(v),s[8]=v,d&&d.forEach(b=>b(v,o)),o.contentQueries){const b=Tn();o.contentQueries(1,v,b.directiveStart)}const I=Tn();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(ys(I.index),Fd(l[1],I,0,I.directiveStart,I.directiveEnd,o),ey(o,v)),v}(Xe,this.componentDef,Ie,q,[HT]),vc(Q,Ie,null)}finally{ya()}return new $N(this.componentType,Ue,Sf($e,Ie),Ie,$e)}}class $N extends class MN{}{constructor(o,l,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=l,this.hostView=this.changeDetectorRef=new UN(d),this.componentType=o}get injector(){return new Is(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Af{}const Mf=new Map;class dD extends Af{constructor(o,l){super(),this._parent=l,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new aD(this);const c=Yn(o);this._bootstrapComponents=g(c.bootstrap),this._r3Injector=yg(o,l,[{provide:Af,useValue:this},{provide:nm,useValue:this.componentFactoryResolver}],ve(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,l=ks.THROW_IF_NOT_FOUND,c=_t.Default){return o===ks||o===Af||o===dy?this:this._r3Injector.get(o,l,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class kw extends class GN{}{constructor(o){super(),this.moduleType=o,null!==Yn(o)&&function WN(s){const o=new Set;!function l(c){const d=Yn(c,!0),p=d.id;null!==p&&(function uD(s,o,l){if(o&&o!==l)throw new Error(`Duplicate module registered for ${s} - ${ve(o)} vs ${ve(o.name)}`)}(p,Mf.get(p),c),Mf.set(p,c));const v=g(d.imports);for(const I of v)o.has(I)||(o.add(I),l(I))}(s)}(o)}create(o){return new dD(this.moduleType,o)}}function hD(s,o,l,c,d,p){const v=o+l;return mi(s,v,d)?function Pa(s,o,l){return s[o]=l}(s,v+1,p?c.call(p,d):c(d)):function sm(s,o){const l=s[o];return l===Dt?void 0:l}(s,v+1)}function gD(s,o){const l=Ot();let c;const d=s+20;l.firstCreatePass?(c=function rk(s,o){if(o)for(let l=o.length-1;l>=0;l--){const c=o[l];if(s===c.name)return c}}(o,l.pipeRegistry),l.data[d]=c,c.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(d,c.onDestroy)):c=l.data[d];const p=c.factory||(c.factory=ui(c.type)),v=Nn(yf);try{const I=ko(!1),b=p();return ko(I),function Iu(s,o,l,c){l>=s.data.length&&(s.data[l]=null,s.blueprint[l]=null),o[l]=c}(l,De(),d,b),b}finally{Nn(v)}}function lv(s,o,l){const c=s+20,d=De(),p=function ms(s,o){return s[o]}(d,c);return function om(s,o){return s[1].data[o].pure}(d,c)?hD(d,function Qn(){const s=dt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}(),o,p.transform,l,p):p.transform(l)}function Ow(s){return o=>{setTimeout(s,void 0,o)}}const Tu=class ok extends y.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,l,c){var d,p,v;let I=o,b=l||(()=>null),M=c;if(o&&"object"==typeof o){const U=o;I=null===(d=U.next)||void 0===d?void 0:d.bind(U),b=null===(p=U.error)||void 0===p?void 0:p.bind(U),M=null===(v=U.complete)||void 0===v?void 0:v.bind(U)}this.__isAsync&&(b=Ow(b),I&&(I=Ow(I)),M&&(M=Ow(M)));const x=super.subscribe({next:I,error:b,complete:M});return o instanceof ee.w0&&o.add(x),x}};function ak(){return this._results[Vd()]()}class Fw{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Vd(),c=Fw.prototype;c[l]||(c[l]=ak)}get changes(){return this._changes||(this._changes=new Tu)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,l){return this._results.reduce(o,l)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,l){const c=this;c.dirty=!1;const d=Cr(o);(this._changesDetected=!function tu(s,o,l){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(l&&(d=l(d),p=l(p)),p!==d)return!1}return!0}(c._results,d,l))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let am=(()=>{class s{}return s.__NG_ELEMENT_ID__=ck,s})();const lk=am,uk=class extends lk{constructor(o,l,c){super(),this._declarationLView=o,this._declarationTContainer=l,this.elementRef=c}createEmbeddedView(o){const l=this._declarationTContainer.tViews,c=Rl(this._declarationLView,l,o,16,null,l.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(l)),vc(l,c,o),new im(c)}};function ck(){return uv(Tn(),De())}function uv(s,o){return 4&s.type?new uk(o,s,Sf(s,o)):null}let cv=(()=>{class s{}return s.__NG_ELEMENT_ID__=yD,s})();function yD(){return hv(Tn(),De())}const vD=cv,Lw=class extends vD{constructor(o,l,c){super(),this._lContainer=o,this._hostTNode=l,this._hostLView=c}get element(){return Sf(this._hostTNode,this._hostLView)}get injector(){return new Is(this._hostTNode,this._hostLView)}get parentInjector(){const o=Cn(this._hostTNode,this._hostLView);if(Kl(o)){const l=Rn(o,this._hostLView),c=on(o);return new Is(l[1].data[c+8],l)}return new Is(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const l=Uw(this._lContainer);return null!==l&&l[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,l,c){const d=o.createEmbeddedView(l||{});return this.insert(d,c),d}createComponent(o,l,c,d,p){const v=o&&!function oo(s){return"function"==typeof s}(o);let I;if(v)I=l;else{const U=l||{};I=U.index,c=U.injector,d=U.projectableNodes,p=U.ngModuleRef}const b=v?o:new Nw(Zn(o)),M=c||this.parentInjector;if(!p&&null==b.ngModule&&M){const U=M.get(Af,null);U&&(p=U)}const x=b.create(M,d,void 0,p);return this.insert(x.hostView,I),x}insert(o,l){const c=o._lView,d=c[1];if(function Hu(s){return ai(s[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const U=c[3],q=new Lw(U,U[6],U[3]);q.detach(q.indexOf(o))}}const p=this._adjustIndex(l),v=this._lContainer;!function BE(s,o,l,c){const d=10+c,p=l.length;c>0&&(l[d-1][4]=o),c<p-10?(o[4]=l[d],dd(l,10+c,o)):(l.push(o),o[4]=null),o[3]=l;const v=o[17];null!==v&&l!==v&&function Kp(s,o){const l=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===l?s[9]=[o]:l.push(o)}(v,o);const I=o[19];null!==I&&I.insertView(s),o[2]|=128}(d,c,v,p);const I=C_(p,v),b=c[11],M=Sd(b,v[7]);return null!==M&&function Yh(s,o,l,c,d,p){c[0]=d,c[6]=o,tf(s,c,l,1,d,p)}(d,v[6],b,c,M,I),o.attachToViewContainerRef(),dd(dv(v),p,o),o}move(o,l){return this.insert(o,l)}indexOf(o){const l=Uw(this._lContainer);return null!==l?l.indexOf(o):-1}remove(o){const l=this._adjustIndex(o,-1),c=Xh(this._lContainer,l);c&&(ba(dv(this._lContainer),l),VE(c[1],c))}detach(o){const l=this._adjustIndex(o,-1),c=Xh(this._lContainer,l);return c&&null!=ba(dv(this._lContainer),l)?new im(c):null}_adjustIndex(o,l=0){return null==o?this.length+l:o}};function Uw(s){return s[8]}function dv(s){return s[8]||(s[8]=[])}function hv(s,o){let l;const c=o[s.index];if(ai(c))l=c;else{let d;if(8&s.type)d=en(c);else{const p=o[11];d=p.createComment("");const v=ir(s,o);Dl(p,Sd(p,v),d,function Ad(s,o){return cn(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=l=ry(c,o,d,s),ff(o,l)}return new Lw(l,s,o)}class Bw{constructor(o){this.queryList=o,this.matches=null}clone(){return new Bw(this.queryList)}setDirty(){this.queryList.setDirty()}}class Vw{constructor(o=[]){this.queries=o}createEmbeddedView(o){const l=o.queries;if(null!==l){const c=null!==o.contentQueries?o.contentQueries[0]:l.length,d=[];for(let p=0;p<c;p++){const v=l.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Vw(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let l=0;l<this.queries.length;l++)null!==DD(o,l).matches&&this.queries[l].setDirty()}}class ED{constructor(o,l,c=null){this.predicate=o,this.flags=l,this.read=c}}class jw{constructor(o=[]){this.queries=o}elementStart(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,l)}elementEnd(o){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(o)}embeddedTView(o){let l=null;for(let c=0;c<this.length;c++){const d=null!==l?l.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==l?l.push(p):l=[p])}return null!==l?new jw(l):null}template(o,l){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,l)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Hw{constructor(o,l=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(o,l){this.isApplyingToNode(l)&&this.matchTNode(o,l)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,l){this.elementStart(o,l)}embeddedTView(o,l){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,l),new Hw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==l;)c=c.parent;return l===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,l){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,l,fk(l,p)),this.matchTNodeWithReadOption(o,l,Qu(l,o,p,!1,!1))}else c===am?4&l.type&&this.matchTNodeWithReadOption(o,l,-1):this.matchTNodeWithReadOption(o,l,Qu(l,o,c,!1,!1))}matchTNodeWithReadOption(o,l,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===rm||d===cv||d===am&&4&l.type)this.addMatch(l.index,-2);else{const p=Qu(l,o,d,!1,!1);null!==p&&this.addMatch(l.index,p)}else this.addMatch(l.index,c)}}addMatch(o,l){null===this.matches?this.matches=[o,l]:this.matches.push(o,l)}}function fk(s,o){const l=s.localNames;if(null!==l)for(let c=0;c<l.length;c+=2)if(l[c]===o)return l[c+1];return null}function gk(s,o,l,c){return-1===l?function pk(s,o){return 11&s.type?Sf(s,o):4&s.type?uv(s,o):null}(o,s):-2===l?function mk(s,o,l){return l===rm?Sf(o,s):l===am?uv(o,s):l===cv?hv(o,s):void 0}(s,o,c):di(s,s[1],l,o)}function wD(s,o,l,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=l.matches,I=[];for(let b=0;b<v.length;b+=2){const M=v[b];I.push(M<0?null:gk(o,p[M],v[b+1],l.metadata.read))}d.matches=I}return d.matches}function $w(s,o,l,c){const d=s.queries.getByIndex(l),p=d.matches;if(null!==p){const v=wD(s,o,d,l);for(let I=0;I<p.length;I+=2){const b=p[I];if(b>0)c.push(v[I/2]);else{const M=p[I+1],x=o[-b];for(let U=10;U<x.length;U++){const q=x[U];q[17]===q[3]&&$w(q[1],q,M,c)}if(null!==x[9]){const U=x[9];for(let q=0;q<U.length;q++){const Q=U[q];$w(Q[1],Q,M,c)}}}}}return c}function ID(s){const o=De(),l=Ot(),c=sl();zu(c+1);const d=DD(l,c);if(s.dirty&&ma(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?$w(l,o,c,[]):wD(l,o,d,c);s.reset(p,kN),s.notifyOnChanges()}return!0}return!1}function bD(s,o,l,c){const d=Ot();if(d.firstCreatePass){const p=Tn();(function qw(s,o,l){null===s.queries&&(s.queries=new jw),s.queries.track(new Hw(o,l))})(d,new ED(o,l,c),p.index),function vk(s,o){const l=s.contentQueries||(s.contentQueries=[]);o!==(l.length?l[l.length-1]:-1)&&l.push(s.queries.length-1,o)}(d,s),2==(2&l)&&(d.staticContentQueries=!0)}!function CD(s,o,l){const c=new Fw(4==(4&l));Y_(s,o,c,c.destroy),null===o[19]&&(o[19]=new Vw),o[19].queries.push(new Bw(c))}(d,De(),l)}function TD(){return function yk(s,o){return s[19].queries[o].queryList}(De(),sl())}function DD(s,o){return s.queries.getByIndex(o)}function yv(...s){}const Xw=new En("Application Initializer");let Nf=(()=>{class s{constructor(l){this.appInits=l,this.resolve=yv,this.reject=yv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const l=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Xd(p))l.push(p);else if(gC(p)){const v=new Promise((I,b)=>{p.subscribe({complete:I,error:b})});l.push(v)}}Promise.all(l).then(()=>{c()}).catch(d=>{this.reject(d)}),0===l.length&&c(),this.initialized=!0}}return s.\u0275fac=function(l){return new(l||s)(Ve(Xw,8))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();const $D=new En("AppId"),Bk={provide:$D,useFactory:function Uk(){return`${Jw()}${Jw()}${Jw()}`},deps:[]};function Jw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const qD=new En("Platform Initializer"),GD=new En("Platform ID"),Vk=new En("appBootstrapListener");let jk=(()=>{class s{log(l){console.log(l)}warn(l){console.warn(l)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();const vv=new En("LocaleId"),WD=new En("DefaultCurrencyCode");class zD{constructor(o,l){this.ngModuleFactory=o,this.componentFactories=l}}let eI=(()=>{class s{compileModuleSync(l){return new kw(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const c=this.compileModuleSync(l),p=g(Yn(l).declarations).reduce((v,I)=>{const b=Zn(I);return b&&v.push(new Nw(b)),v},[]);return new zD(c,p)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();const ZD=(()=>Promise.resolve(0))();function tI(s){"undefined"==typeof Zone?ZD.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Os{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Tu(!1),this.onMicrotaskEmpty=new Tu(!1),this.onStable=new Tu(!1),this.onError=new Tu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&l,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function YD(){let s=Ht.requestAnimationFrame,o=Ht.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function Gk(s){const o=()=>{!function qk(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Ht,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,nI(s),s.isCheckStableRunning=!0,Ev(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),nI(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,c,d,p,v,I)=>{try{return QD(s),l.invokeTask(d,p,v,I)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),rI(s)}},onInvoke:(l,c,d,p,v,I,b)=>{try{return QD(s),l.invoke(d,p,v,I,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),rI(s)}},onHasTask:(l,c,d,p)=>{l.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,nI(s),Ev(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(l,c,d,p)=>(l.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Os.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Os.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,l,c){return this._inner.run(o,l,c)}runTask(o,l,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,$k,yv,yv);try{return p.runTask(v,l,c)}finally{p.cancelTask(v)}}runGuarded(o,l,c){return this._inner.runGuarded(o,l,c)}runOutsideAngular(o){return this._outer.run(o)}}const $k={};function Ev(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function nI(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function QD(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function rI(s){s._nesting--,Ev(s)}class XD{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Tu,this.onMicrotaskEmpty=new Tu,this.onStable=new Tu,this.onError=new Tu}run(o,l,c){return o.apply(l,c)}runGuarded(o,l,c){return o.apply(l,c)}runOutsideAngular(o){return o()}runTask(o,l,c,d){return o.apply(l,c)}}let iI=(()=>{class s{constructor(l){this._ngZone=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Os.assertNotInAngularZone(),tI(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tI(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(l)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),l(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:l,timeoutId:p,updateCb:d})}whenStable(l,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(l,c,d){return[]}}return s.\u0275fac=function(l){return new(l||s)(Ve(Os))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})(),sI=(()=>{class s{constructor(){this._applications=new Map,wv.addToWindow(this)}registerApplication(l,c){this._applications.set(l,c)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,c=!0){return wv.findTestabilityInTree(this,l,c)}}return s.\u0275fac=function(l){return new(l||s)},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();class JD{addToWindow(o){}findTestabilityInTree(o,l,c){return null}}function eS(s){wv=s}let Xo,wv=new JD;const oI=new En("AllowMultipleToken");function bv(s,o,l=[]){const c=`Platform: ${o}`,d=new En(c);return(p=[])=>{let v=aI();if(!v||v.injector.get(oI,!1))if(s)s(l.concat(p).concat({provide:d,useValue:!0}));else{const I=l.concat(p).concat({provide:d,useValue:!0},{provide:hy,useValue:"platform"});!function Iv(s){if(Xo&&!Xo.destroyed&&!Xo.injector.get(oI,!1))throw new Pe(400,"");Xo=s.get(lI);const o=s.get(qD,null);o&&o.forEach(l=>l())}(ks.create({providers:I,name:c}))}return function rS(s){const o=aI();if(!o)throw new Pe(401,"");return o}()}}function aI(){return Xo&&!Xo.destroyed?Xo:null}let lI=(()=>{class s{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,c){const I=function Kk(s,o){let l;return l="noop"===s?new XD:("zone.js"===s?void 0:s)||new Os({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),l}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:Os,useValue:I}];return I.run(()=>{const M=ks.create({providers:b,parent:this.injector,name:l.moduleType.name}),x=l.create(M),U=x.injector.get(Jn,null);if(!U)throw new Pe(402,"");return I.runOutsideAngular(()=>{const q=I.onError.subscribe({next:Q=>{U.handleError(Q)}});x.onDestroy(()=>{Tv(this._modules,x),q.unsubscribe()})}),function Cu(s,o,l){try{const c=l();return Xd(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(U,I,()=>{const q=x.injector.get(Nf);return q.runInitializers(),q.donePromise.then(()=>(function FC(s){ot(s,"Expected localeId to be defined"),"string"==typeof s&&(mw=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(vv,Zg)||Zg),this._moduleDoBootstrap(x),x))})})}bootstrapModule(l,c=[]){const d=uI({},c);return function tS(s,o,l){const c=new kw(l);return Promise.resolve(c)}(0,0,l).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(l){const c=l.injector.get(um);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!l.instance.ngDoBootstrap)throw new Pe(403,"");l.instance.ngDoBootstrap(c)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Pe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(l){return new(l||s)(Ve(ks))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();function uI(s,o){return Array.isArray(o)?o.reduce(uI,s):Object.assign(Object.assign({},s),o)}let um=(()=>{class s{constructor(l,c,d,p,v){this._zone=l,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const I=new L.y(M=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{M.next(this._stable),M.complete()})}),b=new L.y(M=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Os.assertNotInAngularZone(),tI(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,M.next(!0))})})});const U=this._zone.onUnstable.subscribe(()=>{Os.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{M.next(!1)}))});return()=>{x.unsubscribe(),U.unsubscribe()}});this.isStable=(0,de.T)(I,b.pipe((0,oe.B)()))}bootstrap(l,c){if(!this._initStatus.done)throw new Pe(405,"");let d;d=l instanceof rD?l:this._componentFactoryResolver.resolveComponentFactory(l),this.componentTypes.push(d.componentType);const p=function nS(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Af),I=d.create(ks.NULL,[],c||d.selector,p),b=I.location.nativeElement,M=I.injector.get(iI,null),x=M&&I.injector.get(sI);return M&&x&&x.registerApplication(b,M),I.onDestroy(()=>{this.detachView(I.hostView),Tv(this.components,I),x&&x.unregisterApplication(b)}),this._loadComponent(I),I}tick(){if(this._runningTick)throw new Pe(101,"");try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const c=l;this._views.push(c),c.attachToAppRef(this)}detachView(l){const c=l;Tv(this._views,c),c.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Vk,[]).concat(this._bootstrapListeners).forEach(d=>d(l))}ngOnDestroy(){this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(l){return new(l||s)(Ve(Os),Ve(ks),Ve(Jn),Ve(nm),Ve(Nf))},s.\u0275prov=Zt({token:s,factory:s.\u0275fac}),s})();function Tv(s,o){const l=s.indexOf(o);l>-1&&s.splice(l,1)}let Cv=!0,Nl=!1;function Zk(){return Nl=!0,Cv}function sS(){if(Nl)throw new Error("Cannot enable prod mode after platform setup.");Cv=!1}let hI=(()=>{class s{}return s.__NG_ELEMENT_ID__=aS,s})();function aS(s){return function kf(s,o,l){if(Bl(s)&&!l){const c=sr(s.index,o);return new im(c,c)}return 47&s.type?new im(o[16],o):null}(Tn(),De(),16==(16&s))}class pS{constructor(){}supports(o){return xi(o)}create(o){return new tP(o)}}const eP=(s,o)=>o;class tP{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||eP}forEachItem(o){let l;for(l=this._itHead;null!==l;l=l._next)o(l)}forEachOperation(o){let l=this._itHead,c=this._removalsHead,d=0,p=null;for(;l||c;){const v=!c||l&&l.currentIndex<yI(c,d,p)?l:c,I=yI(v,d,p),b=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(l=l._next,null==v.previousIndex)d++;else{p||(p=[]);const M=I-d,x=b-d;if(M!=x){for(let q=0;q<M;q++){const Q=q<p.length?p[q]:p[q]=0,Ie=Q+q;x<=Ie&&Ie<M&&(p[q]=Q+1)}p[v.previousIndex]=x-M}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachMovedItem(o){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}forEachIdentityChange(o){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)o(l)}diff(o){if(null==o&&(o=[]),!xi(o))throw new Pe(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,l=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,p,v,I)),Object.is(l.item,p)||this._addIdentityChange(l,p)):(l=this._mismatch(l,p,v,I),c=!0),l=l._next}else d=0,function Ty(s,o){if(Array.isArray(s))for(let l=0;l<s.length;l++)o(s[l]);else{const l=s[Vd()]();let c;for(;!(c=l.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==l&&Object.is(l.trackById,v)?(c&&(l=this._verifyReinsertion(l,I,v,d)),Object.is(l.item,I)||this._addIdentityChange(l,I)):(l=this._mismatch(l,I,v,d),c=!0),l=l._next,d++}),this.length=d;return this._truncate(l),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,l,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,l)||this._addIdentityChange(o,l),this._moveAfter(o,p,d)):o=this._addAfter(new nP(l,c),p,d),o}_verifyReinsertion(o,l,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const l=o._next;this._addToRemovals(this._unlink(o)),o=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,l,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,l,c),this._addToMoves(o,c),o}_moveAfter(o,l,c){return this._unlink(o),this._insertAfter(o,l,c),this._addToMoves(o,c),o}_addAfter(o,l,c){return this._insertAfter(o,l,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,l,c){const d=null===l?this._itHead:l._next;return o._next=d,o._prev=l,null===d?this._itTail=o:d._prev=o,null===l?this._itHead=o:l._next=o,null===this._linkedRecords&&(this._linkedRecords=new gS),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const l=o._prev,c=o._next;return null===l?this._itHead=c:l._next=c,null===c?this._itTail=l:c._prev=l,o}_addToMoves(o,l){return o.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gS),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,l){return o.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class nP{constructor(o,l){this.item=o,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rP{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,l){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===l||l<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const l=o._prevDup,c=o._nextDup;return null===l?this._head=c:l._nextDup=c,null===c?this._tail=l:c._prevDup=l,null===this._head}}class gS{constructor(){this.map=new Map}put(o){const l=o.trackById;let c=this.map.get(l);c||(c=new rP,this.map.set(l,c)),c.add(o)}get(o,l){const d=this.map.get(o);return d?d.get(o,l):null}remove(o){const l=o.trackById;return this.map.get(l).remove(o)&&this.map.delete(l),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function yI(s,o,l){const c=s.previousIndex;if(null===c)return c;let d=0;return l&&c<l.length&&(d=l[c]),c+o+d}class Of{constructor(){}supports(o){return o instanceof Map||bg(o)}create(){return new mS}}class mS{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let l;for(l=this._mapHead;null!==l;l=l._next)o(l)}forEachPreviousItem(o){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)o(l)}forEachChangedItem(o){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)o(l)}forEachAddedItem(o){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)o(l)}forEachRemovedItem(o){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)o(l)}diff(o){if(o){if(!(o instanceof Map||bg(o)))throw new Pe(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(l&&l.key===d)this._maybeAddToChanges(l,c),this._appendAfter=l,l=l._next;else{const p=this._getOrCreateRecordForKey(d,c);l=this._insertBeforeOrAppend(l,p)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let c=l;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,l){if(o){const c=o._prev;return l._next=o,l._prev=c,o._prev=l,c&&(c._next=l),o===this._mapHead&&(this._mapHead=l),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(o,l){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,l);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new Ff(o);return this._records.set(o,c),c.currentValue=l,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,l){Object.is(l,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=l,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,l){o instanceof Map?o.forEach(l):Object.keys(o).forEach(c=>l(o[c],c))}}class Ff{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Av(){return new cm([new pS])}let cm=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(null!=c){const d=c.factories.slice();l=l.concat(d)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Av()),deps:[[s,new pi,new fi]]}}find(l){const c=this.factories.find(d=>d.supports(l));if(null!=c)return c;throw new Pe(901,"")}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:Av}),s})();function Mv(){return new La([new Of])}let La=(()=>{class s{constructor(l){this.factories=l}static create(l,c){if(c){const d=c.factories.slice();l=l.concat(d)}return new s(l)}static extend(l){return{provide:s,useFactory:c=>s.create(l,c||Mv()),deps:[[s,new pi,new fi]]}}find(l){const c=this.factories.find(p=>p.supports(l));if(c)return c;throw new Pe(901,"")}}return s.\u0275prov=Zt({token:s,providedIn:"root",factory:Mv}),s})();const dm=[new Of],iP=new cm([new pS]),hm=new La(dm),ES=bv(null,"core",[{provide:GD,useValue:"unknown"},{provide:lI,deps:[ks]},{provide:sI,deps:[]},{provide:jk,deps:[]}]),TS=[{provide:um,useClass:um,deps:[Os,ks,Jn,nm,Nf]},{provide:VN,deps:[Os],useFactory:function CS(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(l){o.push(l)}}},{provide:Nf,useClass:Nf,deps:[[new fi,Xw]]},{provide:eI,useClass:eI,deps:[]},Bk,{provide:cm,useFactory:function wS(){return iP},deps:[]},{provide:La,useFactory:function IS(){return hm},deps:[]},{provide:vv,useFactory:function bS(s){return s||function vI(){return"undefined"!=typeof $localize&&$localize.locale||Zg}()},deps:[[new co(vv),new fi,new pi]]},{provide:WD,useValue:"USD"}];let DS=(()=>{class s{constructor(l){}}return s.\u0275fac=function(l){return new(l||s)(Ve(um))},s.\u0275mod=Ar({type:s}),s.\u0275inj=Yt({providers:TS}),s})()},3942:(it,Se,F)=>{"use strict";F.d(Se,{Z:()=>Pe});var y=F(2090),ee=F(4859),L=F(9681),de=F(1877);class oe{constructor(X,se){this._delegate=X,this.firebase=se,(0,L._addComponent)(X,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=X.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this._delegate.automaticDataCollectionEnabled=X}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(X=>{this._delegate.checkDestroyed(),X()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(X,se=L._DEFAULT_ENTRY_NAME){var be;this._delegate.checkDestroyed();const Ae=this._delegate.container.getProvider(X);return!Ae.isInitialized()&&"EXPLICIT"===(null===(be=Ae.getComponent())||void 0===be?void 0:be.instantiationMode)&&Ae.initialize(),Ae.getImmediate({identifier:se})}_removeServiceInstance(X,se=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(X).clearInstance(se)}_addComponent(X){(0,L._addComponent)(this._delegate,X)}_addOrOverwriteComponent(X){(0,L._addOrOverwriteComponent)(this._delegate,X)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ie=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ce(){const qe=function ve(qe){const X={},se={__esModule:!0,initializeApp:function pe(We,le={}){const J=L.initializeApp(We,le);if((0,y.r3)(X,J.name))return X[J.name];const ae=new qe(J,se);return X[J.name]=ae,ae},app:Ae,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function Me(We){const le=We.name,J=le.replace("-compat","");if(L._registerComponent(We)&&"PUBLIC"===We.type){const ae=(Ee=Ae())=>{if("function"!=typeof Ee[J])throw ie.create("invalid-app-argument",{appName:le});return Ee[J]()};void 0!==We.serviceProps&&(0,y.ZB)(ae,We.serviceProps),se[J]=ae,qe.prototype[J]=function(...Ee){return this._getService.bind(this,le).apply(this,We.multipleInstances?Ee:[])}}return"PUBLIC"===We.type?se[J]:null},removeApp:function be(We){delete X[We]},useAsService:function Ye(We,le){return"serverAuth"===le?null:le},modularAPIs:L}};function Ae(We){if(!(0,y.r3)(X,We=We||L._DEFAULT_ENTRY_NAME))throw ie.create("no-app",{appName:We});return X[We]}return se.default=se,Object.defineProperty(se,"apps",{get:function Fe(){return Object.keys(X).map(We=>X[We])}}),Ae.App=qe,se}(oe);return qe.INTERNAL=Object.assign(Object.assign({},qe.INTERNAL),{createFirebaseNamespace:ce,extendNamespace:function X(se){(0,y.ZB)(qe,se)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),qe}(),$=new de.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const qe=self.firebase.SDK_VERSION;qe&&qe.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Pe=G;!function Re(qe){(0,L.registerVersion)("@firebase/app-compat","0.1.16",qe)}()},9681:(it,Se,F)=>{"use strict";F.r(Se),F.d(Se,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>Sr,_DEFAULT_ENTRY_NAME:()=>xn,_addComponent:()=>rn,_addOrOverwriteComponent:()=>cr,_apps:()=>ut,_clearComponents:()=>Ut,_components:()=>Wn,_getProvider:()=>Vi,_registerComponent:()=>Zt,_removeServiceInstance:()=>Yt,deleteApp:()=>$i,getApp:()=>zs,getApps:()=>jr,initializeApp:()=>Hi,onLog:()=>zn,registerVersion:()=>Hr,setLogLevel:()=>Nn});var y=F(5861),ee=F(4859),L=F(1877),de=F(2090);class oe{constructor(et){this.container=et}getPlatformInfoString(){return this.container.getProviders().map(Rt=>{if(function ye(gt){const et=gt.getComponent();return"VERSION"===(null==et?void 0:et.type)}(Rt)){const dn=Rt.getImmediate();return`${dn.library}/${dn.version}`}return null}).filter(Rt=>Rt).join(" ")}}const ie="@firebase/app",ce=new L.Yd("@firebase/app"),xn="[DEFAULT]",ot={[ie]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ut=new Map,Wn=new Map;function rn(gt,et){try{gt.container.addComponent(et)}catch(Rt){ce.debug(`Component ${et.name} failed to register with FirebaseApp ${gt.name}`,Rt)}}function cr(gt,et){gt.container.addOrOverwriteComponent(et)}function Zt(gt){const et=gt.name;if(Wn.has(et))return ce.debug(`There were multiple attempts to register component ${et}.`),!1;Wn.set(et,gt);for(const Rt of ut.values())rn(Rt,gt);return!0}function Vi(gt,et){return gt.container.getProvider(et)}function Yt(gt,et,Rt=xn){Vi(gt,et).clearInstance(Rt)}function Ut(){Wn.clear()}const dr=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Ws{constructor(et,Rt,dn){this._isDeleted=!1,this._options=Object.assign({},et),this._config=Object.assign({},Rt),this._name=Rt.name,this._automaticDataCollectionEnabled=Rt.automaticDataCollectionEnabled,this._container=dn,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this.checkDestroyed(),this._automaticDataCollectionEnabled=et}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(et){this._isDeleted=et}checkDestroyed(){if(this.isDeleted)throw dr.create("app-deleted",{appName:this._name})}}const Sr="9.6.5";function Hi(gt,et={}){"object"!=typeof et&&(et={name:et});const Rt=Object.assign({name:xn,automaticDataCollectionEnabled:!1},et),dn=Rt.name;if("string"!=typeof dn||!dn)throw dr.create("bad-app-name",{appName:String(dn)});const hr=ut.get(dn);if(hr){if((0,de.vZ)(gt,hr.options)&&(0,de.vZ)(Rt,hr.config))return hr;throw dr.create("duplicate-app",{appName:dn})}const xt=new ee.H0(dn);for(const ct of Wn.values())xt.addComponent(ct);const tt=new Ws(gt,Rt,xt);return ut.set(dn,tt),tt}function zs(gt=xn){const et=ut.get(gt);if(!et)throw dr.create("no-app",{appName:gt});return et}function jr(){return Array.from(ut.values())}function $i(gt){return _t.apply(this,arguments)}function _t(){return(_t=(0,y.Z)(function*(gt){const et=gt.name;ut.has(et)&&(ut.delete(et),yield Promise.all(gt.container.getProviders().map(Rt=>Rt.delete())),gt.isDeleted=!0)})).apply(this,arguments)}function Hr(gt,et,Rt){var dn;let hr=null!==(dn=ot[gt])&&void 0!==dn?dn:gt;Rt&&(hr+=`-${Rt}`);const xt=hr.match(/\s|\//),tt=et.match(/\s|\//);if(xt||tt){const ct=[`Unable to register library "${hr}" with version "${et}":`];return xt&&ct.push(`library name "${hr}" contains illegal characters (whitespace or "/")`),xt&&tt&&ct.push("and"),tt&&ct.push(`version name "${et}" contains illegal characters (whitespace or "/")`),void ce.warn(ct.join(" "))}Zt(new ee.wA(`${hr}-version`,()=>({library:hr,version:et}),"VERSION"))}function zn(gt,et){if(null!==gt&&"function"!=typeof gt)throw dr.create("invalid-log-argument");(0,L.Am)(gt,et)}function Nn(gt){(0,L.Ub)(gt)}!function Ks(gt){Zt(new ee.wA("platform-logger",et=>new oe(et),"PRIVATE")),Hr(ie,"0.7.15",gt),Hr(ie,"0.7.15","esm2017"),Hr("fire-js","")}("")},4859:(it,Se,F)=>{"use strict";F.d(Se,{wA:()=>L,H0:()=>ve,zt:()=>oe});var y=F(5861),ee=F(2090);class L{constructor(G,$,te){this.name=G,this.instanceFactory=$,this.type=te,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const de="[DEFAULT]";class oe{constructor(G,$){this.name=G,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const $=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has($)){const te=new ee.BH;if(this.instancesDeferred.set($,te),this.isInitialized($)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:$});He&&te.resolve(He)}catch(He){}}return this.instancesDeferred.get($).promise}getImmediate(G){var $;const te=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),He=null!==($=null==G?void 0:G.optional)&&void 0!==$&&$;if(!this.isInitialized(te)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:te})}catch(Re){if(He)return null;throw Re}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ie(ce){return"EAGER"===ce.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:de})}catch($){}for(const[$,te]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier($);try{const Re=this.getOrInitializeService({instanceIdentifier:He});te.resolve(Re)}catch(Re){}}}}clearInstance(G=de){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,y.Z)(function*(){const $=Array.from(G.instances.values());yield Promise.all([...$.filter(te=>"INTERNAL"in te).map(te=>te.INTERNAL.delete()),...$.filter(te=>"_delete"in te).map(te=>te._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=de){return this.instances.has(G)}getOptions(G=de){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:$={}}=G,te=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(te))throw Error(`${this.name}(${te}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:te,options:$});for(const[Re,Pe]of this.instancesDeferred.entries())te===this.normalizeInstanceIdentifier(Re)&&Pe.resolve(He);return He}onInit(G,$){var te;const He=this.normalizeInstanceIdentifier($),Re=null!==(te=this.onInitCallbacks.get(He))&&void 0!==te?te:new Set;Re.add(G),this.onInitCallbacks.set(He,Re);const Pe=this.instances.get(He);return Pe&&G(Pe,He),()=>{Re.delete(G)}}invokeOnInitCallbacks(G,$){const te=this.onInitCallbacks.get($);if(te)for(const He of te)try{He(G,$)}catch(Re){}}getOrInitializeService({instanceIdentifier:G,options:$={}}){let te=this.instances.get(G);if(!te&&this.component&&(te=this.component.instanceFactory(this.container,{instanceIdentifier:(ce=G,ce===de?void 0:ce),options:$}),this.instances.set(G,te),this.instancesOptions.set(G,$),this.invokeOnInitCallbacks(te,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,te)}catch(He){}var ce;return te||null}normalizeInstanceIdentifier(G=de){return this.component?this.component.multipleInstances?G:de:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ve{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const $=this.getProvider(G.name);if($.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);$.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const $=new oe(G,this);return this.providers.set(G,$),$}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Se,F)=>{"use strict";F.d(Se,{in:()=>ee,Yd:()=>ie,Ub:()=>ve,Am:()=>ce});const y=[];var ee=(()=>{return(G=ee||(ee={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ee;var G})();const L={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},de=ee.INFO,oe={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ye=(G,$,...te)=>{if($<G.logLevel)return;const He=(new Date).toISOString(),Re=oe[$];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[Re](`[${He}]  ${G.name}:`,...te)};class ie{constructor($){this.name=$,this._logLevel=de,this._logHandler=ye,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in ee))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?L[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...$),this._logHandler(this,ee.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...$),this._logHandler(this,ee.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...$),this._logHandler(this,ee.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...$),this._logHandler(this,ee.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...$),this._logHandler(this,ee.ERROR,...$)}}function ve(G){y.forEach($=>{$.setLogLevel(G)})}function ce(G,$){for(const te of y){let He=null;$&&$.level&&(He=L[$.level]),te.userLogHandler=null===G?null:(Re,Pe,...qe)=>{const X=qe.map(se=>{if(null==se)return null;if("string"==typeof se)return se;if("number"==typeof se||"boolean"==typeof se)return se.toString();if(se instanceof Error)return se.message;try{return JSON.stringify(se)}catch(be){return null}}).filter(se=>se).join(" ");Pe>=(null!=He?He:Re.logLevel)&&G({level:ee[Pe].toLowerCase(),message:X,args:qe,type:Re.name})}}}},5861:(it,Se,F)=>{"use strict";function y(L,de,oe,ye,ie,ve,ce){try{var G=L[ve](ce),$=G.value}catch(te){return void oe(te)}G.done?de($):Promise.resolve($).then(ye,ie)}function ee(L){return function(){var de=this,oe=arguments;return new Promise(function(ye,ie){var ve=L.apply(de,oe);function ce($){y(ve,ye,ie,ce,G,"next",$)}function G($){y(ve,ye,ie,ce,G,"throw",$)}ce(void 0)})}}F.d(Se,{Z:()=>ee})}},it=>{it(it.s=194)}]);